AuthorID,Author,Date,Content,Attachments,Reactions
"346499267957096448","suprposition","30/07/2020 2:49 am","hey","",""
"346499267957096448","suprposition","30/07/2020 2:49 am","what goes on in here ?","",""
"346499267957096448","suprposition","30/07/2020 2:50 am","I am a oracle develop for Zap Protocol looking to network!","",""
"182969707299733504","noahzinsmeister","30/07/2020 2:52 am","hey @suprposition","",""
"182969707299733504","noahzinsmeister","30/07/2020 2:52 am","have you checked out our oracle guides","",""
"182969707299733504","noahzinsmeister","30/07/2020 2:52 am","https://uniswap.org/docs/v2/core-concepts/oracles/","",""
"346499267957096448","suprposition","30/07/2020 2:55 am","Ill have to checkout the github repo for it then","",""
"346499267957096448","suprposition","30/07/2020 2:56 am","hey @Noah Zinsmeister Ive seen your work on web3 on codesandbox","",""
"346499267957096448","suprposition","30/07/2020 2:56 am","cool stuff","",""
"301186049323958275","sky.cactus","30/07/2020 7:06 am","On-chain, censorship resistant, maintenance free, Uniswap based oracle library for your application: https://github.com/Keydonix/uniswap-oracle/","",""
"301186049323958275","sky.cactus","30/07/2020 7:06 am","@Noah Zinsmeister any chance you could pin ‚òùÔ∏è   üò¨","",""
"301186049323958275","sky.cactus","30/07/2020 7:06 am","(if not, I understand, but figured it was worth a shot)","",""
"182969707299733504","noahzinsmeister","30/07/2020 7:07 am","Pinned a message.","",""
"182969707299733504","noahzinsmeister","30/07/2020 7:07 am","@Micah of course, done!","","üéâ (2)"
"589621262733672461","haydenadams.","30/07/2020 11:59 pm","@Micah btw we actually link to your oracle library in the building an oracle docs üôÇ","","üéâ (1)"
"589621262733672461","haydenadams.","30/07/2020 11:59 pm","https://uniswap.org/docs/v2/smart-contract-integration/building-an-oracle/","",""
"589621262733672461","haydenadams.","30/07/2020 11:59 pm","Pinned a message.","",""
"589621262733672461","haydenadams.","30/07/2020 11:59 pm","Pinned a message.","",""
"732852696628854894","Frank Lin#9106","01/08/2020 1:55 am","Wow, so glad to see this subgroup been created üôÇ","",""
"732852696628854894","Frank Lin#9106","01/08/2020 1:58 am","For anyone who might concern, I am currently building a decentralized oracle protocol built on top of Uniswap. Ask me anything if you have any question","","üëç (1)"
"732852696628854894","Frank Lin#9106","01/08/2020 1:59 am","Decentralized oracle price feed based on Uniswap. Checkout our announcement on Github: https://github.com/Unioracle/universe","","üëÄ (3)"
"732852696628854894","Frank Lin#9106","01/08/2020 2:00 am","We are currently building a brand new home page to show recently updated price feed based on Uniswap.info.","",""
"182969707299733504","noahzinsmeister","01/08/2020 2:03 am","this is cool @Frank Lin","",""
"732852696628854894","Frank Lin#9106","01/08/2020 2:09 am","Thanks @Noah Zinsmeister, this is possible because you have elegant `priceCumulativeLast` built in the Uniswap protocol.","",""
"396766768099491841","VP#8872","04/08/2020 2:37 am","> Thanks @Noah Zinsmeister, this is possible because you have elegant `priceCumulativeLast` built in the Uniswap protocol.
@Frank Lin Check DM please.!","",""
"379002032121446401","sabhiram#7154","05/08/2020 3:34 am","Pardon my newness and hence ignorance, but how does the unioracle ""team"" get defined? How are the 10 UNO per update that are earned spent? Is there governance that guarantees this?

I am asking this as I am interested in building a uniswap based app (but with no other token as all I need are the liquidity pools) and am looking for ways to incentive early adoption in a fair way.","",""
"301186049323958275","sky.cactus","05/08/2020 1:05 pm","@sabhiram There is no Uniswap token.  Anyone claiming to have a Uniswap token for sale is scamming you.","",""
"379002032121446401","sabhiram#7154","06/08/2020 3:02 am","@Micah - I got that - not about any uniswap token, but this idea of the Uniorcale prospect being described above by @Frank Lin  (hence the UNO which is I think where this token comes from). 

My intention with Uniswap is to build some maybe-useful logic on top of your liquidity pools.","",""
"731108290951512104","mhmmthatsright#8151","06/08/2020 2:10 pm","What up group,","",""
"589621262733672461","haydenadams.","07/08/2020 3:44 am","oracles, mostly","",""
"336243088500588545","jab.sh","09/08/2020 12:37 pm","what would happen to uniswap if it didn't have oracles? since I can already create liquidity pools without actually matching the real world price, what does the interaction with the oracle actually do/prevent?","",""
"301186049323958275","sky.cactus","09/08/2020 12:46 pm","@jab Uniswap doesn't use oracles, but it can be used as a data source for an oracle (carefully).","",""
"336243088500588545","jab.sh","09/08/2020 12:50 pm","ooh, that makes way more sense. thanks!","",""
"278440825631801344","jarindr","09/08/2020 7:57 pm","can anyone explain to me what are those functions for ?","https://cdn.discordapp.com/attachments/737351374760837130/742026357508276304/unknown.png",""
"278440825631801344","jarindr","09/08/2020 7:58 pm","`getAmountIn` `getAmountOut`","",""
"278440825631801344","jarindr","09/08/2020 7:58 pm","can I use this to get the rate of 2 tokens ? with 1 hop","",""
"301186049323958275","sky.cactus","09/08/2020 8:05 pm","I recommend calling `getReserves` if you just want to know the spot price.","",""
"301186049323958275","sky.cactus","09/08/2020 8:05 pm","`getAmountOut` if you want to know how much you would get if you traded X amount of some token for another.","",""
"278440825631801344","jarindr","09/08/2020 8:09 pm","@Micah does that works with 2 hops ? I want to know a DAI price but i only provide `MYTOKEN-ETH`","",""
"278440825631801344","jarindr","09/08/2020 8:10 pm","or I just need to call it twice","",""
"301186049323958275","sky.cactus","09/08/2020 8:10 pm","You can get DAI:ETH spot price and MYTOKEN:ETH spot price and then derive MYTOKEN:DAI from that.","",""
"301186049323958275","sky.cactus","09/08/2020 8:10 pm","Will be two calls to `getReserves`.","",""
"301186049323958275","sky.cactus","09/08/2020 8:10 pm","But since this **should** be off chain, that doesn't matter much.","",""
"278440825631801344","jarindr","09/08/2020 8:12 pm","but I see that `getAmountOut` can actually compute pair that doesn't exist, like I use `MYTOKEN-DAI` and it out a number","",""
"278440825631801344","jarindr","09/08/2020 8:12 pm","so basically if I use amount as `1` it should output amount of dai that it can be trades","",""
"301186049323958275","sky.cactus","09/08/2020 8:31 pm","The exchange contract doesn't do any routing.","",""
"301186049323958275","sky.cactus","09/08/2020 8:32 pm","There is no single-call solution unless you use the router, and for an integration I wouldn't recommend that personally.","",""
"301186049323958275","sky.cactus","09/08/2020 8:32 pm","What is the problem with just fetching both pairs?","",""
"278440825631801344","jarindr","09/08/2020 8:33 pm","oh wait I got it","","üëç (1)"
"278440825631801344","jarindr","09/08/2020 8:35 pm","actually you can use https://uniswap.org/docs/v2/smart-contracts/library#getamountsout","",""
"278440825631801344","jarindr","09/08/2020 8:35 pm","and provide the array of route [tokena, tokenb, tokenc] and it compute the right final price","",""
"278440825631801344","jarindr","09/08/2020 8:36 pm","@Micah not really a problem, just trying to understand how the contract works lol","",""
"141613330425970688","masterfrogda","12/08/2020 5:57 pm","hello, how can i get the prices of a token in uniswap? what ways to get it do i have ? can i do it directly from the contract pair?","",""
"743083605508751402","CryptoBossMan#0980","12/08/2020 6:10 pm","you can always go on coinghecko.com to see the prices of everything","",""
"743083605508751402","CryptoBossMan#0980","12/08/2020 6:12 pm","That's what I always do... and then I compare the fees and prices on coinghecko to the uniswap platform","",""
"743083605508751402","CryptoBossMan#0980","12/08/2020 6:12 pm","requires a little math but worth itüëç","",""
"456226577798135808","Deleted User","15/08/2020 3:39 am","Is there an average gas limit for ETH to token swaps? Like 150k?","",""
"415225742008516619","dsy4312#0603","15/08/2020 4:16 am","can someone explain how oracles on uniswap work please?","",""
"301186049323958275","sky.cactus","15/08/2020 7:37 am","@dsy4312 I recommend starting with the oracle docs on the Uniswap webpage.","","üëç (3)"
"456565407566790698","endciv","17/08/2020 9:09 am","It would be reelly nice to see ""UNISWAP DOES NOT HAVE A TOKEN"" on the trades pages.. cos i hear that a lot.","",""
"607999418398015747","kaibakker#3613","22/08/2020 6:04 pm","Is anyone using the oracle functionality in v2 yet?","",""
"385978868131168259","thegostep","22/08/2020 9:11 pm","@Noah Zinsmeister Hey Noah, I am trying to implement oracle simulations off-chain and running into trouble simulating some of the math","",""
"385978868131168259","thegostep","22/08/2020 9:12 pm","I am working on replicating this logic in JS: https://github.com/Uniswap/uniswap-v2-periphery/blob/master/contracts/examples/ExampleOracleSimple.sol#L40-L66","",""
"385978868131168259","thegostep","22/08/2020 9:12 pm","I assumed it would be possible to replicate the solidity bitshift by using bn.js bit operations: https://github.com/indutny/bn.js/#bit-operations","",""
"385978868131168259","thegostep","22/08/2020 9:13 pm","however it does not seem to work as expected","",""
"385978868131168259","thegostep","22/08/2020 9:13 pm","for example, the following outputs 0: `new BN('1110350316718918208681659376134050543000000000000000000').shrn(112)`","",""
"385978868131168259","thegostep","22/08/2020 9:14 pm","any tips on how to handle the math here would be well appreciated","",""
"385978868131168259","thegostep","22/08/2020 9:16 pm","something strange I also ran into is that calling `oracle.callStatic.update()`  with ethersv5 reverts seemingly without a reason","",""
"385978868131168259","thegostep","22/08/2020 9:53 pm","I think I got it - just need to do x / 2 ** 112 instead","","üëçüèª (1)"
"747100831165317121","kata7593","23/08/2020 8:09 pm","hi guys , can i add liquidity on my pc","",""
"589621262733672461","haydenadams.","23/08/2020 11:47 pm","@kaibakker augurv2 is using in in production","",""
"589621262733672461","haydenadams.","23/08/2020 11:47 pm","Compound's new open oracle uses it","",""
"589621262733672461","haydenadams.","23/08/2020 11:47 pm","although I'm not sure if its in production yet","",""
"589621262733672461","haydenadams.","23/08/2020 11:47 pm","maybe bzx","",""
"389025038503903232","doc.pixel","26/08/2020 10:10 pm","Is it possible to pull the current price from a uniswap pair contract? I sorta get a number by dividing price0Cumulativelast and price1Cumulativelast when I test it on the USDC-USDT contract, but I'm not sure if this is the latest price or the pair average price since the contract was created.","",""
"336243088500588545","jab.sh","26/08/2020 10:21 pm","you can call getAmountOut (passing in reserves) or getAmountsOut (passing in the pair) on the router to get the current price @Dr. Pixel","",""
"389025038503903232","doc.pixel","26/08/2020 10:22 pm","@jab thanks! I just started getting into uniswap a couple of days ago, coming from waves platform smart contracts. It's like learning a new language. I'll try this now","",""
"336243088500588545","jab.sh","26/08/2020 10:23 pm","you can do the math yourself, it's just (after error/nonzero/etc checking):
```        uint amountInWithFee = amountIn.mul(997);
        uint numerator = amountInWithFee.mul(reserveOut);
        uint denominator = reserveIn.mul(1000).add(amountInWithFee);
        amountOut = numerator / denominator;```","",""
"389025038503903232","doc.pixel","26/08/2020 10:23 pm","ok! I'll have a chew on this üòâ Thanks so much!","","üëç (1)"
"502492717016940565","_samwalker","26/08/2020 11:18 pm","@Micah trying to consume your oracle library, ran into an issue when using a web3.js rpc, could you advise? https://github.com/Keydonix/uniswap-oracle/issues/13","",""
"301186049323958275","sky.cactus","26/08/2020 11:18 pm","@Sam Walker Just saw it, we are looking into it now but I suspect you are correct.","",""
"502492717016940565","_samwalker","26/08/2020 11:19 pm","Ok thank you for quick response üôÇ","",""
"301186049323958275","sky.cactus","26/08/2020 11:21 pm","It *may* not get a fix deployed right away as I think I am the only one with NPM publish keys and I'm AFK for ~9 hours (on mobile).","",""
"502492717016940565","_samwalker","26/08/2020 11:30 pm","No worries, I can pick it up later. One more issue I found, it is a non-blocker but just wanted to report in case others ran into it https://github.com/Keydonix/uniswap-oracle/issues/14","",""
"301186049323958275","sky.cactus","26/08/2020 11:37 pm","You are welcome to join our discord if you want.  :)","",""
"301186049323958275","sky.cactus","26/08/2020 11:49 pm","@Sam Walker Looks like Scott has publish rights, so release should go out soon.","",""
"502492717016940565","_samwalker","26/08/2020 11:58 pm","Sure I would be down to join, could you send the link? And thanks that's great news.","",""
"301186049323958275","sky.cactus","26/08/2020 11:58 pm","https://discord.gg/9EYZx7  @Sam Walker","","üòÑ (1)"
"268197750829481984","gnarco_real","28/08/2020 3:48 pm","Hi guys. Is there any existing project to aggregate pair price from different dex ?","",""
"744685288454094849","Alex gerchik#9234","01/09/2020 10:22 pm","@Micah","",""
"336243088500588545","jab.sh","01/09/2020 10:23 pm","@Alex gerchik","","‚òùÔ∏è (1)"
"335239989510012930","ragnar_meta","03/09/2020 9:44 pm","Hey all. Is there a way to use the oracles to get historical price information? If not, is there some other way to get this? It looks like the API support for historical prices is no longer supported.","",""
"301186049323958275","sky.cactus","03/09/2020 10:05 pm","@ragnar_meta Yes, the Uniswap docs have a section on using it as an oracle.","",""
"456226577798135808","Deleted User","04/09/2020 2:38 am","Is there an oracle for getting the most recent tokens added to uniswap?","",""
"218723150890926080","magnus.nakamura","05/09/2020 4:50 pm","Hey guys! How often does Uniswap's oracles update prices?","",""
"301186049323958275","sky.cactus","05/09/2020 5:22 pm","@MagnusNakamura It depends on the oracle.","",""
"218723150890926080","magnus.nakamura","05/09/2020 6:28 pm","Thanks @Micah. I want to understand how Oracles work (and the cost of them). For example, if Uniswap has an Oracle that checks BTCUSDT price every minute... 
a) does it mean that it has to do a transaction to the contract every minute?
b) wouldn't that be very costly?
c) wouldn't that have delay?","",""
"301186049323958275","sky.cactus","05/09/2020 6:29 pm","Uniswap doesn't have an Oracle itself.  Uniswap provides some primitives that allow others to build trustless oracles.","",""
"264737146156482560","astarnax","05/09/2020 6:58 pm","can somebody help me. im trying to understand how the average price of any buy/sell order on uniswap is calculated","",""
"218723150890926080","magnus.nakamura","05/09/2020 7:16 pm","But by definition of an Oracle, wouldn't the price be always -at least- 10 minutes late?
> Uniswap doesn't have an Oracle itself.  Uniswap provides some primitives that allow others to build trustless oracles.
@Micah","",""
"301186049323958275","sky.cactus","05/09/2020 7:24 pm","Uniswap based oracles are time weighted averages, and depending on the specifics of the oracle design they may have a longer or shorter trailing delay.","",""
"218723150890926080","magnus.nakamura","05/09/2020 7:24 pm","Cool, thanks a lot for the answers üôÇ and sorry if these were obvious questions, I just couldn't find that much info for these specific questions","",""
"301186049323958275","sky.cactus","05/09/2020 7:25 pm","Check out the Uniswap Oracle docs if you haven't already @MagnusNakamura.","","üí™ (1)"
"366873077155364874","Rubik#2305","06/09/2020 9:45 pm","Hi @Micah , I was looking at the `ExampleOracleSimple` located at https://github.com/Uniswap/uniswap-v2-periphery/blob/6d03bede0a97c72323fa1c379ed3fdf7231d0b26/contracts/examples/ExampleOracleSimple.sol, and was wondering what are the use cases for this check in the `update` function:

`require(timeElapsed >= PERIOD, 'ExampleOracleSimple: PERIOD_NOT_ELAPSED');`

I would assume that most needs require this to be updated as frequently as possible, or on every explicit call to `update`, why was this check put in place? I know it's an example, I just want to understand what are its use cases. Thanks!","",""
"301186049323958275","sky.cactus","06/09/2020 9:45 pm","@Rubik No idea, I am not particularly familiar with the example oracle.","",""
"301186049323958275","sky.cactus","06/09/2020 9:47 pm","Please don't cold mention people.  Just ask your question and wait to see if someone answers.","","üëç (1)"
"182969707299733504","noahzinsmeister","06/09/2020 9:59 pm","@Rubik it's just to ensure that the oracle price represents at least some minimum interval","",""
"182969707299733504","noahzinsmeister","06/09/2020 9:59 pm","pretty blunt solution, hence why it's in the simple example","",""
"213523635514769409","roti_reads_tealeaves","06/09/2020 11:02 pm","Patiently waiting for an excuse to use this meme.","https://cdn.discordapp.com/attachments/737351374760837130/752219632982818926/matrix-oracle.jpg",""
"366873077155364874","Rubik#2305","06/09/2020 11:04 pm","Thanks for clarifying @Noah Zinsmeister ! I was reading as well this article from the team (https://uniswap.org/docs/v2/core-concepts/oracles), and I was trying to assess the risk of a flash loan attack if a contract was dependent on the usage of the simple 
 TWAP cumulative prices from the pair contracts. Let me explain.

Suppose that I have a contract that simulates an option-like instrument for a given asset on Uniswap, say, `TKN/ETH`. Then, if the price/ratio is above `X` (strike price), a premium could be collected.

If I were to use the TWAP directly (i.e. `UniswapV2OracleLibrary#currentCumulativePrice`), and assuming a liquid market, couldn't someone use an ETH flash loan to buy `TKN`, call `sync()`, and manipulate the price up to collect the premium?","",""
"182969707299733504","noahzinsmeister","06/09/2020 11:06 pm","not sure what you mean by ""use the TWAP directly"", there's no such thing. you have to take a delta between two subsequent observations of cumulative prices to get a meaningful TWAP","",""
"182969707299733504","noahzinsmeister","06/09/2020 11:07 pm","but the answer to your question in general is no, flash loans have no effect on TWAP prices, because they necessarily can't affect the price as of the end of a block, which are the only prices used in the oracle","",""
"366873077155364874","Rubik#2305","06/09/2020 11:10 pm","> not sure what you mean by ""use the TWAP directly"", there's no such thing. you have to take a delta between two subsequent observations of cumulative prices to get a meaningful TWAP
@Noah Zinsmeister what I meant by using the TWAP directly in this case, was just the delta between 2 blocks, where on every call to collect the premium I would store `priceCumulativeLast` and `blockTimestampLast`.","",""
"366873077155364874","Rubik#2305","06/09/2020 11:11 pm","> but the answer to your question in general is no, flash loans have no effect on TWAP prices, because they necessarily can't affect the price as of the end of a block, which are the only prices used in the oracle
@Noah Zinsmeister okay, that makes more sense, so `IUniswapV2Pair#sync()` would not affect `priceCumulative0/1` on the pair then?","",""
"182969707299733504","noahzinsmeister","06/09/2020 11:12 pm","i see @Rubik, the downside with that is that (probably) the time period you're measuring the TWAP over is going to be at best completely random, and at worst very short or even fully under the control of an attacker (leading to attackable prices)","",""
"366873077155364874","Rubik#2305","06/09/2020 11:13 pm","indeed, it's not deterministic, it's an `external` function that can be called by anyone at anytime.","",""
"182969707299733504","noahzinsmeister","06/09/2020 11:13 pm","@Rubik a `sync` cannot affect the cumulative prices measures for _prior_ blocks. however, it is possible for that function to change the reserves in the contract, so starting the block _after_ the sync it's of course possible for that to affect the cumulative prices","",""
"366873077155364874","Rubik#2305","06/09/2020 11:17 pm","right, in that case it's less concerning as the flash loan would have to be repaid before the end of the block, so it would have to be someone willing to push the price in a certain direction for multiple blocks, and for the collected premium to be worth more than the capital required for that movement.","",""
"366873077155364874","Rubik#2305","06/09/2020 11:31 pm","> i see @Rubik, the downside with that is that (probably) the time period you're measuring the TWAP over is going to be at best completely random, and at worst very short or even fully under the control of an attacker (leading to attackable prices)
@Noah Zinsmeister when you say ""at worst very short"", is there any additional reading I could do on that, or could you please clarify how would that work? I imagine that if the current price is, say, 10% away from the target ""strike price"", an attacker could potentially manipulate the price during a, say, 5-min window where nobody else would update `priceCumulativeLast` and `blockTimestampLast`, which means they would effectively control the TWAP of the contract during that period.","",""
"366873077155364874","Rubik#2305","06/09/2020 11:33 pm","And thanks for your time.","",""
"182969707299733504","noahzinsmeister","06/09/2020 11:39 pm","well they'd just have to keep the block-ending price above or below their target","",""
"182969707299733504","noahzinsmeister","06/09/2020 11:40 pm","meaning they'd have to consistently bleeding money to anyone willing to buy/sell the asset at the cheap/expensive price relative to the ""true"" price","",""
"182969707299733504","noahzinsmeister","06/09/2020 11:40 pm","this gets easiest/cheaper the shorter the period is","",""
"182969707299733504","noahzinsmeister","06/09/2020 11:40 pm","and of course is a function of liquidity in the contracts as well (low liquidity contracts are much cheaper to manipulate the price of)","",""
"366873077155364874","Rubik#2305","07/09/2020 1:18 am","I see, thanks @Noah Zinsmeister !","","üíØ (1)"
"483280542658461696","candycarpet","07/09/2020 1:01 pm","Hey @Hayden Adams ü¶Ñ curious if you were finally able to pen down your thoughts about determining the $ value of an LP token: https://forum.makerdao.com/t/uni-v1-dai-uniswap-dai-liquidity-token-collateral-application/1966/36 Thanks üôè","",""
"182969707299733504","noahzinsmeister","07/09/2020 8:47 pm","@candycarpet see https://forum.makerdao.com/t/uni-v2-dai-eth-uniswap-v2-dai-eth-liquidity-token-collateral-application/3480/21","",""
"483280542658461696","candycarpet","08/09/2020 12:54 am","So does that mean I get the price from the uniswap v2 oracle? - I was wondering if it's possible to determine the price of an LP share, given the prices of the underlying assets. something along these lines: https://forum.makerdao.com/t/dai-eth-uni-v1-oracle-discussion/2146/4","",""
"649823699717062697","p2p#5340","15/09/2020 9:45 am","i have problems understanding getting price of a trading pair.

example ETH/USDT https://etherscan.io/address/0x0d4a11d5eeaac28ec3f61d100daf4d40471f1852

it says

_reserve0: 211405646632615818251985
_reserve1: 79515351086380

and price0CumulativeLast says 15946547321947877244823224157701
and price1CumulativeLast says 191350650690293036755195982133366584042878827331802

i get the realistic price of ETH by doing reserve1/reserve0

removing the decimals doing a 79515351/211405=376,12

but what should i do with price0CumulativeLast and price1CumulativeLast ???

i solely want the dollar-price of 1 eth, how do i correctly abreviate it from these given values?

according to doc price0CumulativeLast should be the dollar-price of 1 eth.

please enlighte me. THANK YOU","",""
"241973406130634752","Hilobrain#6394","15/09/2020 11:58 am","> you can call getAmountOut (passing in reserves) or getAmountsOut (passing in the pair) on the router to get the current price @Dr. Pixel
@jab  isn't this susceptible to price manipulation?","",""
"241973406130634752","Hilobrain#6394","15/09/2020 11:59 am","So that someone can make a flash tx and trick the contract that's using that price.","",""
"336243088500588545","jab.sh","15/09/2020 12:00 pm","I mean, maybe? That's how you get the price","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:01 pm","Hmmm","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:02 pm","Can't you also just use the reserves as outlined in the whitepaper? As stated in v2 it does only update _after_ all trades","",""
"336243088500588545","jab.sh","15/09/2020 12:02 pm","That's literally all the getAmountOut function is doing","",""
"336243088500588545","jab.sh","15/09/2020 12:03 pm","It's calling get reserves and doing some math","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:03 pm","Yeah okay, true. I am just concerned about it being attackable","",""
"336243088500588545","jab.sh","15/09/2020 12:03 pm","And getAmountOut just gets the reserves first and passes it into getAmountsOut","",""
"336243088500588545","jab.sh","15/09/2020 12:03 pm","Er, I think that's backwards, but you know what I mean","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:04 pm","As in, people manipulating the price right before the contract uses it to do all sorts of other things","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:04 pm","> And getAmountOut just gets the reserves first and passes it into getAmountsOut
@jab  yeah okay, thanks.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:04 pm","I think it's not a big risk with high liquidity pairs though.","",""
"336243088500588545","jab.sh","15/09/2020 12:04 pm","You can get the reserves and do the math yourself, or you can just call getAmountsOut. In the end it's the same","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:05 pm","Ah yes","",""
"301186049323958275","sky.cactus","15/09/2020 12:05 pm","Don't use that for on-chain price oracles!","",""
"301186049323958275","sky.cactus","15/09/2020 12:05 pm","It is great for off-chain price checking though.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:05 pm","Hmmm","",""
"336243088500588545","jab.sh","15/09/2020 12:05 pm","I don't think one is more or less vulnerable to manipulation","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:05 pm","But what if you need the price at the moment of the function call (so no twap or smth)","",""
"301186049323958275","sky.cactus","15/09/2020 12:06 pm","You can't get that on-chain in a way that can't trivially be manipulated.","",""
"301186049323958275","sky.cactus","15/09/2020 12:07 pm","You can do a short-duration TWAP if want.  Security provided by TWAPs is logarithmic.  That first 1 seconds gives a huge amount of security, and the last second after 365 days of a TWAP gives you almost no additional security.","",""
"301186049323958275","sky.cactus","15/09/2020 12:07 pm","I generally recommend about an hour though.","",""
"301186049323958275","sky.cactus","15/09/2020 12:07 pm","An hour protects against most attack types.  1 second still leaves you open to direct market manipulation type stuff.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:08 pm","Hmm okay. In my case the 1 hour isn't an option unfortunately","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:08 pm","As the user needs to close their position at the current price","",""
"301186049323958275","sky.cactus","15/09/2020 12:08 pm","My recommendation is to design your system around a TWAP.","",""
"301186049323958275","sky.cactus","15/09/2020 12:09 pm","That is, make it clear to the user that opens and closes are done off of TWAP, not spot.","",""
"301186049323958275","sky.cactus","15/09/2020 12:09 pm","Whatever you do, don't let people open/close by spot price!","",""
"301186049323958275","sky.cactus","15/09/2020 12:09 pm","It is just asking to get exploited.","",""
"336243088500588545","jab.sh","15/09/2020 12:09 pm","And just use the twap price as the minAmountOut? But the trade will execute at the market price?","",""
"301186049323958275","sky.cactus","15/09/2020 12:09 pm","(same with liquidations, they should never happen at on-chain spot price)","",""
"301186049323958275","sky.cactus","15/09/2020 12:09 pm","> And just use the twap price as the minAmountOut? But the trade will execute at the market price?
@jab This will fail half of the time (if TWAP is higher than real spot).","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:10 pm","Yeah, but then my problem is that someone has to call the contract to get the twap at idk T-1 h and then again at T","",""
"336243088500588545","jab.sh","15/09/2020 12:10 pm","So how do you do it? I'm confused","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:10 pm","Whereas it is most convenient to close the position with 1 cal> Yeah, but then my problem is that someone has to call the contract to get the twap at idk T-1 h and then again at T
@Hilobrain","",""
"301186049323958275","sky.cactus","15/09/2020 12:10 pm","@Hilobrain You can see the oracle we (Keydonix) built.  Only requires a single call, but gas prices are high.","",""
"301186049323958275","sky.cactus","15/09/2020 12:11 pm","600k gas, but you can do a TWAP of up to 1 hour, where the user supplies a proof of historic values that is validated on-chain.","",""
"301186049323958275","sky.cactus","15/09/2020 12:11 pm","So there is no need for two calls separated by time.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:11 pm","Oh wow that's interesting","",""
"336243088500588545","jab.sh","15/09/2020 12:11 pm","So you use the twap to get the price, but then how do you execute the trade?","",""
"301186049323958275","sky.cactus","15/09/2020 12:11 pm","The user *does* have some amount of control over the price, as they can pick from a range of historical values, but you can decide how much leniency you provide.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:12 pm","Hmm okay will look into that thanks @Micah","",""
"301186049323958275","sky.cactus","15/09/2020 12:12 pm","More leniency means the user is less likely to fail due to transactions taking a while to mine, less leniency means they have less ""control"" over the price they use.","",""
"301186049323958275","sky.cactus","15/09/2020 12:12 pm","@jab I don't know about this specific use case, but usually the closure is not done via Uniswap, it is out of some pool of assets.","",""
"301186049323958275","sky.cactus","15/09/2020 12:13 pm","e.g., closing out some tokens for some collateral at current price.","",""
"336243088500588545","jab.sh","15/09/2020 12:13 pm","Right, that's what I was about to write. You're just using uniswap as the oracle (and maybe for balancing that pool of assets out of band)","","üëç (1)"
"241973406130634752","Hilobrain#6394","15/09/2020 12:14 pm","Yeah in my case it is about a prediction market.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:14 pm","So a user predicts the price at a certain timestamp in the future after which they can settle the prediction at current price","",""
"336243088500588545","jab.sh","15/09/2020 12:16 pm","So you're running a futures market","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:16 pm","If I put a maximum on the prediction value such that the costs outweigh the potential profit I can use the spot price on-chain for high liquidity pairs","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:17 pm","Kind of yes","",""
"301186049323958275","sky.cactus","15/09/2020 12:18 pm","> If I put a maximum on the prediction value such that the costs outweigh the potential profit I can use the spot price on-chain for high liquidity pairs
@Hilobrain Don't do this!  Spot price can be manipulated *for free*!","",""
"336243088500588545","jab.sh","15/09/2020 12:18 pm","Don't forget uniswap has flash swaps","","‚òùÔ∏è (1)"
"241973406130634752","Hilobrain#6394","15/09/2020 12:18 pm","How?","",""
"301186049323958275","sky.cactus","15/09/2020 12:18 pm","You *will* get drained.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:19 pm","Ah yeah off course","",""
"336243088500588545","jab.sh","15/09/2020 12:19 pm","Someone can do a swap with 100% of the liquidity","",""
"301186049323958275","sky.cactus","15/09/2020 12:19 pm","Move price an extreme amount, call your app, then move price back to where it was.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:19 pm","Yeah","",""
"336243088500588545","jab.sh","15/09/2020 12:19 pm","Instead of doing twap, couldn't you look at the price, say, 20 blocks ago?","",""
"301186049323958275","sky.cactus","15/09/2020 12:20 pm","Not really much better.","",""
"336243088500588545","jab.sh","15/09/2020 12:20 pm","Wouldn't that also avoid most of these attacks?","",""
"301186049323958275","sky.cactus","15/09/2020 12:20 pm","Someone can just manipulate the price for one block, then wait 20 blocks, then do the thing.","",""
"301186049323958275","sky.cactus","15/09/2020 12:20 pm","1 block manipulations are *slightly* harder, but not by much.","",""
"336243088500588545","jab.sh","15/09/2020 12:20 pm","And hope nobody arbs it back","",""
"301186049323958275","sky.cactus","15/09/2020 12:20 pm","A good bot can avoid getting arbed reasonable well.","",""
"301186049323958275","sky.cactus","15/09/2020 12:21 pm","Just be last transaction in block `n` and first transaction in block `n+1`.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:21 pm","Maybe it's best to use an oracle that gets a moving average from a trusted api","",""
"336243088500588545","jab.sh","15/09/2020 12:21 pm","Idk, the current arb bots are out-arbing each other in the bloody mempool","",""
"301186049323958275","sky.cactus","15/09/2020 12:21 pm","If there is competition you may have to pay a bit of a premium in gas costs.","",""
"301186049323958275","sky.cactus","15/09/2020 12:21 pm","@Hilobrain I recommend the proof based oracle I mentioned above, it was designed specifically for this type of situation.","",""
"301186049323958275","sky.cactus","15/09/2020 12:22 pm","(we were going to use it to build a margin trading platform)","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:22 pm","That's awesome, will look into that! Thanks üôÇ","",""
"336243088500588545","jab.sh","15/09/2020 12:22 pm","@Hilobrain this sounds like a fun project, I hope it turns out well üôÇ","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:24 pm","I hope so too!","",""
"241973406130634752","Hilobrain#6394","15/09/2020 12:24 pm","Thanks for the help üôÇ","","üëç (2)"
"241973406130634752","Hilobrain#6394","15/09/2020 12:37 pm","Will report back on it üòú","",""
"301186049323958275","sky.cactus","15/09/2020 3:57 pm","> For the Keydonix oracle you mentioned @Micah, that does require access to an Ethereum node right? Why not update the state of the contract with a TWAP instead?
@Hilobrain Yes, it requires the user have access to an Ethereum node, but so does basically everything.","",""
"301186049323958275","sky.cactus","15/09/2020 3:57 pm","You can maintain an on-chain oracle, but it gets expensive since you have to update it very regularly.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 3:57 pm","Hmmm, then it might be easier to simply update the contract for a TWAP.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 3:57 pm","True","",""
"241973406130634752","Hilobrain#6394","15/09/2020 3:58 pm","Doesn't this solution get expensive you think? Compared to the other solution","",""
"301186049323958275","sky.cactus","15/09/2020 3:58 pm","The nice thing about the proof is that there is no maintenance.","",""
"301186049323958275","sky.cactus","15/09/2020 3:59 pm","It depends on frequency.","",""
"301186049323958275","sky.cactus","15/09/2020 3:59 pm","If your users are doing on-chain oracle reads every second, then maintaining a price feed is cheaper overall.  If they are doing on-chain oracle reads once a month, then the proofs are cheaper overall.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 3:59 pm","But how will the ""proofData"" be submitted then?","",""
"301186049323958275","sky.cactus","15/09/2020 3:59 pm","There exists a suite spot in the middle where they are equal.","",""
"301186049323958275","sky.cactus","15/09/2020 4:00 pm","The proof is sent as part of the transaction it is pretty big which is why it costs about 600k gas.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 4:01 pm","> The proof is sent as part of the transaction it is pretty big which is why it costs about 600k gas.
@Micah But this has to be done by the user then. Would have to use an API to an Ethereum node or smth to get the proofdata","",""
"241973406130634752","Hilobrain#6394","15/09/2020 4:01 pm","So that the front-end just queries an Ethereum API to get the required proofdata for the TX so be submitted by the user","",""
"241973406130634752","Hilobrain#6394","15/09/2020 4:01 pm","At least, that's how I understand how this would work atm.","",""
"301186049323958275","sky.cactus","15/09/2020 4:01 pm","> Would have to use an API to an Ethereum node or smth to get the proofdata
Yes, this is available from all Ethereum clients.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 4:02 pm","Yeah okay","",""
"241973406130634752","Hilobrain#6394","15/09/2020 4:02 pm","Hmm then this might be the solution to go about doing this... ü§î","",""
"241973406130634752","Hilobrain#6394","15/09/2020 4:02 pm","It's a hard problem, harder than I initially thought actually","",""
"301186049323958275","sky.cactus","15/09/2020 4:05 pm","Yeah, it is a hard problem.  üôÇ","",""
"241973406130634752","Hilobrain#6394","15/09/2020 4:06 pm","Anyway, thanks a lot for your help. Much appreciated! Will have to think a bit about the best solution to this problem. üòÑ","","üëç (1)"
"241973406130634752","Hilobrain#6394","15/09/2020 5:10 pm","I think I'll be going with a different approach; users will have to make 2 calls T time apart so that the contract can calculate a TWAP on the second call at which also the settlement happens. Would a TWAP over e.g. 10 minutes be ""secure enough""? We will only list liquid pairs meaning that it is hard to ""control"" the price, especially for 10 minutes long.","","üëç (2)"
"301186049323958275","sky.cactus","15/09/2020 5:14 pm","For heavily traded/arbitraged pairs, 10 minutes may be fine.  I personally like an hour, but if the user has to do two transactions `n` minutes apart that may not be worth the benefit.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 5:14 pm","Yeah, that's what I was thinking as well.","",""
"301186049323958275","sky.cactus","15/09/2020 5:14 pm","The shorter the time window, the more heavily arbitraged you'll want the pair to be to avoid manipulation (make it expensive).","",""
"301186049323958275","sky.cactus","15/09/2020 5:15 pm","Like if you are doing ETH:USDC or ETH:DAI or ETH:USDT you can get away with a pretty short window without sacrificing too much liquidity.","",""
"241973406130634752","Hilobrain#6394","15/09/2020 5:15 pm","I looked at the Keydonix code and man, that's some amazing work haha! Really impressed by it. For this situation however I don't think it's a suitable solution as 600k gas costs is too high for this.","","üëç (1)"
"301186049323958275","sky.cactus","15/09/2020 5:15 pm","If you are doing SHIT:SCAM on the other hand, you probably need a huge window since I suspect no one arbs that market.","","üòÇ (1)"
"241973406130634752","Hilobrain#6394","15/09/2020 5:15 pm","> The shorter the time window, the more heavily arbitraged you'll want the pair to be to avoid manipulation (make it expensive).
@Micah Yeah, definitely","",""
"241973406130634752","Hilobrain#6394","15/09/2020 5:16 pm","> If you are doing SHIT:SCAM on the other hand, you probably need a huge window since I suspect no one arbs that market.
@Micah We will only list the most liquid pairs, no shitty low-volume pairs üôÇ","",""
"241973406130634752","Hilobrain#6394","15/09/2020 5:17 pm","Awesome, thanks for all the advice. Will most probably be implementing this approach! Will obviously have to run some numbers on what would be the most optimal value for n","",""
"509033961968762880","shatzakis","20/09/2020 3:19 pm","technical question: What if we have a collateralized token which is only minted externally from it's smart contract (when swapped for ETH) and whose price is based solely on two factors, 1) the amount of tokens in circulation (where the number drops when tokens are burnt when sold back to the contract, or becomes more expensive as the supply increases) and 2) while taking into consideration the price of an external fiat exchange rate relative to ethereum via a Chainlink oracle. My question is, how could such a token behave in a Uniswap pool? Would the use of the oracle to track its supply and chainlink price be useful to helping the pool stay balanced and reduce arbitrage?","",""
"509033961968762880","shatzakis","20/09/2020 3:20 pm","The above example uses Sogur (SGR) as an example use case.","",""
"718933492133789786","lesterrr","21/09/2020 11:58 pm","is there a date for when the protocol switch is turned on?","",""
"355229742917615616","fma#8096","23/09/2020 1:21 am","I am trhing to integrate router","",""
"355229742917615616","fma#8096","23/09/2020 1:21 am","in a smart contract","",""
"355229742917615616","fma#8096","23/09/2020 1:21 am","is there anway to know if the","",""
"355229742917615616","fma#8096","23/09/2020 1:21 am","call was successful ?","",""
"355229742917615616","fma#8096","23/09/2020 1:22 am","uint[] memory amountOut = uniswapRouter.swapExactTokensForTokens(order.amountIn, order.minAmountOut, path, address(this), deadline);","",""
"355229742917615616","fma#8096","23/09/2020 1:22 am","how can I know if the call was a failure or success ?","",""
"355229742917615616","fma#8096","23/09/2020 1:22 am","would it revert if fail?","",""
"301186049323958275","sky.cactus","23/09/2020 10:25 am","@fma If it fails it will revert.","",""
"301186049323958275","sky.cactus","23/09/2020 10:25 am","Better question for #üíª‚îÇdev-chat though, please move conversation there.","",""
"336243088500588545","jab.sh","23/09/2020 10:25 am","this is #üîÆ‚îÇuniswap-oracles, do you mean #üíª‚îÇdev-chat?","","üëç (1)"
"664701166302658592","edgar#7960","24/09/2020 8:17 pm","any projects using uniswap as oracle - i thought bzrx was?","","‚ùì (2)"
"589621262733672461","haydenadams.","25/09/2020 12:38 am","Augur V2, Compound's latest oracle, Based,","","Hayden (1)"
"589621262733672461","haydenadams.","25/09/2020 12:38 am","few others mentioned in comments here
https://twitter.com/haydenzadams/status/1304575564917944320","",""
"664701166302658592","edgar#7960","25/09/2020 3:34 am","ah - ty","",""
"156982729764896769","Plumbus#6214","28/09/2020 2:04 pm","> any projects using uniswap as oracle - i thought bzrx was?
@edgar they use chainlink now","",""
"423588689193598978","vivialis","30/09/2020 5:20 am","is this oracles as in XY Oracle??","",""
"301186049323958275","sky.cactus","01/10/2020 8:45 am","@vivialis What is ""XY Oracle""?","",""
"423588689193598978","vivialis","01/10/2020 9:00 am","> @vivialis What is ""XY Oracle""?
@Micah geolocation mining platform; its ERC20 is on uniswap","",""
"301186049323958275","sky.cactus","01/10/2020 9:00 am","No, this channel has nothing to do with that.","",""
"423588689193598978","vivialis","01/10/2020 9:02 am","> No, this channel has nothing to do with that.
@Micah o alright; mind explaining what this channel is about? i'm just curious","",""
"301186049323958275","sky.cactus","01/10/2020 9:02 am","Discussion about using Uniswap as a price feed oracle for other Ethereum applications.","",""
"301186049323958275","sky.cactus","01/10/2020 9:03 am","So if your application needs to know the price of ABC denominated in DEF, you could use Uniswap to get that information.","",""
"439986246236766209","FridgeMagnet#5882","02/10/2020 2:59 am","Is this group actively involved in the maintenance of the Uniswap Subgraph?","",""
"730463593711140956","bor444","02/10/2020 3:19 am","@FridgeMagnet what would you like to know about Subgraph?","",""
"439986246236766209","FridgeMagnet#5882","02/10/2020 10:43 am","I'm a frontend dev with a bent for building data visualisations. Just digging into the graph to see what might be possible","","üî• (1)"
"439986246236766209","FridgeMagnet#5882","02/10/2020 10:43 am","Site at anagraph.com (I do 3D like what you see there)","",""
"439986246236766209","FridgeMagnet#5882","02/10/2020 10:44 am","Just thinking through what a UI could look like that helps you visualise your wallets, stakes, swaps, transactions etc in a 3D space","",""
"301186049323958275","sky.cactus","02/10/2020 10:45 am","@FridgeMagnet Please use #üíª‚îÇdev-chat.  This channel is specifically for discussion about using Uniswap as a price feed oracle.","",""
"647259381284732968","medogob","06/10/2020 3:00 am","will there be any reward for liquidity provider in the future ?","",""
"546806870933897217","lep.irish","06/10/2020 2:09 pm","Can you use chainlink as a oracle feed for uniswap ?","",""
"756987239614906438","UniversalGizod#0018","06/10/2020 3:32 pm","Do the oracles have 3rd party‚Äôs","",""
"546806870933897217","lep.irish","06/10/2020 4:58 pm","Sorry I am new to this and do not understand the question ?","",""
"301186049323958275","sky.cactus","06/10/2020 5:02 pm","> Can you use chainlink as a oracle feed for uniswap ?
@Roger50 Uniswap can be an oracle for other apps, it does not need to read from an oracle to do its job.","",""
"546806870933897217","lep.irish","06/10/2020 5:03 pm","Ok thanks for that kind regards Liam","",""
"678463773866197054","geekery","06/10/2020 9:57 pm","How to use uniswap as a price source?","",""
"301186049323958275","sky.cactus","07/10/2020 11:46 am","@geekery https://uniswap.org/docs/v2/core-concepts/oracles/","",""
"678463773866197054","geekery","07/10/2020 12:59 pm","This needs to store the historical price on the chain, and the data needs to be maintained by myself, which is too costly.","",""
"678463773866197054","geekery","07/10/2020 12:59 pm","@Micah","",""
"301186049323958275","sky.cactus","07/10/2020 1:00 pm","@geekery https://github.com/Keydonix/uniswap-oracle","",""
"678463773866197054","geekery","07/10/2020 1:30 pm","Can it be used directly after being deployed on the mainnet?","",""
"678463773866197054","geekery","07/10/2020 1:30 pm","@Micah","",""
"301186049323958275","sky.cactus","07/10/2020 2:38 pm","@geekery You would want to integrate that one into your application.","",""
"708905027124723772","SittingDuck#7635","09/10/2020 2:18 am","> Just thinking through what a UI could look like that helps you visualise your wallets, stakes, swaps, transactions etc in a 3D space
@FridgeMagnet  I‚Äôd be interested in that","",""
"439986246236766209","FridgeMagnet#5882","09/10/2020 2:18 am","@SittingDuck what's your background?","",""
"344021697399357440","junnk#5425","09/10/2020 5:02 am","Is there an example of how to return TWA price in web3.js?","",""
"344021697399357440","junnk#5425","09/10/2020 5:03 am","happy to share my broken code if anyone can help me out üòÖ","",""
"154453240535056384","hiturunk","12/10/2020 3:29 am","@FridgeMagnet I experimented with a very similar concept to that with the web and iframes.","",""
"154453240535056384","hiturunk","12/10/2020 3:29 am","[But that's outside of scope of oracles]","",""
"303956454128222208","Vitalii Maistrenko#3927","15/10/2020 1:54 pm","Hey guys
To execute any Swap for example SwapExactETHForTokens
I need to provide a path so how can I get it?
Is there any API call or contract method that can accept 2 addresses and give a path to me?
I'm using golang, so js SDK is not an option for me(","",""
"303956454128222208","Vitalii Maistrenko#3927","15/10/2020 1:56 pm","just looking for any idea how to do that","",""
"301186049323958275","sky.cactus","15/10/2020 9:21 pm","@Vitalii Maistrenko You'll get better help in #üíª‚îÇdev-chat.","",""
"301186049323958275","sky.cactus","17/10/2020 6:44 pm","@La_ma1n This channel is for discussion about Uniswap oracles, please keep the conversation on-topic.","",""
"383044708705894410","la_ma1n","17/10/2020 7:46 pm","It‚Äôs the point you need to add oracles for laggy pair and feed the right price !","",""
"383044708705894410","la_ma1n","17/10/2020 7:48 pm","But maybe you have a vampire bot and you want to continue to drain peacefully","",""
"383044708705894410","la_ma1n","17/10/2020 7:52 pm","If no Uniswap team doesn‚Äôt want it to fix maybe it‚Äôs by interest and we can ask CFTC and SEC to come to visit you in Brooklyn","","ü§£ (1)"
"383044708705894410","la_ma1n","17/10/2020 7:52 pm","It‚Äôs not fair","",""
"301186049323958275","sky.cactus","17/10/2020 8:50 pm","This channel is for discussion about using Uniswap as an oracle, not about adding oracles to Uniswap.","",""
"235919361725038593","jintao","17/10/2020 11:43 pm","hi, i was trying to use the wbtc/weth pool to calculate weth price using the uniswap oracle.
```
if __name__ == '__main__':
  p0 = 203187956076106303364926933300
  p1 = 203191092557357055208287019863

  t0 = 1602957924
  t1 = 1602958111

  r1 = 961090616433006482780935

  twap = (p1 - p0) / float(t1 - t0)
  print (twap)
  # 1.67726270094e+22
```
here was my attempt to calculate the price of weth using the twap formula found here
https://uniswap.org/blog/uniswap-v2/#price-oracles

the p0/p1 were just taken from the read contract and the t0/t1 were taken from the `getReserves _blockTimestampLast`

that value at the end is pretty clearly wrong. where did i go wrong?","",""
"235919361725038593","jintao","18/10/2020 12:27 am",":/ i'm very lost thegraph prices also make no sense to me","",""
"362077377012170753","lewi.eth","20/10/2020 9:40 pm","> :/ i'm very lost thegraph prices also make no sense to me
@jintao#0713 I'm at the same spot as you.

The reason you are getting the wrong values is the encoding of the data. The priceCumulative is a uint112 so they need to be `/2^112` and the final result needs to be `/10^12` in order to work.","",""
"537466222904606730","ChrisD#6237","21/10/2020 12:08 am","Hello uniswap team! I'm interested in calculating the current price of an LP token on-chain. Do the contracts have an easy way to do this or will I need to build a custom solution","",""
"362077377012170753","lewi.eth","21/10/2020 1:48 am","@ChrisD you can do something like this:
```
  // Setup contracts
  let esd = new ethers.Contract(data.ESD_ADDRESS, data.ERC20_ABI, provider)
  let usdc = new ethers.Contract(data.USDC_ADDRESS, data.ERC20_ABI, provider)

  // Balance of tokens in LP
  const esdAmount = await esd.balanceOf(data.UNISWAP_ADDRESS)
  const usdcAmount = await usdc.balanceOf(data.UNISWAP_ADDRESS)

  // Calculate price of ESD/USDC
  const price =
    ethers.utils.formatUnits(usdcAmount, 6) /
    ethers.utils.formatUnits(esdAmount, 18)
```","",""
"362077377012170753","lewi.eth","21/10/2020 1:49 am","Replace esd & usdc with your token. Make sure to use the decimals in the price calc bit","",""
"537466222904606730","ChrisD#6237","21/10/2020 1:50 am","Oh awesome! That's about what I thought I was gonna have to do","",""
"537466222904606730","ChrisD#6237","21/10/2020 1:50 am","Thank you!","",""
"362077377012170753","lewi.eth","21/10/2020 2:02 am","@Noah Zinsmeister sorry to bother, I'm having the same issue as Jintao. Would you happen to have an example of an off-chain TWAP calculator? I've been trying for a while in Node, but no luck","",""
"362077377012170753","lewi.eth","21/10/2020 2:04 am","My formula is:
```
  (price1 - price0) / 2**112
------------------------------- / 10 ** 12
           t1 - t0
```","",""
"456226577798135808","Deleted User","21/10/2020 2:24 am","when will the cumulative price variables overflow uint256 ?","",""
"456226577798135808","Deleted User","21/10/2020 2:24 am","what happens in that case?","",""
"456226577798135808","Deleted User","21/10/2020 2:26 am","can someone help me understand https://github.com/Uniswap/uniswap-v2-core/blob/master/contracts/UniswapV2Pair.sol#L78","",""
"182969707299733504","noahzinsmeister","21/10/2020 2:34 am","recommend checking out the js tests for hints on interacting with oracle data in node","",""
"182969707299733504","noahzinsmeister","21/10/2020 2:34 am","https://github.com/Uniswap/uniswap-v2-periphery/tree/master/test","",""
"182969707299733504","noahzinsmeister","21/10/2020 2:35 am","@Deleted User the cumulative price variables can overflow at most every 2**32-1 seconds (~136 years)","",""
"362077377012170753","lewi.eth","21/10/2020 2:47 am","@Noah Zinsmeister any chance you could point me in the right direction on the above question?","",""
"182969707299733504","noahzinsmeister","21/10/2020 2:48 am","best i can do is this, sorry @lewi : https://github.com/Uniswap/uniswap-v2-periphery/blob/master/test/ExampleOracleSimple.spec.ts","",""
"182969707299733504","noahzinsmeister","21/10/2020 2:48 am","check out `encodePrice`","",""
"182969707299733504","noahzinsmeister","21/10/2020 2:48 am","more here: https://github.com/Uniswap/uniswap-v2-periphery/blob/master/test/ExampleSlidingWindowOracle.spec.ts","",""
"362077377012170753","lewi.eth","21/10/2020 3:01 am","No this should be helpful!","",""
"362077377012170753","lewi.eth","21/10/2020 3:01 am","Thanks","",""
"362077377012170753","lewi.eth","21/10/2020 3:06 am","@thegostep did you manage to get it working?","",""
"456226577798135808","Deleted User","21/10/2020 3:17 am","thanks @Noah Zinsmeister","",""
"301186049323958275","sky.cactus","21/10/2020 7:14 am","@ChrisD @lewi **Do not use the spot price on chain!!**. You will lose money!","",""
"537466222904606730","ChrisD#6237","21/10/2020 7:31 am","I'll keep that in mind, thank you","",""
"385978868131168259","thegostep","21/10/2020 12:05 pm","> @thegostep did you manage to get it working?
@lewi This is my code for Based/sUSD rebase TWAP
```ts
// simulate update call
    const price1CumulativeLast = ethers.BigNumber.from(
      data.price1CumulativeLast,
    )
    let price1Cumulative = ethers.BigNumber.from(data.price1Cumulative)

    const now = ethers.BigNumber.from(data.timestamp)
    const blockTimestamp = now.mod(ethers.BigNumber.from(2).pow(32))
    const blockTimestampLast = ethers.BigNumber.from(data.blockTimestampLast)
    const blockTimestampLastPair = ethers.BigNumber.from(
      data.blockTimestampLastPair,
    )

    const susdReserve = ethers.BigNumber.from(data.susdReserve)
    const basedReserve = ethers.BigNumber.from(data.basedReserve)

    if (!blockTimestamp.eq(blockTimestampLastPair)) {
      const timeElapsed = blockTimestamp.sub(blockTimestampLastPair)
      price1Cumulative = price1Cumulative.add(
        susdReserve
          .mul(ethers.BigNumber.from(2).pow(112))
          .div(basedReserve)
          .mul(timeElapsed),
      )
    }
    const timeElapsed = blockTimestamp.sub(blockTimestampLast)
    const price1Average = price1Cumulative
      .sub(price1CumulativeLast)
      .div(timeElapsed)

    // get oracle price
    const targetRate = ethers.utils.parseEther('1')
    const exchangeRate = price1Average
      .mul(targetRate)
      .div(ethers.BigNumber.from(2).pow(112))
    console.log(
      'Oracle price',
      ethers.utils.formatEther(exchangeRate),
      `sUSD/$BASED`,
    )
```","",""
"362077377012170753","lewi.eth","21/10/2020 12:15 pm","> @ChrisD @lewi **Do not use the spot price on chain!!**. You will lose money!
@Micah yep! Thanks for the concern, I was just using this to show current price.","","üëç (1)"
"362077377012170753","lewi.eth","21/10/2020 1:54 pm","@thegostep this is super useful! The only value I can't seem to decipher is `blockTimestampLastPair` where do you get this from?","",""
"385978868131168259","thegostep","21/10/2020 1:59 pm","> @thegostep this is super useful! The only value I can't seem to decipher is `blockTimestampLastPair` where do you get this from?
@lewi https://github.com/Uniswap/uniswap-v2-periphery/blob/master/contracts/examples/ExampleOracleSimple.sol#L23","",""
"362077377012170753","lewi.eth","21/10/2020 2:32 pm","In that doc, there is no value that relates to `blockTimestampLastPair` ü§î","",""
"362077377012170753","lewi.eth","21/10/2020 2:33 pm","```javascript
  //Note: TIMESTAMPS pulled from _blockTimestampLast in getReserves()

  // Convert to BN from string
  const price0CumulativeLast = ethers.BigNumber.from(oldPriceCum0)
  let price0Cumulative = ethers.BigNumber.from(priceCum0)

  // Convert timestamps to BN
  const now = ethers.BigNumber.from(timestamp) // Read from current
  const blockTimestamp = now.mod(ethers.BigNumber.from(2).pow(32))
  const blockTimestampLast = ethers.BigNumber.from(oldTimestamp) // Saved from time interval

  // Sub the timestamps to get distance
  const timeElapsed = blockTimestamp.sub(blockTimestampLast)

  // If timestamps match, no new trades so use the Spot Price
  if (timeElapsed.toNumber() === 0) {
    return 0
  }

  // Do the TWAP calc
  const price0Average = price0CumulativeLast
    .sub(price0Cumulative)
    .div(timeElapsed)

  // ???? Not sure whats happening here but this is the number I need
  const targetRate = ethers.utils.parseEther('1000000000000')
  const exchangeRate0 = price0Average
    .mul(targetRate)
    .div(ethers.BigNumber.from(2).pow(112))

  // Get out the twap
  return parseFloat(ethers.utils.formatEther(exchangeRate0))
```","",""
"362077377012170753","lewi.eth","21/10/2020 2:33 pm","@thegostep here's my working code!","",""
"362077377012170753","lewi.eth","21/10/2020 2:33 pm","I'll make a gist so people can find this again","","ü¶æ (1)"
"385978868131168259","thegostep","21/10/2020 2:34 pm","nice !","",""
"385978868131168259","thegostep","21/10/2020 2:35 pm","btw, I think the ???? section is just shifting the base","",""
"362077377012170753","lewi.eth","21/10/2020 2:35 pm","Ah okay üòÇ","",""
"362077377012170753","lewi.eth","21/10/2020 3:22 pm","@thegostep Thanks so much for your help","",""
"362077377012170753","lewi.eth","21/10/2020 3:22 pm","https://gist.github.com/l3wi/0871d6f3b2f9a60845a5bcdaf179ba88","",""
"362077377012170753","lewi.eth","21/10/2020 3:23 pm","@Noah Zinsmeister this might be useful to add somewhere. I imagine as your oracles get more popular this question will be asked more and more.","",""
"385978868131168259","thegostep","21/10/2020 3:23 pm","@lewi maybe add it to https://github.com/thegostep/uniswap-v2-helper ?","",""
"730457678597586944","pricegenie","24/10/2020 6:26 am","Hello","",""
"730457678597586944","pricegenie","24/10/2020 6:26 am","https://github.com/Uniswap/uniswap-v2-periphery/blob/master/contracts/examples/ExampleOracleSimple.sol","",""
"730457678597586944","pricegenie","24/10/2020 6:26 am","In this example, don't you need to compensate for token decimals?","",""
"730457678597586944","pricegenie","24/10/2020 6:26 am","I'm seeing an issue where the computed average is incorrect because the two tokens have different decimal amounts","",""
"301186049323958275","sky.cactus","24/10/2020 8:11 am","@pricegenie the contracts don't care about the humanized version of the asset.","",""
"301186049323958275","sky.cactus","24/10/2020 8:11 am","They only care about raw numbers.","",""
"730457678597586944","pricegenie","24/10/2020 8:28 am","sounds good @Micah","",""
"730457678597586944","pricegenie","24/10/2020 8:29 am","i thought average is supposed to represent a ratio between the two tokens though?","",""
"730457678597586944","pricegenie","24/10/2020 8:30 am","makes sense to use raw values for accumulated values, but for computing average price, i would think you'd want to normalize, since one primary use case i'd imagine is to figure out how the ratio of tokens.. 1 ETH = how many WBTC for instance","",""
"730457678597586944","pricegenie","24/10/2020 8:30 am","specifically referring to the example oracle","",""
"730457678597586944","pricegenie","24/10/2020 8:31 am","i guess average price is just what it says.. average price","",""
"730457678597586944","pricegenie","24/10/2020 8:31 am","regardless of decimals","",""
"301186049323958275","sky.cactus","24/10/2020 8:33 am","Exactly.  Contract doesn't care what form humans read things in.","",""
"730457678597586944","pricegenie","24/10/2020 8:33 am","","https://cdn.discordapp.com/attachments/737351374760837130/769395699459948554/unknown.png",""
"730457678597586944","pricegenie","24/10/2020 8:33 am","`number that represents the price of one asset relative to the other`","",""
"730457678597586944","pricegenie","24/10/2020 8:34 am","i think i was thrown off by this part","",""
"730457678597586944","pricegenie","24/10/2020 8:34 am","it is relative, but, maybe not an exact ratio","",""
"301186049323958275","sky.cactus","24/10/2020 8:34 am","This is a true statement, it just doesn't use the units that you are used to seeing in a UI.","",""
"730457678597586944","pricegenie","24/10/2020 8:34 am","if decimals are equivalent, then yes","",""
"301186049323958275","sky.cactus","24/10/2020 8:34 am","1000mm per 1 meter is the same as 100cm per meter.","",""
"301186049323958275","sky.cactus","24/10/2020 8:35 am","(not a great example since I'm using length on both sides, but hopefully gets the point across)","",""
"730457678597586944","pricegenie","24/10/2020 8:35 am","to get the right data for WBTC/WETH i had to do  `token0PriceAverage / (10^12) / 10^(abs(token0Decimals - token1Decimals))`","",""
"301186049323958275","sky.cactus","24/10/2020 8:36 am","You shouldn't generally need humanized price data on chain.","",""
"301186049323958275","sky.cactus","24/10/2020 8:36 am","If you are, then I argue that you have another problem you should fix.  :)","",""
"730457678597586944","pricegenie","24/10/2020 8:37 am","","https://cdn.discordapp.com/attachments/737351374760837130/769396589772275712/unknown.png",""
"730457678597586944","pricegenie","24/10/2020 8:37 am","intention is to visualize deployed oracles","",""
"730457678597586944","pricegenie","24/10/2020 8:37 am","but, maybe this is useless as well tbh","",""
"730457678597586944","pricegenie","24/10/2020 8:38 am","intention of TWAP oracle in our use case is to be able to rely on oracles that are more resistant to flash loan attacks","",""
"730457678597586944","pricegenie","24/10/2020 8:38 am","https://feeds.chain.link/btc-usd","",""
"730457678597586944","pricegenie","24/10/2020 8:39 am","chainlink visualizes their oracles as well, fwiw","",""
"730457678597586944","pricegenie","24/10/2020 8:39 am","""humanize price data on chain""","",""
"730457678597586944","pricegenie","24/10/2020 8:39 am","makes sense!","",""
"730457678597586944","pricegenie","24/10/2020 8:40 am","thanks for clarifying this!","",""
"301186049323958275","sky.cactus","24/10/2020 8:40 am","For visualization you can do a one time conversion off-chain just prior to display.","",""
"301186049323958275","sky.cactus","24/10/2020 8:40 am","On-chain, you really should only be dealing with raw integers.","",""
"301186049323958275","sky.cactus","24/10/2020 8:41 am","You are correct, you'll need to account for the decimals of each token when you present the data for display (off chain, probably in your rendering layer).","",""
"770193143236657163","hopeless soul#7048","26/10/2020 1:37 pm","i tried to swap some nbt to eth but the transaction have some probems. ETH didnt get transferred to my wallet https://etherscan.io/tx/0xa634e186754c49e0eb61ef7456ebf693961fd757dad54cc1d0bb9df10d735816
Ethereum (ETH) Blockchain Explorer
Ethereum Transaction Hash (Txhash) Details | Etherscan
Ethereum (ETH) detailed transaction info for txhash 0xa634e186754c49e0eb61ef7456ebf693961fd757dad54cc1d0bb9df10d735816. The transaction status, block confirmation, gas fee, Ether (ETH), and token transfer are shown.

can anyone help me'?
i dont see my eth on metamask","",""
"334039231863324672","MM#0416","27/10/2020 1:04 am","Hi guys, I have technical question,

If I have too pools Mycoin/ETH and Mycoin/Dai... There was huge buy in one pool. will the price action be shown in the other pool?","",""
"334039231863324672","MM#0416","27/10/2020 1:04 am","will the oracle able to show the price change in other pool","",""
"349369252421042176","isaacthemexican","27/10/2020 1:20 am","@MM  a swap in one pool won't effect the other one at all, but arbitragers will usually be quick to fix the price","",""
"370515453237526530","doh#6127","28/10/2020 5:52 am","Hi! Trying to figure out an efficient strategy to build TWAP based price feed / oracle for a fees token that will be used in my dapp. My idea was to get an hourly TWAP by rewarding some amount of tokens to the first user that makes a call to a function that updates my oracle price from uniswap every hour. What are your thoughts ?","",""
"370515453237526530","doh#6127","28/10/2020 5:53 am","Could this be easily manipulated / exploited ?","",""
"370515453237526530","doh#6127","28/10/2020 5:56 am","Strategy number 2 would be to update the TWAP using uniswap whenever any other function of my dapp is called and 1 hour has passed since last update.","",""
"370515453237526530","doh#6127","28/10/2020 5:56 am","Thoughts ?","",""
"301186049323958275","sky.cactus","28/10/2020 8:36 am","@doh if oracle reads are infrequent (e.g., only on liquidations) then something like the Keydonix oracle can end up with lower gas costs than other solutions and it doesn't requiring solving for ""who pays for gas"" since it is baked into the solution.","",""
"370515453237526530","doh#6127","28/10/2020 8:55 am","> @doh if oracle reads are infrequent (e.g., only on liquidations) then something like the Keydonix oracle can end up with lower gas costs than other solutions and it doesn't requiring solving for ""who pays for gas"" since it is baked into the solution.
@Micah Thanks. What do you mean by infrequent ? The reads will be made per trade so it could be quite frequent.","",""
"370515453237526530","doh#6127","28/10/2020 8:56 am","need a twap I'd say at least once per hour","",""
"370515453237526530","doh#6127","28/10/2020 8:56 am","which can be stored","",""
"301186049323958275","sky.cactus","28/10/2020 8:58 am","It depends on your apps actual usage, which can be difficult to predict.","",""
"301186049323958275","sky.cactus","28/10/2020 8:59 am","If you get one user per day, those hourly TWAPs really add up and you need a mechanism for paying for gas every hour all day, just so you can do a single oracle read once a day.","",""
"301186049323958275","sky.cactus","28/10/2020 8:59 am","If you have 100 transactions per hour, then you can amortize the updates over your users and it becomes somewhat insignificant, plus you can embed them into the contract.","",""
"370515453237526530","doh#6127","28/10/2020 8:59 am","keydonix has a 600k gas cost right ?","","üëç (1)"
"301186049323958275","sky.cactus","28/10/2020 9:00 am","The nice thing about the Keydonix mechanism is that it doesn't need any maintenance and doesn't require a certain level of activity to function.  This makes it resilient to the equivalent of bit rot.","",""
"370515453237526530","doh#6127","28/10/2020 9:01 am","yeah but then someone has to pay for the 600k per call","",""
"301186049323958275","sky.cactus","28/10/2020 9:01 am","There was a project in the early days of Ethereum for swapping ETH and BTC trustlessly.  Ultimately it failed because it was too early for its time and it needed constant touches to function.  Without a large number of users this didn't happen and the project died.","",""
"301186049323958275","sky.cactus","28/10/2020 9:01 am","Yeah, the disadvantage of the Keydonix oracle is the gas cost per oracle read.","",""
"301186049323958275","sky.cactus","28/10/2020 9:02 am","You could add a caching layer, but still *someone* has to pay that amount periodically.","",""
"370515453237526530","doh#6127","28/10/2020 9:02 am","I dont understand why twap or any other moving average is not built into uniswap actually","",""
"370515453237526530","doh#6127","28/10/2020 9:03 am","something that we could reliably just read from a pair ...","",""
"370515453237526530","doh#6127","28/10/2020 9:03 am","and gets updated on each swap","",""
"301186049323958275","sky.cactus","28/10/2020 9:08 am","I argued that it should be, but they argued that deciding on a time window was hard and this way each project could decide for itself.","",""
"370515453237526530","doh#6127","28/10/2020 9:09 am","makes sense","",""
"301186049323958275","sky.cactus","28/10/2020 9:09 am","Also, for low volume pairs it would become out of date and thus unreliable/inaccurate IIRC if you use the naive/cheap mechanism.","",""
"370515453237526530","doh#6127","28/10/2020 9:12 am","Thanks for your help Micah ... maybe I'll end up implementing some kind of hybrid between keydonix and a reward system for the caller that ends up shoving the bill of the call üôÇ","",""
"301186049323958275","sky.cactus","28/10/2020 9:15 am","While more complicated, that is certainly a reasonable solution.  You can do updates inline with trades  up to 1 hour, then if there is a gap of more than an hour the next transaction will need to do a Keydonix style update at increased gas cost.","",""
"301186049323958275","sky.cactus","28/10/2020 9:15 am","This makes the system resilient to variable usage and blockchain decay, while also making it cheap when used regularly.","",""
"370515453237526530","doh#6127","28/10/2020 11:01 pm","Question : would there be a reliable way to use the graph as an oracle source ?","",""
"301186049323958275","sky.cactus","28/10/2020 11:18 pm","@doh Oracle's in this context refer to on-chain Oracle's.  For offmchain price feeds, you can use The Graph I think.","",""
"607999418398015747","kaibakker#3613","01/11/2020 8:57 pm","Is there someone working on an impermanent loss insurance? Imagine being able to buy insurance for impermanent loss between 1 eth and 300 usd executed at time x. The underwriting can sell this insurance at any price they feel comfortable with. Oracles could make it secure‚õ±","",""
"607999418398015747","kaibakker#3613","01/11/2020 8:59 pm","There should be a market for it, with $ 3 000 000 000 risking impermanent loss.","",""
"319286295153082369","sabotagebeats","02/11/2020 3:39 am","Anyone have any ideas why update() from example oracle succeeds fine but require(this.update()); reverts?","",""
"301186049323958275","sky.cactus","02/11/2020 5:43 am","@sabotagebeats does the function return something?","",""
"319286295153082369","sabotagebeats","02/11/2020 10:34 am","> @sabotagebeats does the function return something?
@Micah thanks that was it!","","üéâ (1)"
"319286295153082369","sabotagebeats","02/11/2020 10:35 am","Didn't return anything","",""
"319286295153082369","sabotagebeats","02/11/2020 10:36 am","I will set to return as true and then it will work :)","",""
"761219800209817600","GregJensen#2420","05/11/2020 6:41 am","makes sense","",""
"762668904387706920","mw#2715","05/11/2020 5:21 pm","Hello, I was wondering if there's a good way to get the TWAP of a pair like WBTC/USDC? The issue is there isn't much liquidity on this pair compared to WBTC/ETH and USDC/ETH. But just taking the ratio of TWAP(WBTC/ETH) / TWAP(USDC/ETH) wouldn't be accurate","",""
"301186049323958275","sky.cactus","05/11/2020 6:43 pm","@mw If there is enough liquidity for arbitrageurs to profit off price discrepancies then WBTC:USDC should be accurate enough for most needs.","",""
"301186049323958275","sky.cactus","05/11/2020 6:43 pm","You do need to consider the overhead costs of arbitrage though.","",""
"762668904387706920","mw#2715","05/11/2020 7:36 pm","that makes sense","",""
"762668904387706920","mw#2715","05/11/2020 7:36 pm","thanks!","",""
"546806870933897217","lep.irish","11/11/2020 9:11 pm","Where can I find a developer that can set up a Oracle for me?","",""
"769128958780112918","PLUTO TOKEN PLT#3290","12/11/2020 4:23 pm","@Micah dm please","",""
"772166755082436688","daynabob#0436","15/11/2020 11:32 pm","any good guide to setup a price oracle?","",""
"772166755082436688","daynabob#0436","16/11/2020 2:55 am","any help here?","",""
"737980046123204648","erxiangb","17/11/2020 12:07 am",":Vitalik:","","ü•∏ (1)"
"375776890876592128","jokerthebond","20/11/2020 3:59 pm","What would you guys think about having some sort of ""official"" uniswap oracle based on TWAPs? 
We could create a very simple oracle that update the price every time that it is consulted, and that always return the average price between one cunsultation and the previous. We could also set a minimum interval to make sure that the price is always strong enough and hard to manipulate.
The rationale behind having an official uniswap oracle is given by the implication that this kind of design would work really well when the price oracle is used a lot, that is when the price is consulted many times in a day. So why is it that every DeFi project that wanna use Uniswap's TWAP should design it's own version of an oracle? It would be much easier if all DeFi projects would converge and use the same oracle. This would benefit everyone, especially small DeFi project that cannot afford to pay the gas cost for keeping the price oracle manually updated.","",""
"375776890876592128","jokerthebond","20/11/2020 4:05 pm","I personally think that making available to everyone this kind of oracle would be a huge step forward into having a fully decentralized financial system.
The implementation of the oracle could also be governed by the UNI token. This would allow the oracle to be future proof in case a UniswapV3 was to come out.","",""
"759605824825458738","michaelstone#5047","21/11/2020 2:45 am","@JokerTheBond yes agree this would be super useful. One direct application would be derivative like call option settlement based on this TWAP price","",""
"375776890876592128","jokerthebond","21/11/2020 5:07 am","A ton of applications based on Uniswap could be created , but most of them would require some sort of Uniswap price oracle","",""
"274208745699934220","callil_","21/11/2020 5:09 am","you might like to check this out: https://twitter.com/AndreCronjeTech/status/1328694201186471937","",""
"212766113941946370","0x5f3759df_","22/11/2020 1:01 am","does uniswap have a price oracle","",""
"212766113941946370","0x5f3759df_","22/11/2020 1:01 am","or other sites use them","",""
"375776890876592128","jokerthebond","22/11/2020 5:48 am","Thank you @callil [UX & Design] ü¶Ñ- No DMs , I didn't know that project. That's for sure an interesting way to build a price oracle around uniswap with the right incentives, however I think it has a few drawbacks.... if the incentives were to be not high enough in future then it wouldn't be updated anymore. Also the cost of keeping it updated will be pretty high, so this will limit a lot the number of pairs that can be added to it. And it require an active governance.
One thing that I like about UniswapV2 is its semplicity and ability to be fully operational without the need of an active governance or additional incentives. I think that an ""official uniswap oracle"" should be built with that same philosophy in mind.","",""
"301186049323958275","sky.cactus","22/11/2020 6:17 am","I don't recommend trusting anything built by Andre... worth glancing at the source code for ideas, but don't assume it is of sufficient quality to use in a production environment.","",""
"425807764242169877","jetjadeja","22/11/2020 7:31 am","> I don't recommend trusting anything built by Andre
@Micah  May I ask why? Not defending him or anything, just curious!","",""
"301186049323958275","sky.cactus","22/11/2020 7:38 am","They are notorious for basically just writing code and releasing it without caring much about the people who throw money at the code they write.","",""
"301186049323958275","sky.cactus","22/11/2020 7:39 am","In particular, they expressly don't do rigorous testing, auditing, etc.","","üëç (2)"
"97534912302698496","Sakyo#7634","23/11/2020 11:14 am","Are the pair token prices from the uniswap subgraph coming from the uniswap oracle?","",""
"759605824825458738","michaelstone#5047","24/11/2020 2:14 am","@Sakyo subgraph is generated by monitoring events emit by the uniswap contract. The code generated subgraph is off chain so wouldn't say it's coming from uniswap oracle","",""
"375776890876592128","jokerthebond","25/11/2020 7:34 pm","About this, I published two articles to better elaborate the idea. I've also deployed an example on Ropsten and created a web3 demo
First article: https://simonerigolon.medium.com/heres-how-uniswap-could-be-the-decentralized-price-oracle-for-defi-e2b61f3ba91c
Second article: https://simonerigolon.medium.com/a-simple-and-fully-decentralized-price-oracle-based-on-uniswap-for-defi-cc70807240f2
Github repository: https://github.com/Impermax-Finance/simple-uniswap-oracle
Web3 demo: https://oracledemo.impermax.finance/","",""
"607999418398015747","kaibakker#3613","26/11/2020 3:13 am","I never understood why there didn‚Äôt exist a solution like this! This could be a great step for uniswap.","",""
"607999418398015747","kaibakker#3613","26/11/2020 3:14 am","Which defi projects could be potential users of a service like this? I am thinking Compound, lending, options","",""
"607999418398015747","kaibakker#3613","26/11/2020 3:16 am","Do you think you need an incentive to make sure certain pairs are updated more regularly?","",""
"607999418398015747","kaibakker#3613","26/11/2020 3:24 am","can anyone manipulate the oracle price by 10% by moving the uniswap price by 10% at 2 distinct intervals? Seems pretty doable if there is some money to be made.","",""
"151928634200948737","ani9040","26/11/2020 7:24 am","to manipulate the twap by 10% you have to increase the price by 10% for the entire interval","","‚òùÔ∏è (2)"
"151928634200948737","ani9040","26/11/2020 7:24 am","not just at two points","",""
"375776890876592128","jokerthebond","26/11/2020 2:54 pm","Exactly, manipulating the price is quite hard for pairs with a lot of liquidity. We just need to understand what could be a good value for MIN_T, which is the minimum length of the interval used to calculate the average price. If MIN_T was too low, a big whale could be able to manipulate the price for the entirety of that interval. 10 minutes seems a reasonable value to me, because arbitragers have all the time to arrive and bring the price back to the fair market price. But I'd like to hear also other opinions.","",""
"375776890876592128","jokerthebond","26/11/2020 2:57 pm","About incentives... the beauty of this design is that it is a low level solution, so people can build what they want on top of it, even an incentives mechanism to keep the prices updated. If big DeFi projects like Compound were to use this kind of solution they probably wouldn't even need an incentives mechanism because their user activity is so high that the price would remain always updated.","",""
"301186049323958275","sky.cactus","26/11/2020 5:21 pm","I prefer about an hour personally.  Keep in mind that arbitrage with centralized providers can sometimes take hours due to withdraw times, and thus a big trade can swing the price and take time to arbitrage back depending on available capital of arbitrageurs.","",""
"375776890876592128","jokerthebond","26/11/2020 5:28 pm","@Micah Interesting point of view, actually 10 minutes may not be enough. I may open a poll to better discuss about this topic... maybe on the Uniswap governance forum, or is there a better place?","",""
"375776890876592128","jokerthebond","26/11/2020 7:01 pm","It seems that this morning a lot of people borrowing DAI on Compound were liquidated because DAI price was manipulated on Coinbase. I think we seriously need a decentralized oracle for DeFi...","","üëç (1)"
"607999418398015747","kaibakker#3613","27/11/2020 1:39 am","Yeah i just came back reading the compound news.","",""
"759605824825458738","michaelstone#5047","27/11/2020 1:48 am","@JokerTheBond How do we know it's manipulation? Is it possible someone were panic buying dai to repay loan possible due to the large drop of eth price today?","",""
"375776890876592128","jokerthebond","27/11/2020 1:51 am","@michaelstone It's not really important wether the price was manipulated or not. The important thing is the result. The point is that having a centralized source as an oracle is not reliable.","",""
"375776890876592128","jokerthebond","27/11/2020 1:53 am","Actually if the price was not manipulated the situation would be even worse because it means that the oracle is so weak that it breaks itself without anyone attacking it","",""
"759605824825458738","michaelstone#5047","27/11/2020 2:32 am","@JokerTheBond I agree we definitely should have decentralized oracle to remove the need of trust on single entity. But Dai price jump to 1.3 should not be an justification for such oracle. Actually I would argue if trades are printed in uniswap with dai worth 1.3, then the oracle should print 1.3 as well.","",""
"759605824825458738","michaelstone#5047","27/11/2020 2:33 am","USDC per Dai trades on Uniswap","https://cdn.discordapp.com/attachments/737351374760837130/781626104758796318/unknown.png",""
"759605824825458738","michaelstone#5047","27/11/2020 2:33 am","Above you can see dai jumped to 1.3 on uniswap as well, assuming USDC is still pegged around 1.0.","",""
"759605824825458738","michaelstone#5047","27/11/2020 2:38 am","Regarding earlier discussion on the choice of MIN_T, I think no matter what choice is set it will be subject to manipulation. Just a matter of how much does it cost to manipulate. Probably a good idea to design the oracle with various choices of MIN_T so users can choose what to use. Larger MIN_T means costs more to manipulate or the oracle price is safer but on the other hand the price is less up to date. Smaller MIN_T is exact the opposite","",""
"375776890876592128","jokerthebond","27/11/2020 2:56 am","@michaelstone Are you 100% sure that graph is legit? DAI price didn't jump to 1.3 on any other exchange, so it seems strange to me","",""
"375776890876592128","jokerthebond","27/11/2020 2:57 am","About having multiple MIN_T, that's an idea, and it was also my idea at first","",""
"375776890876592128","jokerthebond","27/11/2020 2:59 am","The only problem is that gas price would basically increase linearly with the number of MIN_T. So with 5 choice the gas price would be 5x. So there's a decision to be made in this case, but it's still a possibility.","",""
"375776890876592128","jokerthebond","27/11/2020 3:04 am","So in my head the reason for going with a single MIN_T is this: we can't guarantee that the price is up to date, because there is no MAX_T in the protocol, so even if a user use a small MIN_T the price could be returned with a huge T. So we might just go with a single MIN_T that is high enough to avoid manipulation.","",""
"375776890876592128","jokerthebond","27/11/2020 3:05 am","And as you say the price can always be manipulated, but realistically speaking if we choose a MIN_T = 1 hour it will cost a lot to manipulate the price for a full hour...","",""
"607999418398015747","kaibakker#3613","27/11/2020 3:53 am","I think you are right on single MIN_T. 1 hour is safe for most usecases.","",""
"759605824825458738","michaelstone#5047","27/11/2020 4:22 am","@JokerTheBond yeah agree gas price is a concern right now but hopefully as we migrate to  eth 2 the gas cost will go down significantly. 
Regarding the graph yes it's 100% legit, it's based on actual trade on usdc/dai pair on uniswap:  run below query on uniswap subgraph you can see people are buying dai at $1.23 and possibly sell on coinbase at $1.3 to complete the arbitrage.

{
  swaps
  (where: 
    {
      timestamp:1606382035
      id:""0x8e83e49ee7c503baf5f179b5b6c13dc38ab0d522ba86a6487adbbc0bed4cde94-1""
    }
  )
  {
    pair
    {
      token0
      {
        symbol
      }
      token1
      {
        symbol
      }
    }
    amount1In
    amount0Out
  }
}","",""
"375776890876592128","jokerthebond","27/11/2020 4:33 am","I don't like the idea of hoping that gas prices will eventually go down, they may also go up if demand grows","",""
"375776890876592128","jokerthebond","27/11/2020 4:35 am","But maybe there is a way to have multiple MIN_T at equal distance from one another without increasing too much gas fees. So for instance MIN_T[] = [15m, 30m, 45m, 1h]","",""
"759605824825458738","michaelstone#5047","27/11/2020 4:38 am","yes very good idea to make it equal distance. This can  potentially save gas also very intuition for people to use.","",""
"759605824825458738","michaelstone#5047","27/11/2020 4:40 am","One other thing could be useful to add is realized variance or volatility. This could be useful for derivative and also for people to assess risk of each pair.","",""
"375776890876592128","jokerthebond","27/11/2020 4:43 am","I'm not sure if those can be calculated without having regular updates","",""
"375776890876592128","jokerthebond","27/11/2020 4:43 am","The problem is that a pair may not be updated even for several days","",""
"375776890876592128","jokerthebond","30/11/2020 2:34 am","After thinking about it for a bit I agree that MIN_T = 1 hour would be a good value as @Micah suggested.
@michaelstone I also implemented the second version that we were discussing.
The second accept MIN_T as input. However there is a new constant, MIN_T_JUMP. The MIN_T passed as input must be less or equal that 4 * MIN_T_JUMP. Also, the price can be updated after at least MIN_T_JUMP from the previous update. 
For instance, if MIN_T_JUMP = 15 minutes than MIN_T could be anything less or equal than 1 hour.
Another advantage is that in the first version the price is updated at most every hour, instead in the second version at most every 15 minutes. This mean that the price will generally be fresher if a pair receives a lot of interaction.
The only disadvantage is that the second version costs more. An update on V1 costs 19677 and on V2 costs 32341.
13k gas is not a lot in absolute terms but that's still a 64% increase, so I don't know if it's really worth it....
The second version add more flexibility, but it doesn't guarantee that the price returned will be fresh.","",""
"591665822578114570","aer0xander","05/12/2020 9:43 am","Is this a good open-source price oracle? https://github.com/Keydonix/uniswap-oracle","",""
"591665822578114570","aer0xander","05/12/2020 9:43 am","just looking for a simple and cheap one, my token will have enough liquidity","",""
"301186049323958275","sky.cactus","05/12/2020 10:08 am","@aeroxander it makes certain tradeoffs.  Gas costs for it are around 600,000 gas, but it doesn't require ongoing maintenance.  If you need infrequent/irregular updates, this is a good trade off.","","üëç (1)"
"375776890876592128","jokerthebond","05/12/2020 6:53 pm","@aeroxander The oracle that I posted a few messages above may be what you're looking for. It's not audited yet, it will probably take a couple of months to audit it because most auditors are completely booked","",""
"591665822578114570","aer0xander","05/12/2020 10:56 pm","Ah ok thanks ill try it out! Didnt knew auditors were hard to find nowadays","",""
"591665822578114570","aer0xander","05/12/2020 10:58 pm","@JokerTheBond what are the gas costs to deploy it?","",""
"591665822578114570","aer0xander","05/12/2020 11:02 pm","I see *The gas costs for the execution of¬†getResult()¬†are quite low: around 20000 gas if the price was updated during the read and 10000 gas otherwise.* great!","",""
"375776890876592128","jokerthebond","05/12/2020 11:12 pm","@aeroxander Yes, that's pretty how much as low as you can get. I deployed it on Ropsten and the cost was 719,263 gas
The nice thing is that it is a singleton, it needs to be deployed only once. When someone deploys it on mainnet everyone else can use it","",""
"375776890876592128","jokerthebond","05/12/2020 11:13 pm","But if you want to use it make sure to understand how it works and the implications","","üëç (2)"
"684082939503706152","priest689#2816","11/12/2020 8:07 am","hello, which exchange using Uniswap V2 as the oracle price as the market price?","",""
"456226577798135808","Deleted User","15/12/2020 6:09 pm","Why doesn't UNI-ETH farming start?ü§î","",""
"554025606107496469","thechitowncubs","16/12/2020 11:10 pm","@Deleted User please stop spamming, people are working here.","",""
"554025606107496469","thechitowncubs","16/12/2020 11:11 pm","@Deleted User you can stake UNI to farm UNI/ETH ?","",""
"723233722870136903","xenaida","18/12/2020 3:47 am","is it possible to put other speculative fashion items on uniswap?","",""
"554025606107496469","thechitowncubs","18/12/2020 4:39 am","Like Non Fungible tokens?","",""
"554025606107496469","thechitowncubs","18/12/2020 4:39 am","@Xenaüî•","",""
"554025606107496469","thechitowncubs","18/12/2020 4:39 am","What do you mean","",""
"789376783521939466","arnold#4214","18/12/2020 12:02 pm","I am a new developer in defi. I have a question I have read the uniswap v2 oracle document. The uniswap v2 oracle document is for uniswap or other defi project?","",""
"301186049323958275","sky.cactus","18/12/2020 3:02 pm","For other projects who want to use Uniswap as a price oracle.","",""
"723233722870136903","xenaida","19/12/2020 7:26 am","the unisocks are a speculative fashion item, i'me wondering if we can have other items being sold through uniswap","",""
"554025606107496469","thechitowncubs","19/12/2020 9:22 am","@Xenaüî• perhaps","",""
"554025606107496469","thechitowncubs","19/12/2020 9:23 am","Perhaps that would be better than the dark web","",""
"554025606107496469","thechitowncubs","19/12/2020 9:24 am","Yep","",""
"404113026598567956","TheQuantumBorn#2182","21/12/2020 7:44 am","Good to see the OG of Augur here talking about oracle","","bowtie (2)"
"791278784057180210","Cyrus#9676","23/12/2020 5:58 pm","Hello Everybody, can anyone tell me if it's possible to get price of a token from uniswap v2?","",""
"301186049323958275","sky.cactus","23/12/2020 7:45 pm","Yes.","",""
"249446356836417536","reverse.engineer","27/12/2020 4:40 pm","Is it possible to use Uniswap V1 as an oracle?","",""
"301186049323958275","sky.cactus","29/12/2020 9:44 am","Not on-chain.","",""
"648070011382005761","hashFabric#2185","29/12/2020 10:32 pm","@Micah I know its not your code, but do you know how much gas does it cost to use this oracle? 
Not sure if it will be cheaper than keydonix
https://github.com/Uniswap/uniswap-v2-periphery/blob/master/contracts/examples/ExampleSlidingWindowOracle.sol","",""
"301186049323958275","sky.cactus","29/12/2020 11:15 pm","Pretty much every Oracle will be cheaper than Keydonix oracle.  üôÇ","",""
"301186049323958275","sky.cactus","29/12/2020 11:15 pm","Keydonix oracle makes a very specific trade off that not everyone agrees with.","",""
"306636343864328193","guihue","01/01/2021 6:22 am","Top 10 Volumes never changes","",""
"306636343864328193","guihue","01/01/2021 6:22 am","It's wrong, should update!!!","",""
"726055386142212216","xoheb","02/01/2021 3:06 pm","I figured out a way to compute the AmountOutMin before executing a swap between two tokens on-chain using the reserve0 and reserve1  from the Pair Contract...
Any idea how to handle swaps between tokens that have a custom route and aren't part of a pair","",""
"375776890876592128","jokerthebond","04/01/2021 9:03 pm","@Xoheb‚ö° You should see how the Uniswap Router handles it (an array of swaps)
https://github.com/Uniswap/uniswap-v2-periphery/blob/master/contracts/UniswapV2Router02.sol","",""
"375776890876592128","jokerthebond","04/01/2021 9:05 pm","We've sent this oracle for the audit. Once it's finished we will publish it on mainnet and everyone will be able to use it.","",""
"720520455030571088","zotish123","06/01/2021 12:50 am","hello i am seeing an bug problem both on uniswap v2 and v1","",""
"720520455030571088","zotish123","06/01/2021 1:07 am","hello sir what is the uniswap v1 spender address ?","",""
"236303107452174337","cliftonk","06/01/2021 11:20 am","is there a way to bootstrap uniswap and some pairs with a bit of price history to develop against? or is it generally advised to fork mainnet","",""
"236303107452174337","cliftonk","06/01/2021 11:21 am","im using the typical solidity/hardhat/typescript stack","",""
"772126412303368212","Vitaliy#6161","06/01/2021 5:54 pm","hi I have problem. i bought a token on uniswap (tosdis 0x7349de5754b5bed91bce2dee03a4032c1dba760e) why can't i sell it","",""
"730463593711140956","bor444","06/01/2021 5:57 pm","might be scam token","",""
"730463593711140956","bor444","06/01/2021 5:57 pm","join #‚ùì‚îÇtroubleshooting @Vitaliy","",""
"589328253337206784","nocandyonlywifi","08/01/2021 8:17 pm","where are you guys sending the codes for auditing purposes? openzeppelin?","",""
"375776890876592128","jokerthebond","09/01/2021 3:54 pm","No, https://cyberunit.tech/","",""
"236303107452174337","cliftonk","10/01/2021 11:24 am","are any services (incl uniswap) running oracles on a reliable basis for major pairs? (eg the cross from eth to the top 20 most liquid tokens)","",""
"247926505638723586","jumpiestweb","12/01/2021 4:32 am","https://feeds.chain.link/","",""
"247926505638723586","jumpiestweb","12/01/2021 4:32 am","@ck","",""
"247926505638723586","jumpiestweb","12/01/2021 4:32 am","these are officially supported ones","",""
"247926505638723586","jumpiestweb","12/01/2021 4:32 am","for others you can go to https://market.link to find some","",""
"236303107452174337","cliftonk","12/01/2021 5:07 am","Thank you! Have also been looking at the stateless one that requires some client calculation. But of course if there‚Äôs a secure source that‚Äôs just a data feed that‚Äôs optimal","",""
"247926505638723586","jumpiestweb","12/01/2021 5:14 am","yeah ideally you'd have multiple oracles with different data sources for redundancy/security/decentralization","",""
"247926505638723586","jumpiestweb","12/01/2021 5:14 am","but if you're just playing around then one of those above would work","",""
"247926505638723586","jumpiestweb","12/01/2021 5:14 am","lmk if you have any questions, spent the last like two weeks studying how all of this works","",""
"236303107452174337","cliftonk","12/01/2021 5:20 am","Yeah makes sense. I‚Äôd think a sufficiently long TWAP on liquid uniswap pairs would be appropriately secure, though for spot prices an oracle from one of the feeds you provided is almost certainly better","",""
"247926505638723586","jumpiestweb","12/01/2021 5:30 am","or you could average them both together üòÑ","",""
"247926505638723586","jumpiestweb","12/01/2021 5:30 am","do you have a uni oracle set up?","",""
"236303107452174337","cliftonk","12/01/2021 6:32 am","https://github.com/Keydonix/uniswap-oracle","",""
"236303107452174337","cliftonk","12/01/2021 6:32 am","i do not","",""
"236303107452174337","cliftonk","12/01/2021 6:32 am","im building out a project on forked mainnet locally","",""
"236303107452174337","cliftonk","12/01/2021 6:33 am","i was using the very simple makerdao oracles but was wondering what i was going to do for unsupported tokens","",""
"236303107452174337","cliftonk","12/01/2021 6:34 am","for the UI i can use data the graphql data from thegraph -- but one part of the project is trying to accurately and securely calculate net asset value of a contract account as part of a reward calculation","",""
"236303107452174337","cliftonk","12/01/2021 6:39 am","which right now would simply be the sum of (quantity of token * price of token) converted to usd","",""
"236303107452174337","cliftonk","12/01/2021 8:36 am","@Micah -- was looking at your implementation of the oracle (which is awesome work btw). was wondering if you had a view on a good way to calc NAV of a contract account with a variety of assets on-chain","",""
"301186049323958275","sky.cactus","12/01/2021 8:37 am","What is NAV?","",""
"236303107452174337","cliftonk","12/01/2021 8:37 am","if its done via TWAP the prices across all assets need to be calculated with the same starting and ending block","",""
"236303107452174337","cliftonk","12/01/2021 8:37 am","net asset value","",""
"236303107452174337","cliftonk","12/01/2021 8:38 am","sorry finance terms","",""
"301186049323958275","sky.cactus","12/01/2021 8:38 am","Not with an unbounded number of assets (I think that is impossible).","",""
"236303107452174337","cliftonk","12/01/2021 8:38 am","lets assume its bounded","",""
"236303107452174337","cliftonk","12/01/2021 8:38 am","like top 50 tokens by liquidity or something","",""
"301186049323958275","sky.cactus","12/01/2021 8:39 am","You can use the same technique, but it'll be expensive (a bit less than 600k gas per asset).","",""
"301186049323958275","sky.cactus","12/01/2021 8:39 am","50 is way too many to do at once.","",""
"236303107452174337","cliftonk","12/01/2021 8:39 am","k gotcha","",""
"236303107452174337","cliftonk","12/01/2021 8:40 am","so perhaps it should be <20 or <10 even","",""
"236303107452174337","cliftonk","12/01/2021 8:40 am","and beyond that may need to wait for L2","",""
"217291717437554688","p68","12/01/2021 8:57 pm","why did u send ur wallet","",""
"236303107452174337","cliftonk","12/01/2021 11:48 pm","theproking kindly asks you send it money","",""
"217291717437554688","p68","13/01/2021 3:55 am","well now he gone","",""
"648070011382005761","hashFabric#2185","14/01/2021 11:04 pm","`// if time has elapsed since the last update on the pair, mock the accumulated price values`
https://github.com/Uniswap/uniswap-v2-periphery/blob/master/contracts/libraries/UniswapV2OracleLibrary.sol#L23

Why would we need that, if every reserve change automatically means updating cumulative prices?","",""
"648070011382005761","hashFabric#2185","14/01/2021 11:04 pm","@Noah Zinsmeister","",""
"380727319087546369","fractal0004","18/01/2021 5:43 pm","@hashFabric - I think it's because some time may have passed since the last reserve change. Since every second that passes at the current price impacts the accumulators, that function figures out what their values would be if the pair were updated right now. As the comment explains, you may not want to actually do the update because writing the new values to storage costs gas, and also because that function is a view so it couldn't in any case.","",""
"648070011382005761","hashFabric#2185","26/01/2021 3:55 am","Please share some feedback on my code. It uses cumulative prices, update() called by external contract every 24 hours
https://dpaste.org/JDYs","",""
"799739929814630422","FaridaM#7596","31/01/2021 1:51 am","importanttt question","",""
"799739929814630422","FaridaM#7596","31/01/2021 1:52 am","oh not here lol","",""
"799739929814630422","FaridaM#7596","31/01/2021 1:52 am","nvm","",""
"782729216461897798","vintro1873","02/02/2021 2:47 am","i'm trying to deploy the example sliding window oracle found in the v2-periphery repo, but i'm running into import errors in the solidity contracts: i see the following `import '@uniswap/v2-core/contracts/interfaces/IUniswapV2Factory.sol';`
but i'm unsure how to handle that ""@"" 
i tried to remap my paths in the config file i'm using (for brownie) but it's not working. Is there something global to install? Anybody know how to handle this?","",""
"782729216461897798","vintro1873","02/02/2021 2:57 am","^ had to add the dependencies using `npm i --save <@uniswap/whatever>`. figured it out","",""
"371692900142022668","m00nracer","07/02/2021 1:51 am","hi, does uniswap have its own oracle or is it using another like chainlink? sorry that might be a stupid question.. i dont know this protocol well","",""
"301186049323958275","sky.cactus","07/02/2021 1:22 pm","Use #‚ö†‚îÇreport-scams or you risk getting banned for linking to scams in chat.","",""
"301186049323958275","sky.cactus","07/02/2021 1:23 pm","Uniswap can be used as a price oracle data source, though you have to do a bit of work to utilize it.","",""
"667593875019530260","shakeib98","16/02/2021 4:24 pm","I am developing oracle using uniswap pair contract commulative variable. I need a little bit of help.","",""
"667593875019530260","shakeib98","16/02/2021 4:34 pm","How to use price commulative variables to fetch the price of from let's say LINK to BAL?","",""
"667593875019530260","shakeib98","16/02/2021 4:34 pm","What would be the calculations for it?","",""
"812080289102823454","spence27","19/02/2021 5:10 am","Hi I recently transferred Ethereum Classic (ETC) from my exodus wallet to my formative wallet. The etc never arrived. Please help. I do not know how to access this chain.","",""
"425452385285177347","cryptochris.","23/02/2021 7:27 pm","I am wondering if the math formula is available for the calculation of Price Impact?  I dont see it in the UniSwap V2 whitepaper and I am wondering how it works.  some logarithmic function of liquidity pool size and current price.  But I just can't seem to find it","",""
"274208745699934220","callil_","23/02/2021 10:27 pm","https://discord.com/channels/597638925346930701/607978109089611786/772965417085960224","",""
"730463593711140956","bor444","02/03/2021 2:52 am","@noobie calling get reserves on a pool contract?","",""
"730463593711140956","bor444","02/03/2021 2:52 am","that should give real time data while subgraph has delay for sure","",""
"381442236761636866","_____j","03/03/2021 9:04 pm","fn","",""
"612437620454195217","katias2020","03/03/2021 10:12 pm","i have a question i have a pending in uniswap... how do i cancel it? i already added liquidity ... and i think since i have to speed up in metamask i think i click twice and created a doble transaction... one went through and the other which is worthless still pending... what do i do?","",""
"266267111150714884","evert0x","05/03/2021 8:45 pm","Is there an overview of mainnet oracles using twaps?","",""
"759878682155417650","ben27#6885","18/03/2021 5:18 am","Vechain","",""
"824041132207898685","fortytwo1003","01/04/2021 8:17 pm","i'm interested  in building a ""climate change"" swap where a portion of the interest is sent to carbon recapture initiatives. has anyone built a uniswap smart contract like this?","",""
"759605824825458738","michaelstone#5047","02/04/2021 12:30 am","yes it gives you latest assuming you are quering latest block. Uniswap subgraph has lags sometime a lot.","","üëç (1)"
"820181733277171773","dannydoritoeth_optix","04/04/2021 4:08 am","Are there any well known protocols that are using v2 uni oracles","",""
"820181733277171773","dannydoritoeth_optix","04/04/2021 6:48 am","I‚Äôm keen to use it but I was hoping to leverage some sample code. Surprisingly it‚Äôs hard to find some simple guides for how to use it","",""
"820181733277171773","dannydoritoeth_optix","05/04/2021 12:56 am","got what I need, thx
https://github.com/Uniswap/uniswap-v2-periphery/blob/master/contracts/examples/ExampleOracleSimple.sol","",""
"183309006767521792","jorropo","05/04/2021 1:16 am","You will not need this soon, V3 will include this defaultly üôÇ","",""
"183309006767521792","jorropo","05/04/2021 1:16 am","I mean really soon","",""
"820181733277171773","dannydoritoeth_optix","05/04/2021 1:16 am","yep, just catchup up now with where we at.","",""
"820181733277171773","dannydoritoeth_optix","05/04/2021 1:17 am","v3 oracles looks good","",""
"183309006767521792","jorropo","05/04/2021 1:18 am","~~I mean really really soon, debut of april is what they advertised ealier~~
Was wrong, next month","",""
"820181733277171773","dannydoritoeth_optix","05/04/2021 1:27 am","its probably still pretty early but a sample app similar to the above for a simple interface to interact with the v3 oracle would be useful if anyone is aware of one","",""
"808440358845284422","david_23s5","06/04/2021 7:49 pm","@DannyDoritoEth | Optix  I am looking for protocols that are using v2 uni oracles as well!","",""
"808440358845284422","david_23s5","07/04/2021 2:12 am","It seems that v2 we need an external updater if we wanna do a sliding window oracle. Relying on a external updater seems not optimal. (yea v3 has solved this problem)","",""
"638493028952178738","uh2064","09/04/2021 1:27 pm","hi, we are building a decentralised perpetual trading platform and will utilise uni's TWAP for most of our pairs. Can we apply for a grant?","",""
"730463593711140956","bor444","09/04/2021 8:25 pm","@uh nothing stops you from applying. Worst case scenario you will get some constructive feedback from some very smart people.","",""
"638493028952178738","uh2064","09/04/2021 8:28 pm","how/where to apply?","",""
"638493028952178738","uh2064","09/04/2021 8:28 pm","#üîã‚îÇuni-grants  ?","",""
"730463593711140956","bor444","09/04/2021 8:36 pm","nop 1 min","",""
"730463593711140956","bor444","09/04/2021 8:36 pm","https://airtable.com/shrEXXxXB1humz7VS","",""
"638493028952178738","uh2064","09/04/2021 8:43 pm","ok","",""
"740067760541007894","daqingsu","20/04/2021 7:12 am","What is the best way to get current spot price of a typical pool say ETH/USDT? Is there a recommended price oracle? Keep polling the midPrice of the pair would not be good I guess.","",""
"830742302971920395","Dev_Xoheb#6225","22/04/2021 6:17 pm","Any guides on how to use the UNI V3: Geometric Mean Price Oracle to get the spot price of a given token in a pool
There's also a possibility of multiple pools for a given pair of tokens based on different fee tires
Anyways s it safe to assume the G.M. of two arithmetically scaled TWAPs  gives us the spot price of the token in a given pool?","","üëç (3)"
"383342717188702208","xatarrer","23/04/2021 2:10 pm","You mean 2 TWAPs with different period? That would be weird, and practically speaking it would be a weighted average.","",""
"383342717188702208","xatarrer","23/04/2021 2:10 pm","Maybe this is helpful
https://en.wikipedia.org/wiki/Weighted_geometric_mean","",""
"817519671372546059","rom4ik#8428","03/05/2021 9:21 pm","Hello, where can i download UNISWAP v2 API  documentation with json file?","",""
"772201260043468840","nikalexis","04/05/2021 12:12 am","Hi, does uniswap uses oracles for any reason or uniswap is itself an oracle provider for prices? I can't really figure out. Can anyone provide more info or share a doc?","",""
"274208745699934220","callil_","04/05/2021 1:01 am","https://docs.uniswap.org/concepts/V3-overview/oracle","","üëç (4)"
"705426491458060399","isamjay#7945","05/05/2021 1:23 am","Hey there,
I was trying to implement Uniswap v3 oracle as stated in the white paper. It is mentioned that 
                                           Price(tick) = 1.0001 ^ (tick) 
Does anyone how this particular statement will be implemented in solidity. It does not support floating points.
Need help. Thanks","",""
"383342717188702208","xatarrer","05/05/2021 1:14 pm","An simple solution is to use ABDK","",""
"383342717188702208","xatarrer","05/05/2021 1:25 pm","What is returned if `observe` is called for a TWAP that exceeds cardinality?","",""
"705426491458060399","isamjay#7945","05/05/2021 1:28 pm","i tried using ABDK it gave me 100010000000000 but ultimately I was getting wrong results","",""
"754930011395326094","dozzy#4243","06/05/2021 1:00 am","Hi guys, do i need to deploy factory and router locally first if i want to deploy a price oracle locally","",""
"754930011395326094","dozzy#4243","06/05/2021 10:57 am","Hi I have a question about the sliding window price Oracle. Why does the contract need a amountin and returns amountout. Why not returns the cumulative price directly?","",""
"822071035318370344","JD001#8540","10/05/2021 2:22 pm","Anyone have UniswapAnchoredView contract with uniswap v3 changes?","",""
"304932758197895169","r1va","10/05/2021 8:58 pm","why token price from ""x*y=k"" is different from uniswap estimated price for all pairs now? all price have ~$20 gap for swap now..","",""
"336243088500588545","jab.sh","12/05/2021 3:20 am","uniswap v3 no longer uses x*y=k","",""
"762139190867132416","thequeen13#2348","12/05/2021 1:14 pm","My team and I are getting death threats right now because uniswap locked up our buyers money !!!! I am desperate!!! Someone help!!!","",""
"304932758197895169","r1va","12/05/2021 8:05 pm","I mean V2 has gap ..","",""
"304932758197895169","r1va","12/05/2021 8:05 pm","even I tried example code from uniswap v2 sdk like below, there is gap","",""
"304932758197895169","r1va","12/05/2021 8:05 pm","","https://cdn.discordapp.com/attachments/737351374760837130/842047416278056960/unknown.png",""
"336243088500588545","jab.sh","12/05/2021 8:08 pm","what do you mean gap?","",""
"304932758197895169","r1va","12/05/2021 8:10 pm","'estimated amount from uniswap front-end' and Execution Price from Uniswap V2 SDK example code","",""
"304932758197895169","r1va","12/05/2021 8:13 pm","is there any other formula except 'X*Y=K' ?..
I checked pair amount and ratio of two tokens on pair and calculated Execution price on my hands.. and The result is same as Example SDK codes..
Only Uniswap front-end says diffrent estimated amount output","",""
"304932758197895169","r1va","12/05/2021 8:13 pm","(from infrua request, even checked etherscan though)","",""
"420477687409278986","tarrence#4186","12/05/2021 8:52 pm","is anyone aware of work being done to derive volatility derivatives from uniswap TWAP oracles?","",""
"420477687409278986","tarrence#4186","12/05/2021 8:52 pm","cc @ken ng","",""
"336243088500588545","jab.sh","12/05/2021 9:43 pm","well in short, the formula for v3 is way more complicated. but for v2 yes it's `x*y=k`","",""
"336243088500588545","jab.sh","12/05/2021 9:43 pm","I think the price in the UI is the TWAP but I'm not certain, I'll have to confirm (it's not, it's the spot price)","",""
"282244767037915147","sudojames","13/05/2021 2:14 am","I recommend you read the white paper here: https://uniswap.org/whitepaper-v3.pdf","",""
"304932758197895169","r1va","13/05/2021 6:23 am","it seems there is no api endpoint or method on @uniswap/sdk module about TWAP...","",""
"336243088500588545","jab.sh","13/05/2021 6:25 am","it's actually the spot price, I was mistaken","",""
"304932758197895169","r1va","13/05/2021 7:52 am","ok, i got it.. 'protocol fee' was problem.
then, how can i check protocol fee's turned on/off status?","",""
"336243088500588545","jab.sh","13/05/2021 8:02 am","I believe you can query the router for this","",""
"304932758197895169","r1va","13/05/2021 10:55 am","so protocol fee is now activated right?..","",""
"336243088500588545","jab.sh","13/05/2021 11:53 am","No it's not activated","",""
"822071035318370344","JD001#8540","13/05/2021 4:05 pm","@Xatarrer @isamjay What is ABDK and how can we use this?","",""
"822071035318370344","JD001#8540","13/05/2021 4:11 pm","how can i calculate this?
Price(tick) = 1.0001 ^ (tick)","",""
"471357824299958273","crypto_rachel","14/05/2021 3:04 pm","@Potion Brewer Please delete","",""
"471357824299958273","crypto_rachel","14/05/2021 3:04 pm","no advertising","",""
"471357824299958273","crypto_rachel","14/05/2021 3:08 pm","@Potion Brewer üëÜ 
@Boris Stanic do you have the power here,,","",""
"471357824299958273","crypto_rachel","14/05/2021 3:08 pm","Ty","",""
"730463593711140956","bor444","14/05/2021 3:09 pm","He is gone ... we don't need this in our Discord","",""
"471357824299958273","crypto_rachel","14/05/2021 3:09 pm","üòÑ  right","",""
"471357824299958273","crypto_rachel","14/05/2021 3:09 pm","more for us to see if it's a scam or not üòÑ","",""
"478422369606696990","rlrahulkanojia","14/05/2021 8:05 pm","@R1VA have you tried anything related to getting liquidity in particular position?","",""
"304932758197895169","r1va","14/05/2021 8:09 pm","wut is position's meaning? I just get 2 tokens amount of pair","",""
"478422369606696990","rlrahulkanojia","14/05/2021 8:10 pm","in v3, range is specified for liquidity right. (sorry for any noob question). By position i meant the range of liquidity.","",""
"304932758197895169","r1va","14/05/2021 8:12 pm","yup.. but i'm wondering about V2's oracle. I dont know well about V3","",""
"478422369606696990","rlrahulkanojia","14/05/2021 8:13 pm","ah, no worries. Thanks!","",""
"383342717188702208","xatarrer","16/05/2021 12:35 am","https://github.com/abdk-consulting/abdk-libraries-solidity/blob/master/ABDKMath64x64.md","",""
"383342717188702208","xatarrer","16/05/2021 12:37 am","`ABDKMath64x64.fromInt(tick).mul(log2OfTick).exp_2()`
where
`int128 log2OfTick = ABDKMath64x64.divi(10001,10000).log_2()`
and
`using ABDKMath64x64 for int128;`","",""
"383836935480803339","sendmoodz","16/05/2021 4:13 am","this is how you use the oracle https://github.com/Uniswap/uniswap-v3-periphery/pull/96","","ty (2)"
"504153946940768277","0xdev0","17/05/2021 6:49 pm","Using the following code with `('0xc2e9f25be6257c210d7adf0d4cd6e3e881ba25f8', 60)` arguments, it returns `3464`. I can multiply it by 1e18 to get the price of ETH in wei but doing so won't give me the full precision. How can I make it give me the full precision in 1e18 format? https://gist.github.com/talegift/2f6688b8d78cda165f94f1a2fd973b08","",""
"843155325619535912","Etherscan Bot#5753","17/05/2021 6:49 pm","<https://etherscan.io/address/0xc2e9f25be6257c210d7adf0d4cd6e3e881ba25f8>","",""
"504153946940768277","0xdev0","17/05/2021 6:56 pm","@moody üí≠ @Xatarrer any ideas?","",""
"383836935480803339","sendmoodz","17/05/2021 7:21 pm","it returns the time weighted average tick","",""
"383836935480803339","sendmoodz","17/05/2021 7:21 pm","to use it use the quote method","",""
"504153946940768277","0xdev0","17/05/2021 7:22 pm","How do I get the actual full price of ETH in 1e18 decimals?","",""
"141155201120731136","brettsun","17/05/2021 9:02 pm","I put together a oracle using this library (üôè thank you) that lets you go between assets not on the same pool (e.g. WBTC -> WETH -> USDC): https://github.com/sohkai/uniswap-v3-cross-pool-oracle

It's not heavily tested yet, especially not the configurable `assetToAsset()` variant, but the current version's deployed at https://etherscan.io/address/0xeAAFD7547B781C60c71F0854a7dA2c1FF23a7dd0f#readContract if you'd like to have a play.

In the oracle lib PR though, I was curious as to why `getQuoteAtTick()`'s `baseAmount` was limited to uint128 (https://github.com/Uniswap/uniswap-v3-periphery/pull/96/files#diff-25f412d10d384766c1e77e81ce8b93877e7afcc8d625e7aa70ec8349efe59662R42). Is this to prevent a revert in the fullmath ops if the result overflows on providing too large a `baseAmount`? It feels a bit weird as an integrator to have to safe cast down to uint128 if the underlying call would revert anyway.","","üôè (2)"
"383836935480803339","sendmoodz","17/05/2021 9:03 pm","correct to prevent revert","","üëç (1)"
"383836935480803339","sendmoodz","17/05/2021 9:03 pm","careful if using the lib in solidity 0.8.0 because of safemath by default!!!","",""
"141155201120731136","brettsun","17/05/2021 9:08 pm","So in the deployment I just opted to up that type to uint256 to avoid the safecast, but I guess once it moves over to the official lib dependency I should change it to include a safecast down","",""
"828586404279877673","heatdeathx","21/05/2021 4:09 am","Hey, are there any simple examples of how to get the TWAP of a pool?","",""
"828586404279877673","heatdeathx","21/05/2021 7:24 pm","Nvm, saw the PR for the OracleLibrary in periphery.","",""
"141155201120731136","brettsun","22/05/2021 11:09 pm","For anyone interested, a new version of this oracle using the latest oracle lib in the PR was redeployed to https://etherscan.io/address/0x0f1f5a87f99f0918e6c81f16e59f3518698221ff#readContract

It has slightly updated API naming and safecasts the given amount down to uint128.","","ty (1)"
"404024793051037697","sascha6297","23/05/2021 2:32 am","great. Is it also possible to get the twap starting from a fixed block in history?","",""
"404024793051037697","sascha6297","23/05/2021 2:32 am","within the 9 days period","",""
"141155201120731136","brettsun","23/05/2021 2:03 pm","In theory yes, the lib and that contract don‚Äôt allow for it though. They always assume you want the freshest price given a time window.","",""
"141155201120731136","brettsun","23/05/2021 2:04 pm","What‚Äôs the use case for wanting the twap from a window in the past though?","",""
"478422369606696990","rlrahulkanojia","23/05/2021 2:43 pm","What would be the correct method to get data similar to liquid distribution section on v3 homepage? https://info.uniswap.org/#/pools/0xcbcdf9626bc03e24f779434178a73a0b4bad62ed","",""
"404024793051037697","sascha6297","23/05/2021 3:06 pm","Thanks for the reply. I will try to amend your lib. Its already a great help.
I need the price at a given time but cannot asume that the getTwap function ist called exactly at this time.","",""
"404024793051037697","sascha6297","23/05/2021 3:07 pm","It could be called 1-2days later.","",""
"473501156413276160","jgcarv","24/05/2021 6:43 pm","I'm trying to expand the observation array for my tokens pool, but metamask is saying that the transaction will revert. What might be the reason? I'm doing to write contract on etherscan","",""
"265555004205563905","mtorgin","25/05/2021 7:56 pm","Hey everyone, I'm currently writing a paper analysing the Uniswap TWAP oracle.
Specifically I'm looking into cost of manipulation when you take multi-block-MEV into account, like selfish mining or collusion of block producers.

Is there currently any work being done to improve the oracle's resistance against this type of attack? Is it seen as a serious problem?","",""
"294824389504139264","alejoamiras","25/05/2021 8:31 pm","anyone has updated / seen in the wild any adaptations of the twap PR to sol 0.8.x ?","",""
"303678400311197707","0xgryphus","26/05/2021 3:15 am","did anyone saw any documentation/blog post/whatever that shows how to get amounts in univ3 easily explained?","",""
"336243088500588545","jab.sh","26/05/2021 4:17 am","it's recommended that you use the Quoter solidity contract","",""
"303678400311197707","0xgryphus","26/05/2021 4:57 pm","Thanks, I'm going to check it and see!","",""
"219123933767532544","ethereumdegen","26/05/2021 10:09 pm","Hi there so I'm also trying to use v3 price oracle ...","",""
"219123933767532544","ethereumdegen","26/05/2021 10:09 pm","The docs mention a library I can use to go from tick to price ratio","",""
"219123933767532544","ethereumdegen","26/05/2021 10:09 pm","Named TickMath","",""
"219123933767532544","ethereumdegen","26/05/2021 10:09 pm","But then I can't find that library !!!","",""
"219123933767532544","ethereumdegen","26/05/2021 10:09 pm","Where is it ? Thx","",""
"219123933767532544","ethereumdegen","26/05/2021 10:11 pm","Oh NVM I found it","",""
"219123933767532544","ethereumdegen","26/05/2021 10:11 pm","But it doesn't have a doc","",""
"219123933767532544","ethereumdegen","26/05/2021 10:15 pm","but now im confused o.o","",""
"219123933767532544","ethereumdegen","26/05/2021 10:15 pm","I really need a guide to show how to use price oracle in solidity.","",""
"219123933767532544","ethereumdegen","26/05/2021 10:15 pm","So far I figured out how to get the 'tickcumulatives'","",""
"219123933767532544","ethereumdegen","26/05/2021 10:15 pm","so then do i feed those into   getSqrtRatioAtTick()  ??","",""
"219123933767532544","ethereumdegen","26/05/2021 10:15 pm","then what ?","",""
"219123933767532544","ethereumdegen","26/05/2021 10:19 pm","nvm found it","",""
"219123933767532544","ethereumdegen","26/05/2021 10:19 pm","https://etherscan.io/address/0x0f1f5a87f99f0918e6c81f16e59f3518698221ff#readContract","",""
"219123933767532544","ethereumdegen","26/05/2021 10:19 pm","lit","",""
"141155201120731136","brettsun","27/05/2021 1:05 am","This isn't intended to be used on-chain (only read from off-chain), but as another code example it may be useful to illustrate how to piece back the price from v3's internal pool accounting: https://github.com/sohkai/multiprice-oracle/blob/main/packages/evm/contracts/MultipriceOracle.sol#L213-L245","",""
"336243088500588545","jab.sh","27/05/2021 1:48 am","what if the two tokens don't have a weth pool?","",""
"219123933767532544","ethereumdegen","27/05/2021 1:56 am","There's an asset to asset method","",""
"336243088500588545","jab.sh","27/05/2021 1:57 am","@ethereumdegenasset to asset is always grabbing weth","",""
"303678400311197707","0xgryphus","27/05/2021 3:03 am","when checking I noticed slight differences between the amounts reported by your contract and the amount reported by the uni web. Also tried the Quoter but had troubles trying to encode the Path :Vitalik:","",""
"141155201120731136","brettsun","27/05/2021 3:36 am","This one always uses token1<>weth (30bps fee)<>token2 as a bridge for simplicity, but you could extend it to take a custom fee and route through token instead.

This one's for twap not spot, but illustrates it: https://github.com/sohkai/uniswap-v3-cross-pool-oracle/blob/main/contracts/UniswapV3CrossPoolOracle.sol#L56-L63","",""
"141155201120731136","brettsun","27/05/2021 3:39 am","Not familiar with how the frontend calculates prices, but it's likely to be including either a fee or slippage. The `MultipriceOracle` just uses the exact spot at the moment (no fees, no slippage).

It's worth noting the sdk exposes token0 and token1 prices through spot though: https://github.com/Uniswap/uniswap-v3-sdk/blob/main/src/entities/pool.ts#L96-L121","",""
"336243088500588545","jab.sh","27/05/2021 3:42 am","the price you see incorporates the fee, the price under the (i) in the bottom right incorporates fee *and* slippage (and is a minimum price)","",""
"842094111653363764","ghoti#2736","27/05/2021 7:43 pm","when i  create pool postion with eth and uni , eth decrease  1
first create
why cost so many fees","",""
"383342717188702208","xatarrer","27/05/2021 8:30 pm","Is the oracle exploitable? Any TWAP updates  its price based on the latest block trades. That means that in the subsequent block, any transactions using the oracle that are processed before the 1st Uniswap trade will still get the old price of the previous block. Since the price for the new block can be determined from the current state, it means that a user using a system relying on this oracle will be able to predict the oracle price and exploit it.
Am I correct?","",""
"383836935480803339","sendmoodz","28/05/2021 6:21 am","try the oracle library in periphery","",""
"456226577798135808","Deleted User","28/05/2021 7:10 pm","Why do people keep calling UniswapOracle to update the price? Is there any incentive?","",""
"383342717188702208","xatarrer","29/05/2021 1:42 am","I dont get your question.","",""
"542545105903419404","tocquevilletree","30/05/2021 3:26 am","are there any deployed solutions similar to a chainlink aggregator price feed? Like a list of contracts or one aggregator contracts that has the up to date price feeds?  seems like a waste if we all run our own. Happy to contribute by paying for usage.","",""
"829495717403295784","awbvious","30/05/2021 3:57 am","hi, I'm noticing the oracle is waaaay off for one of my v3 pools.","https://cdn.discordapp.com/attachments/737351374760837130/848326611634749450/unknown.png",""
"183309006767521792","jorropo","30/05/2021 4:51 am","What is the token ? it's likely that the pool is too small and isn't reliable.","",""
"456226577798135808","Deleted User","30/05/2021 11:09 am","just like https://etherscan.io/address/0x087f35bd241e41fc28e43f0e8c58d283dd55bd65#code this contract, it's `UniswapOracle`, but why do many addresses voluntarily call the `update` function? Is it just a voluntary act or there have incentive?","",""
"456226577798135808","Deleted User","30/05/2021 11:17 am","üëç","",""
"183309006767521792","jorropo","30/05/2021 1:20 pm","there is no incentive, it's only 1 bot, from 1 address","",""
"183309006767521792","jorropo","30/05/2021 1:21 pm","I guess it's some dev team with deep pockets that did this before doing a sustainable solution","",""
"456226577798135808","Deleted User","30/05/2021 8:34 pm","thank you. Just like V said, we need the oracle.","",""
"294824389504139264","alejoamiras","31/05/2021 4:32 am","Keep3r has some oracles developed for V2, but you need to maintain them yourself","",""
"294824389504139264","alejoamiras","31/05/2021 4:33 am","Is there a function that choses the best liquidity pool to get the price from ? Since having 3 tiers of pools, you need to decide where to get the twap from","",""
"294824389504139264","alejoamiras","31/05/2021 4:35 am","I'm so sorry for doing this @serv.eth (support team) üôÇ","",""
"294824389504139264","alejoamiras","31/05/2021 4:36 am","hey @sohkai üçí seems that you've done your DD and got to see some uni v3 code, have you thought about this problem ?","",""
"294824389504139264","alejoamiras","31/05/2021 4:36 am","if you query a pool that hasnt been updated soon-ish, you'll probably get a revert with 'OLD' error.","",""
"456226577798135808","Deleted User","31/05/2021 2:11 pm","ok, thank you.","",""
"141155201120731136","brettsun","31/05/2021 6:24 pm","In terms of spreading a twap against its liquidity or choosing the best pool? Yeah, it was on the wishlist for the OracleLibrary that just got merged (https://github.com/Uniswap/uniswap-v3-periphery/issues/22, library: https://github.com/Uniswap/uniswap-v3-periphery/blob/main/contracts/libraries/OracleLibrary.sol).

It wouldn't be very hard to add, mainly depends on your price selection method and trading off gas usage for more complex queries. E.g. you could pick the one with most active liquidity, harmonic mean between the three pools's active liquidity for a liquidity-weighted twap, etc.

But at the moment it doesn't seem very practical to spend the gas doing this, most assets don't have multiple fee pools and I suspect over time most liquidity will flow to only a single pool anyway. If your asset starts with the 100bps fee pool, after some time price discovery will have calmed down to where a 30bps fee pool will likely gain most of the liquidity.","",""
"294824389504139264","alejoamiras","31/05/2021 8:06 pm","Yeah, I mean ... in terms of liquidity (kinda) ... Say: ETH/DAI -- all three pools are created, but only 0.3% seems to have a good amount of liquidity.","",""
"294824389504139264","alejoamiras","31/05/2021 8:07 pm","I need to programmatically understand what of the 3 pools to query from, since they even have different liquidity ranges (lets say there is low liquidity in eth/dai 0.05% in 2k, and the 1% pool has liquidity on the 4k range, 0.3% has in most of the range)","",""
"294824389504139264","alejoamiras","31/05/2021 8:08 pm","A friend suggested checking what of the last three pools has the last updated tick (what was the last one the protocol (swap router?) interacted with)","",""
"824150074690764811","Michael Yang#8171","01/06/2021 1:02 pm","Question to anyone who may be able to answer... I'm doing a research on price models for oracle.

Uniswap provides TWAP for each pair. But it also provides an aggregate daily price for a token.. which means the price for every pair of a given token is somehow aggregated.

What is their method for doing this? Is VWAP or LWAP (liquidity weighted average price) used to do this?","",""
"141155201120731136","brettsun","01/06/2021 3:56 pm","Why do the liquidity ranges matter? To minimize potential risk from the price of the pool moving too easily in the future?

> A friend suggested checking what of the last three pools has the last updated tick
You can kind of get this from the pool's twap oracle (the last time the price moved enough to cause a write to the oracle history) but this is manipulatable by an attacker to always select the pool they'd like to use (contract call, sandwich, MEV, etc)","",""
"646041265913200641","branmcf#4909","02/06/2021 2:33 am","Hey @Emily ü¶Ñ @Noah Zinsmeister @Connor Martin 

So I'm trying to calculate the value of `token0` relative to `token1` using the `tickCumulative` array returned from `UniswapV3Pool.observe()`, but I'm kinda stuck on how to compute p(i) = 1.0001^i`

I found a suggestion in this channel to use ABDKMath64x64, but the values I'm getting for the spot price still seem wonky. Can you help me figure out what I'm missing?","",""
"646041265913200641","branmcf#4909","02/06/2021 2:34 am","Here's a screenshot my implementation and the values I'm using. btw this is for the ETH/DAI pool at `0xC2e9F25Be6257c210d7Adf0D4Cd6E3E881ba25f8`","https://cdn.discordapp.com/attachments/737351374760837130/849392972176424960/IMAGE_2021-06-01_170340.jpg",""
"646041265913200641","branmcf#4909","02/06/2021 2:34 am","","https://cdn.discordapp.com/attachments/737351374760837130/849392990409588746/Screen_Shot_2021-06-01_at_4.42.17_PM.png",""
"646041265913200641","branmcf#4909","02/06/2021 3:44 am","I have now seen the error of my ways. Using `getQuoteAtTick` from the periphery fixes this. No more ABDK","",""
"659734580357627905","opencom#9437","02/06/2021 7:21 am","Hey! Anyone interested in taking part in a project that makes an Oracle service for Scientific Journal articles?","",""
"294824389504139264","alejoamiras","03/06/2021 1:33 am","> Why do the liquidity ranges matter? To minimize potential risk from the price of the pool moving too easily in the future?

Nope, it does because all pools have different liquidity in different ranges. The TWAP library developed by uniswap team, gets TWAP from a specific pool, not from a specific pair. 
This means that, let's say I hardcode my protocol to use 0.3% pool for a specific pair, I'll get the twap for that specific pool. Let's say all liquidity moves to the 0.05% pool of the same pair. And the 0.3% liquidity becomes out of range, or it's not getting consistent ticks. The TWAP of the 0.3% pool will not be accurate.

> You can kind of get this from the pool's twap oracle (the last time the price moved enough to cause a write to the oracle history) but this is manipulatable by an attacker to always select the pool they'd like to use (contract call, sandwich, MEV, etc)

Yeap, great point.","",""
"294824389504139264","alejoamiras","03/06/2021 1:38 am","I might not be seeing something obvious btw. So thanks for taking the time sohkai!","",""
"141155201120731136","brettsun","03/06/2021 1:39 am","> I hardcode my protocol to use 0.3% pool for a specific pair
Yeah, it's probably worth making this configurable in the contract to future proof it.

TBH I don't see most of the pairs converging on a different fee pool than the one they've already converged to (the only one is from 100bps down to 30bps when a token becomes more established) but I guess we'll see over time.","",""
"294824389504139264","alejoamiras","03/06/2021 1:40 am","Yeap. The thing is I'm doing something that's got a factory and can have N pairs, so, wanted to solve it programmatically. Thanks, tho. At least I know it's not THAT easy to solve haha.","",""
"766595383379361793","theucheedeoga#2851","03/06/2021 9:53 pm","Hello everyone, I currently need any guide in forking uniSwap interface V2, and how to link it to the smart contracts. Any pointers?","",""
"843155325619535912","Etherscan Bot#5753","04/06/2021 2:00 am","<https://etherscan.io/address/0x1d42064fc4beb5f8aaf85f4617ae8b3b5b8bd801>","",""
"404024793051037697","sascha6297","04/06/2021 2:48 am","What are the estimated gas costs to increase CardinalityNext? Does it depend on the difference between the current CardinalityNext and the new CardinalityNext?","",""
"141155201120731136","brettsun","04/06/2021 5:13 pm","Yes, you can roughly estimate it as 20k gas per increase from the last `cardinalityNext`","","üëç (1)"
"846420763056930836","fgsaez1#3538","05/06/2021 6:19 am","Hello, cant swap MUOBU to ETH, somebody can help me, please?","",""
"256860689535074316","lettucebaran","05/06/2021 6:20 am","#üôã‚îÇhelp","",""
"846420763056930836","fgsaez1#3538","05/06/2021 6:21 am","hi, what can i do, when i swap appears this text ""The input token cannot be transferred. There may be an issue with the input token.""","",""
"846420763056930836","fgsaez1#3538","05/06/2021 6:21 am","sorry , my english its a little rusty","",""
"256860689535074316","lettucebaran","05/06/2021 6:21 am","This is the wrong channel, you need to ask at #üôã‚îÇhelp üòâ","",""
"846420763056930836","fgsaez1#3538","05/06/2021 6:21 am","oks, thanks","",""
"829495717403295784","awbvious","08/06/2021 10:45 pm","FYI, it was KP3R--per the screenshot.  I wrote about the issue to the security uniswap email address, and got an answer on the problem from Hayden himself.  He said it was a problem of liquidity.  He said I had to make a small trade of ETH to KP3R of approximately $5 to make the price reflect correctly.  I tried, and I didn't see any ""insufficient liqudity, use v2"" error, so I assumed it would work via v3.   But my ""current price"" on my NFT didn't change.  I think it was because the current (true) price of KP3R was apparently too high for the range of my v3 token.  I figured it out because the amount of KP3R that I received for the ETH spent was indeed outside of my range.  In fact, I don't think there was any v3 0.3% liquidity with KP3R at that price, because there was no recent transactions in that info for that 0.3% pool.  However, there were recent transactions for the 1% v3 pool.  So I assume what happened was the trade went through, but used the 1% pool (which, by the way, on the info page showed the correct current price), as it had liquidity that was in the price range.  So, determined to get my ""current price"" to update, I created another v3 NFT that had a range that includes a higher price for KP3R.  Then I tried another v3 trade.   I got a warning about slippage or something, and that I'd have to do an Expert/custom trade.  It turned out to be a very expensive experiment, as now my $5 trade would cost $30 in fees.  But, after that trade, it finally used my other v3 NFT with the higher price range, and then the current price updated for both of them (I believe, both NFTs are showing more believable prices now).  I've spent probably over a hundred bucks in gas fees on these KP3R NFTS and I haven't made even a dollar in uniswap fees.  Good times.","",""
"405082190758674442","mirza_usman#1076","09/06/2021 2:16 pm","Hi Folks, We have deployed our own Factory & router Addresses. But in our analytics transactions some of the transactions are forwarded to uniswap pool address. Can anyone facing the same issue?","",""
"294824389504139264","alejoamiras","09/06/2021 9:18 pm","Why did you deployed Factory & router ? üëÄ","",""
"294824389504139264","alejoamiras","09/06/2021 9:18 pm","Plus, this is oracle channel üôÇ","",""
"294824389504139264","alejoamiras","09/06/2021 9:18 pm","@here https://github.com/Uniswap/uniswap-v3-periphery/issues/140 would be cool that anyone that needs this can push, or social-signal in some way that we need this üòÇ","",""
"405082190758674442","mirza_usman#1076","09/06/2021 10:10 pm","Because we wanted to test it","",""
"405082190758674442","mirza_usman#1076","09/06/2021 10:13 pm","Yeah i know that mate, could you help me in my issue?","",""
"709819694558740552","Roman | OOKI#6129","09/06/2021 10:53 pm","hey man, mind sharing this code?","",""
"646041265913200641","branmcf#4909","09/06/2021 10:59 pm","so the ABDK code actually didn't work, I ended up using the uniswap periphery. Definitely don't mind sharing! I'll put together a gist for you a bit later today üëç","",""
"709819694558740552","Roman | OOKI#6129","09/06/2021 11:04 pm","I am looking at replacing chainlink with TWAP, any helpfull docs/code is appreciated","",""
"709819694558740552","Roman | OOKI#6129","09/06/2021 11:39 pm","what is the address of OracleLibrary seems that I can't find any addresses for v3","",""
"646041265913200641","branmcf#4909","09/06/2021 11:53 pm","The OracleLibrary is really all you need: https://github.com/Uniswap/uniswap-v3-periphery/blob/main/contracts/libraries/OracleLibrary.sol","",""
"646041265913200641","branmcf#4909","09/06/2021 11:53 pm","Here's an untested example contract that gets the time-weighted average tick from a Uniswap V3 pool then uses the tick to compute the spot price of `baseToken` in `quoteToken`: https://gist.github.com/branmcf/b0dbd01bc7056bfd05bf2ff6f59791ae","","üëè (1)"
"709819694558740552","Roman | OOKI#6129","10/06/2021 6:01 pm","Thank you, that will be a great help.","",""
"721658402425667626","shivasai2023","11/06/2021 10:35 am","heello i am finding difficulty in understanding the calculations for sending the  lp tokens to the fee to address can any explain me about that","",""
"383342717188702208","xatarrer","11/06/2021 12:10 pm","Say a pool has a really large (infinite) amount of liquidity. The price is very stable on this pool of stablecoins. On a 0.1% fee tier, a 0.1% fee is charged charged to buys and sales. How does that affect the oracle price? Does the price remain constant or would it oscillate within a 0.1% interval? Basically my question: is the price reported by the oracle the ideal price without fee or after the fee is substracted?","",""
"183309006767521792","jorropo","11/06/2021 12:15 pm","if the pool is inifinite it's impossible to change the price.
If it's really big on V2 the fee is taken from input and thus goes against your price impact (a tiny bit, it's not like this matter in practice).
On V3 change nothing fees are moved to a vault and sits doing nothing until collection.","",""
"383342717188702208","xatarrer","11/06/2021 12:16 pm","So you are saying that in V3 even though the actual effective price (after the fee) is different for buyers and sellers, it would not change the reported oracle price?","",""
"183309006767521792","jorropo","11/06/2021 12:17 pm","no I was only talking about the fee, price impact does still applies","",""
"383342717188702208","xatarrer","11/06/2021 12:17 pm","For price impact assume infinite liquidity, so 0.","",""
"383342717188702208","xatarrer","11/06/2021 12:18 pm","Do you agree with me that if we define effective price as #tokensIn/#tokensOut after all fees are paid, the effective price must change?","",""
"383342717188702208","xatarrer","11/06/2021 12:18 pm","Because traders are paying a 0.1% fee.","",""
"183309006767521792","jorropo","11/06/2021 12:19 pm","yes this is an ""effective price"", so what you are saying is right.
In practice the same applies with slippage and price impact too.

The oracle doesn't count that, oracle just report the true pure price.","",""
"383342717188702208","xatarrer","11/06/2021 12:20 pm","Ok, so in my example, the price would remain constant, correct?","",""
"383342717188702208","xatarrer","11/06/2021 12:20 pm","the oracle price i mean","",""
"183309006767521792","jorropo","11/06/2021 12:20 pm","yes but you are cheating, infinite liquidity doesn't make sense in practice","",""
"383342717188702208","xatarrer","11/06/2021 12:21 pm","haha, i know. It's an imaginary situation to get rid of the variables I am not interested.","",""
"383342717188702208","xatarrer","11/06/2021 12:21 pm","Thank for helping""","",""
"383342717188702208","xatarrer","11/06/2021 12:21 pm","!","",""
"404024793051037697","sascha6297","14/06/2021 1:52 am","Hi I try to call a pool¬¥s observe function in another contract but get the error message:","",""
"404024793051037697","sascha6297","14/06/2021 1:52 am","Invalid type for argument in function call. Invalid implicit conversion from uint32[2] memory to uint32[] memory requested.","",""
"404024793051037697","sascha6297","14/06/2021 1:52 am","My function is: (tickCumulatives,) = uniswapV3Pool.observe([timeDeltaStart,timeDeltaEnd]);","",""
"404024793051037697","sascha6297","14/06/2021 1:58 am","This seems to work:","",""
"404024793051037697","sascha6297","14/06/2021 1:58 am","uint32[] memory secondAgos = new uint32[](2);
        secondAgos[0] = timeDeltaStart;
        secondAgos[1] = timeDeltaEnd;","",""
"345951322589364224","nchamo","15/06/2021 6:09 pm","Hey Uni team!

I can't add reviewers to the PR, so I just wanted to give like a heads up üôÇ 

https://github.com/Uniswap/uniswap-v3-periphery/pull/146","",""
"808113408452067350","tyrone#5181","19/06/2021 1:44 pm","is there a list of pool addresses for kovan? how is everyone doing their tests?","",""
"585532554720051210","commercium.sys","22/06/2021 11:07 pm","you didn't convert back out of their fixed point format","",""
"817067280445734975","bernatf","23/06/2021 2:35 am","Is it common for V3 pools to have so few observations or am I doing something wrong?

33 seconds back in time works but anything older than that doesn't:

```
>>> pool = interface.IUniswapV3PoolDerivedState('0x99ac8ca7087fa4a2a1fb6357269965a2014abc35') # USDC-WBTC [0.3%]
>>> pool.observe([33,0])
((249314628117, 249316537200), (5488322877120249257480588790804938, 5488324068034431343366530499558428))
>>> pool.observe([34,0])
  File ""<console>"", line 1, in <module>
  File ""brownie/network/contract.py"", line 1712, in __call__
    return self.call(*args, block_identifier=block_identifier)
  File ""brownie/network/contract.py"", line 1517, in call
    raise VirtualMachineError(e) from None
VirtualMachineError: revert: OLD
```","",""
"843155325619535912","Etherscan Bot#5753","23/06/2021 2:35 am","<https://etherscan.io/address/0x99ac8ca7087fa4a2a1fb6357269965a2014abc35>","",""
"383836935480803339","sendmoodz","23/06/2021 5:48 am","you can call increaseObservationCardinality to bump it so it's up to a week long","","‚ù§Ô∏è (1)"
"183309006767521792","jorropo","24/06/2021 3:28 am","The ETH / USDC (if I recall correctly) pool should have a bunch of observation because a protocol has updating it","",""
"796577023949930526","cryptopuma#7846","27/06/2021 11:56 pm","Hi guys, I'm building a price discovery bot. I was reading the documentation of the v3, and trying to understand how to get the prices of the different tokens using the oracle, but I don't understand how it works. Can anyone help me?","",""
"415497683017662464","_grimac","28/06/2021 12:08 am","No","",""
"345951322589364224","nchamo","28/06/2021 1:19 am","@cryptopuma , this might help
https://discordapp.com/channels/597638925346930701/737351374760837130/852251580907651114","",""
"796577023949930526","cryptopuma#7846","28/06/2021 1:36 am","hi @NChamo thanks for your help. I will check this!!!","",""
"796577023949930526","cryptopuma#7846","28/06/2021 6:53 am","@moody üí≠ I was looking at your github repository, you have time to talk?","",""
"460278243799466007","Jubila-bt#8377","29/06/2021 9:21 am","Hi everyone üëã  I have 2 questions, I'm trying to get the token's prices of a liquidity pool, so I've heard there are two ways of getting the price:
1.- From a Tick
2.- Using Slot[0] (sqrtPriceX96)

First Question: What is the most trustful result?
Second Question: What is the formula for doing this?","",""
"345951322589364224","nchamo","29/06/2021 6:44 pm","This might help https://discordapp.com/channels/597638925346930701/737351374760837130/852251580907651114","",""
"658657300671889419","oxmarco","29/06/2021 9:46 pm","Hello, can I use Uniswap oracles to create a real time candlestick graph?","",""
"183309006767521792","jorropo","29/06/2021 9:47 pm","oracle are meant for on chain reliable data, but in theory yes I don't see why you couldn't (appart from the fact that oracles only store about a week or so)","",""
"658657300671889419","oxmarco","29/06/2021 9:48 pm","what is the update frequency of oracles?","",""
"183309006767521792","jorropo","29/06/2021 9:50 pm","up to once per block, else on each swap","",""
"183309006767521792","jorropo","29/06/2021 9:51 pm","@OxMarco also, most oracles have a really tiny storage buffer, because you first need to enlarge it using `increaseObservationCardinalityNext` (this is to avoid putting the cost of the expensive first SSTORE on the users swapping, as the first swap is more expensive)","",""
"658657300671889419","oxmarco","29/06/2021 9:52 pm","mm, I guess it will cost gas then","",""
"183309006767521792","jorropo","29/06/2021 9:53 pm","if you are fine offchain, you can also just watch the swap events, this is gas free and is limited by how much events your ETH node stores, and not by the chain","",""
"183309006767521792","jorropo","29/06/2021 9:53 pm","this is how #üåê‚îÇsubgraph-api works, watching events","",""
"183309006767521792","jorropo","29/06/2021 9:53 pm","(subgraph might be perfect for you also, but it's a centralised API)","",""
"658657300671889419","oxmarco","29/06/2021 9:54 pm","Isn't it similar to Covalent API?","",""
"658657300671889419","oxmarco","29/06/2021 9:54 pm","and their log explorer functionality","",""
"183309006767521792","jorropo","29/06/2021 9:54 pm","no idea, idk covalent api.

subgraph allows you to query uniswap history in a neat ""simple"" way","",""
"658657300671889419","oxmarco","29/06/2021 9:55 pm","@Jorropo.eth do you have an example to point me to?","",""
"183309006767521792","jorropo","29/06/2021 9:55 pm","they have a nice playground : <https://thegraph.com/explorer/subgraph/uniswap/uniswap-v3>","",""
"658657300671889419","oxmarco","29/06/2021 9:56 pm","perfect, thank you","",""
"658657300671889419","oxmarco","29/06/2021 9:56 pm","if I may ask another question. Is Uniswap V3 production ready?","",""
"183309006767521792","jorropo","29/06/2021 9:56 pm","üòÑ yes since a while","",""
"658657300671889419","oxmarco","29/06/2021 9:57 pm","the API documentation is much more complex and seems still subject to updates","",""
"183309006767521792","jorropo","29/06/2021 9:57 pm","it has ~1b69 of TVL but thx to concentration it has 1b of volume daily <https://info.uniswap.org/>","",""
"183309006767521792","jorropo","29/06/2021 9:58 pm","no it's just complex üòÑ updates no, appends yes, we got a new quoter V2 for example, but in practice if they roll out something new, this will not change anything to your current code (unless you do mempool decoding or something like that), you can keep using the old periphery stuff if you want, the core will not change tho (or not without a uniswap v4)","","üëç (1)"
"658657300671889419","oxmarco","29/06/2021 9:59 pm","ok I'll need to dive deeper into v3 then. Thanks!","",""
"183309006767521792","jorropo","29/06/2021 10:00 pm","the docs could be clearer surely, but the code is ready and strong (except subgraph, subgraph sucks a bit, but not much)","",""
"117720371548913670","tylo","30/06/2021 1:28 am","Hi üôÇ Is there any tick data provider live ? (unsure if its the right channel)","",""
"183309006767521792","jorropo","30/06/2021 1:28 am","web3 ? etherjs ? eth rpc ?","",""
"548285589909274624","patrick#6357","30/06/2021 12:35 pm","What is the easiest way to get the mid price from the contract in V3? Get the current tick and and raise 1.0001 by it?","",""
"548285589909274624","patrick#6357","30/06/2021 12:35 pm","How many decimal places does the tick from slot0 function have or is it always an integer?","",""
"617127949480493077","yj_alt","01/07/2021 2:29 pm","The geometric mean of the two ticks either side?","",""
"617127949480493077","yj_alt","01/07/2021 2:29 pm","tick num is always an integer","",""
"548285589909274624","patrick#6357","01/07/2021 6:36 pm","","https://cdn.discordapp.com/attachments/737351374760837130/860144354265792572/Screen_Shot_2021-07-01_at_6.06.25_AM.png",""
"548285589909274624","patrick#6357","01/07/2021 6:38 pm","@yj  Thanks, these are the outputs of  slot0(). For mid price raising 1.0001^tick seems to work. However I don't understand the significance of the rest of the outputs. For example sqrt of Price? Is that really the sqaure root of price? I don't think so.","",""
"548285589909274624","patrick#6357","01/07/2021 6:39 pm","Also what is meant by cardinality of observation being 360?","",""
"585532554720051210","commercium.sys","01/07/2021 10:56 pm","how is it that the last observation on the ETH/DAI .3% pair is about 40 minutes ago but I can use the uniswap v3 oracle library to consult a price for a period of four and a half hours? @Noah Zinsmeister @Pote ü¶Ñ can anyone help me here?","",""
"585532554720051210","commercium.sys","01/07/2021 10:56 pm","there's 360 elements in the observations array","",""
"585532554720051210","commercium.sys","01/07/2021 11:00 pm","aha it cycles around - the last observation is actually whats reported by observationIndex","",""
"617127949480493077","yj_alt","02/07/2021 12:12 am","It's the square root of price √ó2^96","",""
"548285589909274624","patrick#6357","02/07/2021 12:15 am","thanks, where does the 2^96 come from? the number of binary digits it uses?","",""
"617127949480493077","yj_alt","02/07/2021 1:05 am","I don't actually know for sure, but I *think* it's just the way for the sqrtP (uint160) to have 64bits of precision before the decimal point, and 96bits of precision after the decimal point. (64 + 96 = 160)","",""
"548285589909274624","patrick#6357","02/07/2021 1:13 am","Oh I see, if you ignore the  decimal and just print the entire number as the integer it will end up having to be multiplied 2^96. Thanks again","",""
"860227258929512460","domolord#5408","02/07/2021 1:54 am","hey! looks like you guys are trying to figure out the same problem i am. this is from a USDC/WETH pool","https://cdn.discordapp.com/attachments/737351374760837130/860254634747494400/Screen_Shot_2021-07-01_at_1.23.57_PM.png",""
"860227258929512460","domolord#5408","02/07/2021 1:55 am","so price would be (1723510219340746284844055115313695 * 2^-96)^2?","",""
"860227258929512460","domolord#5408","02/07/2021 1:56 am","when I try to calculate that I get 473225957.041","",""
"860227258929512460","domolord#5408","02/07/2021 1:57 am","what is this price denominated in? am i not accounting for the fact that USDC only has 6 decimals?","",""
"860227258929512460","domolord#5408","02/07/2021 2:00 am","i may have just answered my own question lol. gonna test this out some more. anyway thanks everyone.","",""
"548285589909274624","patrick#6357","02/07/2021 2:59 am","No that number is already multiplied by 2^96","",""
"548285589909274624","patrick#6357","02/07/2021 3:02 am","Easiest way to the price is to use the 2nd number, 1.0001^tick. That will give you the ratio or the inverse of ratio, and if the tokens in the pool dont have mis matching decimal places, thats it. The price is always denominated in the other token in the pair. ETH in USDC, USDC in ETH and so on .","",""
"860227258929512460","domolord#5408","02/07/2021 4:05 am","oh okay! i just tried both and it appears the way i first calculated was off by 1% or so. still trying to wrap my mind around the ticks. I will use the way you suggested thank you","",""
"548285589909274624","patrick#6357","02/07/2021 4:08 am","@domolord what were the different ways of calculating? You would think well defined prices like ""mid price"" or ""n minute twap"" would and should be unique numbers, regardless of how they are calculated. But I'm new to V3 , and trying to learn. This makes V1 and V2 look like super easy. None of the names seem intuitive to me","",""
"860227258929512460","domolord#5408","02/07/2021 4:09 am","actually i think that difference was due to price movement lol","",""
"860227258929512460","domolord#5408","02/07/2021 4:09 am","i believe both of these ways work, but if you're really trying to calculate for some kind of trading bot i can't advise on that. i am also new to this","",""
"548285589909274624","patrick#6357","02/07/2021 4:10 am","I think I need to read the whitepaper","",""
"860227258929512460","domolord#5408","02/07/2021 4:10 am","there's a lot about ticks in the whitepaper","",""
"548285589909274624","patrick#6357","02/07/2021 4:11 am","I understand ticks, I just dont understand all the contract functions and why they exist, or how they are used","",""
"860227258929512460","domolord#5408","02/07/2021 4:11 am","so you can either use (1.0001^tick) or use (sqrtPriceX96 * 2^-96)^2 i think","",""
"548285589909274624","patrick#6357","02/07/2021 4:12 am","Exactly so why did they present both as different external functions?","",""
"860227258929512460","domolord#5408","02/07/2021 4:12 am","i believe they're both pretty accurate but try yourself. i also haven't slept much so maybe i'm wrong","",""
"548285589909274624","patrick#6357","02/07/2021 4:13 am","like wouldn't it make sense to have a single function, called spot price? haha","",""
"860227258929512460","domolord#5408","02/07/2021 4:14 am","well it doesnt hurt having both i guess, but it would be helpful it also had spot price that you could read instead of jumping through hoops.","",""
"860227258929512460","domolord#5408","02/07/2021 4:15 am","i don't mind it really, there's always going to be something new to learn","",""
"548285589909274624","patrick#6357","02/07/2021 4:17 am","If I understand the rationale behind these choices, then I will have a better understanding. Maybe trying to save on stroage? or calculation in the contract? idk","",""
"709174257980276737","t_loor","03/07/2021 7:32 pm","I'm trying to get access to the right oracle on kovan. I think I've discovered (by reading in here), that I can get the pool address by calling getPool on the Factory, but I need to figure out the token addresses (I think I can research this one on the web), but how do I convert something like 0.3% into the uint24 it's looking for?","",""
"709174257980276737","t_loor","03/07/2021 7:56 pm","Actually, maybe the 3rd parameter of the first event in https://etherscan.io/tx/0x2acb44ed240131e3a05eacc0ee870bdf93564f299eb633156a60d81055a352eb#eventlog tells me what I need for that value.","",""
"820245686385115147","LosLith#3283","05/07/2021 5:02 pm","https://gov.rarible.com/t/link-to-rarible-discord/1393","",""
"726853202028396658","Pripersian#6379","06/07/2021 1:24 am","Pool contract have liquidity() function.
How correct calculate it in eth?
in screenshot we have 694888380199379670 so it
(694888380199379670 / (10^18)) = 0,69 eth?","https://cdn.discordapp.com/attachments/737351374760837130/861696573548003378/unknown.png",""
"709174257980276737","t_loor","07/07/2021 10:05 pm","Can you tell me about your comment on mismatched decimal places?  I'm doing the price math on WBTC / USDC and am off by 100 in my answer.  I'm hoping to find a programmatic way to find out how to realign the decimals so I don't have to keep some weird map in my codebase somewhere.","",""
"548285589909274624","patrick#6357","07/07/2021 10:20 pm","@Tangaloor by ""mismatched"" I meant if the number of decimals in contract for the first token is not equal to the second token. You can read all this in an automated way. It is part of ERC20","",""
"548285589909274624","patrick#6357","07/07/2021 10:24 pm","so read the function decimals() from each token, and subtract and then you multiply/divide by 10^(decimals_Atoken() - decimals_Btoken() )","",""
"709174257980276737","t_loor","07/07/2021 10:27 pm","Thank you.","",""
"709174257980276737","t_loor","08/07/2021 2:12 am","I think multiplying by a negative power ends up making the divide or multiply decision straightforward","",""
"709174257980276737","t_loor","08/07/2021 2:22 am","Huh. The USDC token used in the WBTC / USDC pool on mainnet is a proxy. Any idea how to get to the real ABI without clicking around etherscan?","",""
"548285589909274624","patrick#6357","08/07/2021 12:46 pm","USDC has a unique contract. and it has 6 decimal places. WBTC has 8 and unique contract. You are saying they dont use the real address in the uniswap contract? I have these addresses hard coded in my code, they have not changed . can you paste the proxy address in question?","",""
"709174257980276737","t_loor","08/07/2021 7:11 pm","I'm not sure I've discovered the actual proxy address. When you go to the contracts tab of the USDC contract on etherscan, they have a new 'Read as Proxy' to get to the function definitions.  The etherscan-api version I'm using may be at issue in pulling that back and I'll upgrade that to make sure it isn't the problem.","",""
"304860541732519936","gattytto_dnn","10/07/2021 2:48 pm","hello üëã","",""
"304860541732519936","gattytto_dnn","10/07/2021 2:49 pm","can someone please point me to documentation on how to maintain the price of a token the same in 2 different blockchains?","",""
"172155102503763969","soupy.one","10/07/2021 9:56 pm","@gattytto_DNN I may well be wrong and talking out of school, but I'd imagine arbitrage has a lot to do with that.  If a token is worth more on one chain than another, people will buy from the cheaper chain and immediately sell it to the more expensive chain.  Arbitrage is a very low-risk way of making money from crypto.","",""
"383836935480803339","sendmoodz","10/07/2021 10:11 pm","cheaper to store tick than compute it from price, it's all in one slot. more importantly, the current tick is not necessarily the one derived from price (can be off by 1 on price boundaries)","","üëç (1)"
"658657300671889419","oxmarco","12/07/2021 4:48 pm","Hello!
I am trying to create an on-chain oracle for a swap pool. Here's the code I've written so far

```
int24 period = 600; // 10 minutes
uint32[] memory secondAgos = new uint32[](2);
secondAgos[0] = uint32(period);
secondAgos[1] = 0;

(int56[] memory tickCumulatives, ) = IUniswapV3Pool(pool).observe(secondAgos);
int56 tickCumulativesDelta = tickCumulatives[1] - tickCumulatives[0];

timeWeightedAverageTick = int24(tickCumulativesDelta / period);

// Always round to negative infinity
if (tickCumulativesDelta < 0 && (tickCumulativesDelta % period != 0)) timeWeightedAverageTick--;
        
uint160 sqrtRatioX96 = TickMath.getSqrtRatioAtTick(timeWeightedAverageTick);
```

Is there a way to implement `quoteExactOutputSingle` ?","",""
"345951322589364224","nchamo","12/07/2021 6:00 pm","Someone shared something like that a few weeks ago
https://gist.github.com/branmcf/b0dbd01bc7056bfd05bf2ff6f59791ae","","üëç (1)"
"658657300671889419","oxmarco","12/07/2021 6:02 pm","I used most of their code, the problem is such approach only works to mimic `quoteExactInputSingle` (*telling how many tokens I get by swapping a precise quantity of source tokens*) whereas I'm looking for an on-chain replacement of `quoteExactOutputSingle` (*telling how many source tokens I need to swap in order to get a determined amount of desired tokens*)","",""
"345951322589364224","nchamo","12/07/2021 8:56 pm","I'd recommend using the Quoter then
https://github.com/Uniswap/uniswap-v3-periphery/blob/main/contracts/lens/QuoterV2.sol","",""
"658657300671889419","oxmarco","12/07/2021 9:04 pm","It is discouraged to use a ""lens"" contract like the Quoter on chain","",""
"658657300671889419","oxmarco","12/07/2021 9:05 pm","I need a way to automatically trigger a liquidation using uniswap and, in order to avoid getting ripped off by sandwich attacks, it is important to use some kind of Oracle","",""
"345951322589364224","nchamo","12/07/2021 9:06 pm","Yeah, good point. I'm not sure how to help you then, that's as far as my knowledge of uniswap goes haha","",""
"658657300671889419","oxmarco","12/07/2021 9:06 pm","no problem","",""
"450586562506391553","antony47","13/07/2021 9:09 pm","hi i am new here and kinda noob but i am very passionate to learn these. so can someone share a detailed forum like stuff about sandwich attack?","",""
"585532554720051210","commercium.sys","15/07/2021 9:10 am","So I'm pulling a lot of oracle values from historical blocks with a script of mine","",""
"585532554720051210","commercium.sys","15/07/2021 9:12 am","Occasionally the call reverts, which is troubling becuase I'm also developing a protocol that will lean heavily on use of the v3 oracle. I had the revert message written down somewher eearlier but I can't seem to find it - I'm running my script again until it hopefully comes up. 

It wasn't straightforward and I couldn't find it anywhere in the uniswap code","",""
"585532554720051210","commercium.sys","15/07/2021 9:13 am","Just found it - `ValueError: VM execution error: Reverted 0x4f4c44`","",""
"585532554720051210","commercium.sys","15/07/2021 9:13 am","What is up with that?","",""
"585532554720051210","commercium.sys","15/07/2021 9:21 am","it happens if I call `.observe([0, 600])` at block 12463427","",""
"585532554720051210","commercium.sys","15/07/2021 9:21 am","Please any help would be good, this is kind of concerning - could something like this ever happen on chain during the current block? And why could it happen?","",""
"585532554720051210","commercium.sys","15/07/2021 8:43 pm","^^ would be great to get some feedback on this üôÇ","",""
"135497428882292736","maxr2415","21/07/2021 3:26 am","just let people convert their tokens on one chain to a wrapped version of the token on another chain. For example WETH on polygon","",""
"135497428882292736","maxr2415","21/07/2021 3:32 am","have you tried using the uniswap oracle library for this, calling consult makes it simpler than computing it yourself from the observe output https://github.com/Uniswap/uniswap-v3-periphery/blob/b771ff9a20a0fd7c3233df0eb70d4fa084766cde/contracts/libraries/OracleLibrary.sol","",""
"135497428882292736","maxr2415","21/07/2021 3:33 am","which pool are you calling this on btw","",""
"585532554720051210","commercium.sys","21/07/2021 3:34 am","Eth/Dai .3%","",""
"585532554720051210","commercium.sys","21/07/2021 3:35 am","I need the raw tick data","",""
"585532554720051210","commercium.sys","21/07/2021 3:36 am","Also don‚Äôt know if that helps because the uniswap Oracle lib just makes a call to .observe with those same arguments","",""
"585532554720051210","commercium.sys","21/07/2021 3:36 am","That‚Äôs the concerning thing here - I need to know under what circumstances a call to .observe will fail","",""
"585532554720051210","commercium.sys","21/07/2021 3:36 am","I‚Äôll be deploying a contract that makes heavy use of these oracles","",""
"135497428882292736","maxr2415","21/07/2021 3:37 am","oh I think I know what may be the problem","",""
"135497428882292736","maxr2415","21/07/2021 3:38 am","there is a low probability that 600 secs may be before the earliest reported tick in the observations array","",""
"135497428882292736","maxr2415","21/07/2021 3:39 am","let me check the cardinality of that pool","",""
"135497428882292736","maxr2415","21/07/2021 3:48 am","","https://cdn.discordapp.com/attachments/737351374760837130/867168738981576734/unknown.png",""
"135497428882292736","maxr2415","21/07/2021 3:49 am","at 13 secs a block on average thats only 520 secs","",""
"135497428882292736","maxr2415","21/07/2021 3:49 am","so its more likely than not that 600 seconds is more than 40 blocks before the current block","",""
"135497428882292736","maxr2415","21/07/2021 3:50 am","if a trade happens every block on the pool then the observations will get updated every block","","üëç (1)"
"183309006767521792","jorropo","21/07/2021 3:50 am","You can increase it easly","",""
"135497428882292736","maxr2415","21/07/2021 3:50 am","you can call grow to increase cardinality","",""
"135497428882292736","maxr2415","21/07/2021 3:50 am","costs gas tho","",""
"183309006767521792","jorropo","21/07/2021 3:50 am","this isn't done by default for gas reasons","",""
"135497428882292736","maxr2415","21/07/2021 3:55 am","you may want to look at the distribution of total time to mine the number of blocks that you have and compare that to the seconds ago that you are calling for your oracle","https://cdn.discordapp.com/attachments/737351374760837130/867170354996838440/135497428882292736.png","üëç (1)"
"135497428882292736","maxr2415","21/07/2021 3:55 am","updated mean block time is more like 13 secs","",""
"135497428882292736","maxr2415","21/07/2021 3:56 am","those calcs are for cardinality 300","",""
"585532554720051210","commercium.sys","21/07/2021 3:58 am","Wouldn‚Äôt that result in an OLD revert message?","",""
"183309006767521792","jorropo","21/07/2021 3:59 am","I don't think so, old is for when the observation is too old compared to what you ask.
This is because the observation is too new. And older observations has been overwritten.","",""
"585644780164481064","houseofyogi","22/07/2021 7:08 pm","Hey - I am looking to chat w/ someone on the Uniswap team to help think through an optimization / token allocation issue for a Set the we have developed. Likely bringing it to UNI liquidity pool over its current centralization  through NAV issuance / oracle pricing which makes it issue from a gas perspective.","",""
"585532554720051210","commercium.sys","22/07/2021 10:27 pm","I don't understand. If there is an observation that is too new, that means you can't get to the old observations. So then it'd be old. And if the observation doesn't exist yet for the time you're wondering about, then it calls `transform()` and interpolates the should be value","",""
"585532554720051210","commercium.sys","22/07/2021 10:28 pm","If an older observation was overwrote by a new observation, then it just wouldn't be there","",""
"585532554720051210","commercium.sys","22/07/2021 10:34 pm","@smsunarto can we get any feedback from the team on this? the uniswap v3 oracle is providing mysterious revert messages. As a defi protocol, how are we going to build with it if we do not understand these inscrutable errors?","",""
"135497428882292736","maxr2415","23/07/2021 1:53 am","Suppose the earliest available observation is after the seconds ago call","",""
"135497428882292736","maxr2415","23/07/2021 1:54 am","then how would you linearly interpolate, it would be undefined","",""
"585532554720051210","commercium.sys","23/07/2021 4:49 am","there never is an undefined observation in the realm underneath the cardinality","",""
"585532554720051210","commercium.sys","23/07/2021 4:50 am","if the earliest observation, meaning the oldest observation, is after the seconds ago, then it should revert with OLD","",""
"383836935480803339","sendmoodz","27/07/2021 4:56 am","what pool address?","",""
"383836935480803339","sendmoodz","27/07/2021 4:56 am","the best thing to do when you encounter a surprising revert reason is to simulate the tx in something like tenderly","",""
"585532554720051210","commercium.sys","27/07/2021 4:58 am","The ETH/DAI .3% pool","",""
"585532554720051210","commercium.sys","27/07/2021 4:58 am","On a bike ride right now! Otherwise would be able to be immediately responsive","",""
"553009616615768074","malikolabiyi","28/07/2021 12:34 am","From this document: https://uniswap.org/docs/v2/smart-contract-integration/trading-from-a-smart-contract/

```
// amountOutMin must be retrieved from an oracle of some kind
address[] memory path = new address[](2);
path[0] = address(DAI);
path[1] = UniswapV2Router02.WETH();
UniswapV2Router02.swapExactTokensForETH(amountIn, amountOutMin, path, msg.sender, block.timestamp);
```
It says ""amountOutMin must be retrieved from an oracle of some kind"", how?","",""
"861361519366766613","awertz#6397","28/07/2021 3:58 am","@Malik You can use any oracle (chainlink, etc) to get the current spot price","",""
"861361519366766613","awertz#6397","28/07/2021 3:59 am","And use it to base the min tokens you're willing to receive","",""
"861361519366766613","awertz#6397","28/07/2021 3:59 am","Helps in the case of low liquidity (avoid too much slippage)","",""
"183309006767521792","jorropo","28/07/2021 3:59 am","that is centralised, pls avoid it.","",""
"861361519366766613","awertz#6397","28/07/2021 4:00 am","I'm trying to replace chainlink with uni oracle right now.","","üëç (1)"
"543664320181960725","triumph305","28/07/2021 7:43 am","hello, im brand new to solidity and im having issues trying to read ETH price data from uniswaps oracle. im trying to read in the price data to use inside of a flashloan","",""
"543664320181960725","triumph305","28/07/2021 7:48 am","is anyone available to chat and help me please?","",""
"183309006767521792","jorropo","28/07/2021 7:49 am","https://dontasktoask.com/ @triumph305","",""
"183309006767521792","jorropo","28/07/2021 7:49 am","@triumph305 just tell what is your issue","",""
"543664320181960725","triumph305","28/07/2021 7:56 am","i simply cannot find a guide or tutorial that explains that process. ive watched videos on youtube and googled around how to read in price data for ETH from 2 different decentralized exchanges. specifically uniswap and sushiswap are where id like to pull the data from. i ahve no idea if im googling with wrong terminology since im a noob and this is my second day in this world but i cant find a straightforward guide on doing what should be a simple task","",""
"183309006767521792","jorropo","28/07/2021 7:59 am","what is your goal ?","",""
"543664320181960725","triumph305","28/07/2021 8:01 am","im trying to learn. my end goal is to do something really simple which would be read in ETH/DAI data from a dex, use that price data in a flashloan to swap the borrowed DAI to ETH then swap it back from ETH to DAI, and lastly return the loan + fees","",""
"543664320181960725","triumph305","28/07/2021 8:01 am","i think i have most of the flashloan implemented. i just cant figure out how to pull in the price data so i can use that to calculate the amounts for the swaps","",""
"183309006767521792","jorropo","28/07/2021 8:02 am","Using which flashloan protocol ?
What swapping protocol do you target ?","",""
"543664320181960725","triumph305","28/07/2021 8:03 am","aave for flashloan protocol. not sure what you mean by the second question","",""
"183309006767521792","jorropo","28/07/2021 8:03 am","You want to do a swap using balancer ? Uniswap V2 ? Uniswap V3 ? Curve ? All of them have a different API to do swaps.","",""
"543664320181960725","triumph305","28/07/2021 8:03 am","oh uniswap v2 or v3 preferably. whichever is more straightforward","",""
"183309006767521792","jorropo","28/07/2021 8:04 am","For info you can do a flashloan + a swap for the cost of only a swap using uniswap. So you take less fees because you don't have the fees of AAVE.","",""
"183309006767521792","jorropo","28/07/2021 8:04 am","uniswap V2 is the most simple, 2 sec, let me pull some code","",""
"543664320181960725","triumph305","28/07/2021 8:05 am","right i dont think its necessarily the most efficient the way im trying to do it. i just think itll help me get exposure on various different tools/protocols of the space. im doing all this on a testnet so as to not ding myself with a bunch of real fees","",""
"543664320181960725","triumph305","28/07/2021 8:05 am","awesome thank you so much","",""
"183309006767521792","jorropo","28/07/2021 8:20 am","Actually I'm not gonna send you some raw codes like that (it's too much work üòÑ ).
Instead I think you should the `swapExactETHToTokens` function from the V2 router.
<https://github.com/Uniswap/uniswap-v2-periphery/blob/dda62473e2da448bc9cb8f4514dadda4aeede5f4/contracts/UniswapV2Router01.sol#L203-L216>
I would like you to understand it, it and **ALL** the functions called too.
If you want some pretty good insight you can debug on chain transactions using <https://dashboard.tenderly.co/explorer?utm_source=homepage>.","",""
"183309006767521792","jorropo","28/07/2021 8:22 am","@triumph305 if you have any questions (such as wtf are the equations), just ask in #üíª‚îÇdev-chat why are things that way, I'll respond if I see it (or someone else maybe)","",""
"553009616615768074","malikolabiyi","28/07/2021 1:35 pm","Like it's just the min tokens, shouldn't 0 even suffice (the transaction won't revert, I should still get it swapped)? And the last time I use Chainlink, I need to have some LINK for fees, isn't it? And that will be extract costs to the smart contract users too!","",""
"513683815022198789","farhan_km#2562","28/07/2021 2:19 pm","how can I get information about my LP position without Uniswap interface?","",""
"247814880097206272","sh1gur3","03/08/2021 6:35 pm","Use revert.finance","",""
"861652440960598067","Freddy#7258","07/08/2021 10:09 pm","So to code logic which executes transactions, it first needs to calculate the current price of a pair,
then it needs to find the correct pool, with the correct index range
once accomplished the transaction can be executedüò¨ ? 
I am new to V3","",""
"774350243226714112","ytrewq#8974","15/08/2021 1:55 pm","The way I understand it (currently building something with an Oracle too) is that you can get a quote knowing the pool's address already, and then you could use said address to execute a transaction too - not really sure as I'm only doing the first part though ü§î","",""
"861652440960598067","Freddy#7258","15/08/2021 10:41 pm","Hi thanks that u took the time to reply, my question was quite unstructured. It helps a lot ‚ò∫Ô∏è","",""
"862631121211752458","ECZ MikeQ#4485","16/08/2021 3:15 pm","Hi, I'm struggling to understand how Uniswap calculates the price displayed after a trade. The price derived from the ratio of y/x tokens displayed in the pool does not match the current price quoted at the bottom of the app.uniswap pool interface. Is it because the current quoted price is actually the TWAP ?","",""
"183309006767521792","jorropo","16/08/2021 4:26 pm","The price is not y/x, it's y/x but after price impact.","",""
"456226577798135808","Deleted User","17/08/2021 11:05 pm","Hey","",""
"861652440960598067","Freddy#7258","18/08/2021 7:46 pm","","https://cdn.discordapp.com/attachments/737351374760837130/877556591044489266/unknown.png",""
"861652440960598067","Freddy#7258","18/08/2021 7:47 pm","","https://cdn.discordapp.com/attachments/737351374760837130/877556809735475200/unknown.png",""
"861652440960598067","Freddy#7258","18/08/2021 7:48 pm","What am I doing wrong, I am getting a VM revert ü§î","",""
"861652440960598067","Freddy#7258","18/08/2021 7:48 pm","","https://cdn.discordapp.com/attachments/737351374760837130/877557009619247134/unknown.png",""
"861652440960598067","Freddy#7258","18/08/2021 7:48 pm","I Appreciate your help üôÇ","",""
"515726094775746560","Van Helsing#1716","20/08/2021 7:19 pm","What‚Äôs up there","",""
"531218024162787329","kree6291","23/08/2021 8:47 pm","The uniswap v3 whitepaper states oracles have a maximum of 65536 checkpoints, which is equivalent to ~9 days on layer 1. How does this work on Optimism given it doesn't have blocks but batches that seem more spread out timewise than the 13s of layer 1 ?","",""
"672427073695907841","julianmrodri","24/08/2021 8:08 pm","Hi im building a TWAP Oracle and wanted to understand the difference between OracleLibrary and WeightedOracleLibrary ? No sure which on I should be using. Also if there are some existing implementations of UniswapV3 TWAP Oracles would be great. Thanks!","",""
"345951322589364224","nchamo","24/08/2021 8:11 pm","The `WeightedOracleLibrary` was built to be used with different pools of the same pair. So for example, you want to know the price between USDC/WBTC. There can be different pools (0.05%, 0.3%, 1%). That library can help you weight the price between all pools, based on the liquidity on each one","",""
"672427073695907841","julianmrodri","24/08/2021 8:30 pm","Ok thanks in my case im just interested in a single pool. Should I use the `OracleLibrary` instead for that specific pool?","",""
"345951322589364224","nchamo","24/08/2021 8:31 pm","Exactly üòÑ","",""
"672427073695907841","julianmrodri","24/08/2021 8:36 pm","Thanks! Also wondering in that library what is the `getQuoteAtTick` for? Because I understand `consult` would give me the tick I need. I just need to convert the tick to the price right? Or I should aways use both together?","",""
"345951322589364224","nchamo","24/08/2021 8:37 pm","Someone posted this a while ago. It might help you
https://gist.github.com/branmcf/b0dbd01bc7056bfd05bf2ff6f59791ae","",""
"672427073695907841","julianmrodri","24/08/2021 8:37 pm","Amazing! thanks!","",""
"799382295584833587","Dilara#7228","25/08/2021 5:31 pm","Hi @everyone , How can I do a price reading from uniswap for the token in testnet?","",""
"774350243226714112","ytrewq#8974","26/08/2021 12:15 am","Hey guys, I'm trying to get the price of WETH/USDT using the Oracle library from `'@uniswap/v3-periphery/contracts/libraries/OracleLibrary.sol'` - having written the below code I'd expect it to return 3.23k, as the analytics dashboard would suggest https://info.uniswap.org/#/pools/0x11b815efb8f581194ae79006d24e0d814b7697f6 - but it instead returns this big number instead `404235885`.

Am I doing something wrong? Help would be very appreciated as I've been banging my head on this for a while. The documentation for `OracleLibrary` (well it's source code really) says that it returns `/// @return quoteAmount Amount of quoteToken received for baseAmount of baseToken` so that's why I was thinking it would give me 3.23k as the dashboard does. ü§î","https://cdn.discordapp.com/attachments/737351374760837130/880160995643916338/unknown.png",""
"774350243226714112","ytrewq#8974","26/08/2021 12:34 am","@Julian Rodriguez Actually, running the snippet that the other dude sent you returns the same number my snippet produced, and I see they use the same library method calls under the hood - could I ask you how you're turning this `404235885` number into the spot price? ü§î","",""
"774350243226714112","ytrewq#8974","26/08/2021 12:39 am","Ran it with these params:

```    const bn = await oracleInstance.getSpotPrice(
      ""0x11b815efb8f581194ae79006d24e0d814b7697f6"",
      60,
      1,
      ""0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2"",
      ""0x0d4a11d5eeaac28ec3f61d100daf4d40471f1852""
    );
    console.log(bn.toString());```

With `0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2` being WETH and `0x0d4a11d5eeaac28ec3f61d100daf4d40471f1852` being USDT. The first address in the list is ofc the pool as I got it from the analytics page.

Is it a problem that the pool is a V2 pool?","",""
"843155325619535912","Etherscan Bot#5753","26/08/2021 12:39 am","<https://etherscan.io/address/0x11b815efb8f581194ae79006d24e0d814b7697f6>","",""
"843155325619535912","Etherscan Bot#5753","26/08/2021 12:39 am","<https://etherscan.io/address/0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2>","",""
"843155325619535912","Etherscan Bot#5753","26/08/2021 12:39 am","<https://etherscan.io/address/0x0d4a11d5eeaac28ec3f61d100daf4d40471f1852>","",""
"799382295584833587","Dilara#7228","26/08/2021 10:55 am","Hi @Jorropo.eth , Do you have any idea about it? Actually I'm wondering, is there a subgraph for Testnet?","",""
"672427073695907841","julianmrodri","26/08/2021 5:10 pm","Not sure, is this Mainnet? Have you found something? I would assume it returns a plain amount so it wouldnt require additional transformations but need to try it.","",""
"774350243226714112","ytrewq#8974","26/08/2021 8:11 pm","Yeah it's Mainnet","",""
"672427073695907841","julianmrodri","26/08/2021 10:52 pm","So Im getting now 320444853 with your parameters. A little bit closer still I think its higher than what the UI shows.","",""
"774350243226714112","ytrewq#8974","26/08/2021 11:06 pm","Hmm well both the snippet the guy shared and my code use the same functions from the Oracle library, so either there is something wrong with the library or there is some processing we need to do to that number. ü§î Perhaps it's the price in some other notation? Or to the power of something?","",""
"672427073695907841","julianmrodri","26/08/2021 11:14 pm","I think there are 2 issues. One is the token you use for USDT (address seems to be wrong). The other one is you are passing a very small value 1, and probably you want to do 1e18","",""
"672427073695907841","julianmrodri","26/08/2021 11:16 pm","Isnt USDT in Mainnet: `0xdac17f958d2ee523a2206206994597c13d831ec7` ?","",""
"672427073695907841","julianmrodri","26/08/2021 11:19 pm","Price you need to scale to the decimals of Token2 (token out)","",""
"672427073695907841","julianmrodri","26/08/2021 11:19 pm","(I mean the result)","",""
"672427073695907841","julianmrodri","26/08/2021 11:19 pm","But I think I have it working now with the fixes I mentioned","",""
"774350243226714112","ytrewq#8974","26/08/2021 11:21 pm","Alright man, thanks a bunch, I'll get to fixing my code so it produces the same result üôÇ","",""
"672427073695907841","julianmrodri","26/08/2021 11:21 pm","Where did you get the Token address for USDT?","",""
"672427073695907841","julianmrodri","26/08/2021 11:22 pm","First lets solve that mistery because for the Pool that you copied thats not the token I think.","",""
"672427073695907841","julianmrodri","26/08/2021 11:24 pm","Code its fine its all parameters you send the problem","",""
"774350243226714112","ytrewq#8974","26/08/2021 11:26 pm","Searched for it on Etherscan.io > https://etherscan.io/token/0xdac17f958d2ee523a2206206994597c13d831ec7","",""
"774350243226714112","ytrewq#8974","26/08/2021 11:27 pm","Yeah now I fetched it from the pool links, and I see it's another one üëç","",""
"672427073695907841","julianmrodri","26/08/2021 11:30 pm","The other issue is the scale of the input amout.. 1 is 1 wei es very small.. if you want to quote 1 ETH you should pass 1e18 (1000000000000000000). You can use conversion functions to from `wei` to `eth`","",""
"774350243226714112","ytrewq#8974","26/08/2021 11:31 pm","So, I just tried that but the number returned now is also quite large `404235885710192759254146305` - you mentioned I'm supposed to do something with the second token too?","",""
"672427073695907841","julianmrodri","26/08/2021 11:31 pm","For example `ethers.utils.parseEther('1')`","",""
"672427073695907841","julianmrodri","26/08/2021 11:32 pm","thats wrong pal.. check number formatting","",""
"672427073695907841","julianmrodri","26/08/2021 11:32 pm","when sending the amount","",""
"672427073695907841","julianmrodri","26/08/2021 11:32 pm","You should be getting `3114738427`","",""
"774350243226714112","ytrewq#8974","26/08/2021 11:32 pm","Guessing solidity doesn't support me just calling it `1e18` üôà","https://cdn.discordapp.com/attachments/737351374760837130/880512573668229160/unknown.png",""
"774350243226714112","ytrewq#8974","26/08/2021 11:32 pm","Ahh and then that's wei, so I would convert it to ETH?","",""
"672427073695907841","julianmrodri","26/08/2021 11:32 pm","No but dont harcode the amount there","",""
"672427073695907841","julianmrodri","26/08/2021 11:33 pm","oh ok .sorry you had a function for 1 unit..","",""
"774350243226714112","ytrewq#8974","26/08/2021 11:33 pm","Yeah this is just for testing purposes, console-logging it as a `.toSTring()` in my truffle test in another tab","",""
"672427073695907841","julianmrodri","26/08/2021 11:33 pm","you can just put `1 ether` I think","",""
"672427073695907841","julianmrodri","26/08/2021 11:34 pm","also you inverted the tokens","",""
"672427073695907841","julianmrodri","26/08/2021 11:34 pm","Weth was your input now is your output?","",""
"774350243226714112","ytrewq#8974","26/08/2021 11:34 pm","Oh, alright, the params are flipped, but still, `3114738427` - I'm curious - this number is quite larger then the quoted one on the analytics page - how do I convert it to the actual price? ü§î","",""
"774350243226714112","ytrewq#8974","26/08/2021 11:34 pm","fixing that right away üò¨","",""
"672427073695907841","julianmrodri","26/08/2021 11:36 pm","`3114738427` is the price of 1 WETH in USDT. USDT uses 6 decimals. So it is 3114.738427","","üôè (1),üíØ (1),ü§å (1)"
"774350243226714112","ytrewq#8974","26/08/2021 11:36 pm","Ohhh, man you saved me so much time, I've been trying to crack this for 2-3 evenings now, thanks, wish there was a tip button here","",""
"672427073695907841","julianmrodri","26/08/2021 11:37 pm","Be careful if you do an oracle against another token the `decimals` may change. Every ERC20 has a `decimals` property whcih is the one you should use to scale the result to a decimal","",""
"774350243226714112","ytrewq#8974","26/08/2021 11:37 pm","My next questions was exactly how you knew that it had 6 decimals, that clears it up ü§©","",""
"672427073695907841","julianmrodri","26/08/2021 11:39 pm","https://etherscan.io/address/0xdac17f958d2ee523a2206206994597c13d831ec7#readContract","",""
"672427073695907841","julianmrodri","26/08/2021 11:39 pm","Check for example Read Contract and click on decimals.","",""
"672427073695907841","julianmrodri","26/08/2021 11:40 pm","Either use etherscan or look at the contract code","",""
"774350243226714112","ytrewq#8974","26/08/2021 11:43 pm","Right, since its a part of the ERC20 standard, that makes a lot of sense üëç","",""
"672427073695907841","julianmrodri","27/08/2021 12:06 am","Did a simple test to understand what happens if you flip the tokens. If you put USDT as tokenIn and WETH as token out then the amount you request has to be based on USDT scale, so it should be 1000000 (1 USDT) this returns something like `322824821351959` which is in base 18 decimals (its WETH), so you convert those wei to ETH and its about 0.00032... (what you get in ETH for 1 USDT).","",""
"774350243226714112","ytrewq#8974","27/08/2021 12:07 am","So it's still functional, just with flipped values - you get the base token quoted, I understand. I put the addresses into their correct spots, and then removed 6 decimals from the result, which produced the correct price, so you were right, it was the input params that were wrong. üôÇ","",""
"759443905862303764","davidtuc","27/08/2021 8:22 pm","Hi guys! I'm new here. I would like to know if is there a way to query spot prices in Polygon network ? I was trying with   uniswap.Fetcher.fetchPairData(DAI, uniswap.WETH[chainId])  @uniswap/sdk,  this works in Ethereum net, but it seems to be not compatible with Polygon. Any advice ? TY","",""
"617127949480493077","yj_alt","31/08/2021 3:44 pm","huh? Uniswap is not on Polygon. For Uniswap-v3 on L2, only Optimism and Arbitrum currently.","",""
"759443905862303764","davidtuc","31/08/2021 7:19 pm","Ok thank you","",""
"208302193311219713","Drew_#0452","07/09/2021 9:35 am","is the optimism oracle the same as the L1 oracle? Or is it possible that they get out of sync with each other?","",""
"208302193311219713","Drew_#0452","07/09/2021 9:35 am","i.e. they are two separate oracles","",""
"183309006767521792","jorropo","07/09/2021 9:37 am","They are two different instances of the same things.","",""
"183309006767521792","jorropo","07/09/2021 9:38 am","They are different and may get out of sync.","",""
"183309006767521792","jorropo","07/09/2021 9:38 am","However keeping them out of sync for long should be really really hard because arbitrage bot should kick in fast to fix that.","",""
"208302193311219713","Drew_#0452","07/09/2021 9:38 am","gotcha gotcha, thanks!","",""
"399617942087532545","_connormartin","08/09/2021 3:19 am","they will get out of sync - absolutely. optimism can still pause their sequencer.","",""
"183309006767521792","jorropo","08/09/2021 4:13 am","isn't optimism supposed to run but in a degraded state if the sequencer is down ? (or it is arbitrum ?)","",""
"183309006767521792","jorropo","08/09/2021 4:13 am","I belive it's arbitrum actually, because optimism doesn't binary search the stakes (unlike arbitrum).","",""
"709174257980276737","t_loor","10/09/2021 3:11 am","How do you query the available liquidity at the current price?","",""
"805398721084915712","zackcha","10/09/2021 9:26 am","Hello guys, I am very new to this oracle topic. Do you have any article or documents for me to get a basic knowledge?","",""
"709174257980276737","t_loor","10/09/2021 8:01 pm","@zackcha The doc links off of the overview page seem to be broken. There used to be a page with a kind of description of how to call observe() and get the current price (if that's what you're after). If you're trying to get liquidity info, though, that's the same thing I'm waiting for advice on.","",""
"709174257980276737","t_loor","10/09/2021 8:02 pm","If you're trying to get current price from the pool, I can try to post an overview of how I'm doing that.","",""
"501144180207255554","SaraReynolds#8454","10/09/2021 10:41 pm","Hi, which links are broken? Will take a look and fix","",""
"709174257980276737","t_loor","10/09/2021 10:49 pm","Link from v3 overview to oracles. And I can't seem to find the one that described the one that described how to get current price from the observe results","",""
"501144180207255554","SaraReynolds#8454","10/09/2021 11:17 pm","Was it the oracle reference? https://docs.uniswap.org/protocol/reference/core/libraries/Oracle","",""
"709174257980276737","t_loor","10/09/2021 11:33 pm","https://docs.uniswap.org/protocol/reference/core/libraries/Oracles on https://docs.uniswap.org/protocol/concepts/V3-overview/oracle#oracle","",""
"709174257980276737","t_loor","10/09/2021 11:33 pm","I was out driving around","",""
"585532554720051210","commercium.sys","13/09/2021 6:08 am","Has anyone made a wrapper around the oracle library that finds the multi hop TWAP across a path of pools?","",""
"805398721084915712","zackcha","13/09/2021 3:46 pm","Thanks! That answers my question.","",""
"850562727066861588","Meh#3821","16/09/2021 8:06 am","Hi","",""
"850562727066861588","Meh#3821","16/09/2021 8:06 am","I'm having some issue with the building oracle for uniswap v2","",""
"850562727066861588","Meh#3821","16/09/2021 8:08 am","After multiple update() call, the price seems to revert to this random number (156302312) that is not the current price of the token","",""
"861211024308699137","caesar#7629","16/09/2021 6:35 pm","Hi, I need help","",""
"861211024308699137","caesar#7629","16/09/2021 6:35 pm","I have problems to get Uniswap‚Äôs TWAP price on arbitrum. I think it has something to do with sequencer. Any ideas?","",""
"850562727066861588","Meh#3821","16/09/2021 8:51 pm","Same issue, Have you figured it out?","",""
"861211024308699137","caesar#7629","16/09/2021 8:52 pm","Not yet, are you deploying to arbitrum?","",""
"850562727066861588","Meh#3821","16/09/2021 8:54 pm","Yes","",""
"850562727066861588","Meh#3821","16/09/2021 8:54 pm","The problem seems to be the update() function","",""
"850562727066861588","Meh#3821","16/09/2021 8:55 pm","If you update the price will tend to a random number instead of correct price","",""
"850562727066861588","Meh#3821","16/09/2021 8:55 pm","This is for a custom new pair btw","",""
"861211024308699137","caesar#7629","16/09/2021 9:02 pm","Uniswap in arbitrum is V3 btw, not V2","",""
"861211024308699137","caesar#7629","16/09/2021 9:04 pm","I always got 0 for all tokens price","",""
"183309006767521792","jorropo","16/09/2021 9:04 pm","Does the pair for your target exists and have enough liquidity ?","",""
"850562727066861588","Meh#3821","16/09/2021 9:05 pm","I'm actually using sushiswap","",""
"850562727066861588","Meh#3821","16/09/2021 9:05 pm","The v2 fork version","",""
"183309006767521792","jorropo","16/09/2021 9:05 pm","@caesar uniswap on L2 and L1 are autonomous, you need people to actively move their stuff to L2. You can't call L1 oracles info from L2.","",""
"183309006767521792","jorropo","16/09/2021 9:05 pm","The V3 oracles are much better to use","",""
"861211024308699137","caesar#7629","16/09/2021 9:07 pm","Yes, the pair is exist in L2 & have enough liquidity. Previously it was run well, but after sequencer bug happen, I always got 0","",""
"861211024308699137","caesar#7629","16/09/2021 9:10 pm","I think it has something to do with sequencer","",""
"183309006767521792","jorropo","16/09/2021 9:11 pm","Does the observation buffer is big enough ?","",""
"861211024308699137","caesar#7629","16/09/2021 9:11 pm","Does the pair correct?","",""
"183309006767521792","jorropo","16/09/2021 9:11 pm","Why do you think that ? Is that just dark magic or you have actual data to back this up ?","",""
"861211024308699137","caesar#7629","16/09/2021 9:17 pm","I'm not sure about that, I just fork Brett Sun's UniswapV3CrossPoolOracle in ethereum to deploy in arbitrum","",""
"861211024308699137","caesar#7629","16/09/2021 9:19 pm","No proof, but Uniswap says that arbitrum sequencer introduces an additional trust assumption for developers using v3 price feeds","",""
"850562727066861588","Meh#3821","17/09/2021 2:08 am","Yes","",""
"850562727066861588","Meh#3821","17/09/2021 2:08 am","It's the correct pair","",""
"850562727066861588","Meh#3821","17/09/2021 2:09 am","getData() works","",""
"850562727066861588","Meh#3821","17/09/2021 2:09 am","But when you call update() the second time, it messed up the price feed","",""
"850562727066861588","Meh#3821","17/09/2021 2:10 am","The price feed is not even remotely related to the actual price, so not sure what it is","",""
"752206862568652831","pechnatunk","17/09/2021 7:07 am","Hi, what is wrong with the price oracles on Arbitrum and Optimism?
The eth price seems to be ""stuck"" at ~3505  for the Eth-USDC and eth-USDT","",""
"752206862568652831","pechnatunk","17/09/2021 7:10 am","And - do the pools with the ""frozen"" price still collect fees?","",""
"370231100850831380","hack3r_0m","21/09/2021 1:24 pm","hi uniswap dev team, why oracle prices are crazy on testnet? i am not able to test my stuff because of it https://rinkeby.etherscan.io/address/0xe456B4506d92A1EC61275bD37801150E543D2693#readContract.

how can i get mainnet-like prices on testnet?","",""
"641534365616177152","simon__wang","21/09/2021 3:23 pm","Hi, how can I use uniswapV3 oracle in the smart contract to get the price? In fact, I want to ask how to calculate the n-th power of 1.0001 in the contract. Is there any example code? Thank you.","",""
"370231100850831380","hack3r_0m","22/09/2021 12:38 am","anyone?","",""
"585532554720051210","commercium.sys","22/09/2021 5:23 am","Is this the correct way to get the average liquidity from the twap?","",""
"585532554720051210","commercium.sys","22/09/2021 5:24 am","```
       ( int56[] memory _ticks, uint160[] memory _invLiqs ) = IUniswapV3Pool(feed).observe(_secondsAgo);
       uint _liquidity = (uint160(microWindow) << 128) / ( _invLiqs[1] - _invLiqs[0] );
```
where secondsAgo is an array of decreasing numbers from indexes 0 to n","",""
"585532554720051210","commercium.sys","22/09/2021 5:27 am","are the liquidity cumulatives storing inverse values? ie `1/liquidity`?","",""
"585532554720051210","commercium.sys","22/09/2021 5:28 am","how do we renormalize it out of inverse format?","",""
"585532554720051210","commercium.sys","22/09/2021 5:28 am","what is one in this circumstance?","",""
"585532554720051210","commercium.sys","22/09/2021 5:37 am","https://tenor.com/view/thank-you-for-your-help-cartman-south-park-appreciate-it-thank-you-gif-21989082","",""
"585532554720051210","commercium.sys","22/09/2021 5:37 am","thanks for the help we figured it out!","",""
"585532554720051210","commercium.sys","22/09/2021 7:33 am","So now that I have an average tick/price, and liquidity, I want to calculate the virtual x & y reserves, is there anything that I should be aware of when trying to take the square root of the price?","",""
"473245575991787530","mikey.rf#0121","22/09/2021 7:53 pm","Think we figured it out again! Ty sers üôè","",""
"473245575991787530","mikey.rf#0121","22/09/2021 7:53 pm","https://tenor.com/view/cat-yes-agree-nod-nodding-gif-17512051","",""
"370231100850831380","hack3r_0m","23/09/2021 8:27 pm","@Noah Zinsmeister @moody üí≠ ?","",""
"182969707299733504","noahzinsmeister","24/09/2021 1:20 am","no one arbs pools on testnet","","üòÇ (1)"
"370231100850831380","hack3r_0m","25/09/2021 6:48 am","then what would be best way to test dapp against v3 oracle? mainnet forking?","","üëç (1)"
"135497428882292736","maxr2415","27/09/2021 10:04 pm","Any devs in here understand how uniswap treats token decimals","",""
"183309006767521792","jorropo","27/09/2021 10:34 pm","V2 doesn't.
V3 compensate for them in exponential calculations to keep the factor constant","",""
"494595511609720833","Mikkel R#8542","30/09/2021 6:21 pm","To get the actual price P, you need to convert the number returned from the contract Pc like this: P = (Pc/(2^96))^2. So as an example, querying the LINK-WETH Contract here: https://etherscan.io/address/0xa6cc3c2531fdaa6ae1a3ca84c2855806728693e8#readContract, the price returned from the contract is Pc = 7088292167557556414539235337 - so the actual price is: P = (7088292167557556414539235337/2^96)^2 = 0.00800431281","",""
"494595511609720833","Mikkel R#8542","30/09/2021 6:28 pm","When I look at the number of tokens in the WETH-LINK contract, I can see there are 1.2m LINK tokens and 4920 WETH in the pool. So the Liquidity I am expecting is L ~ sqrt((1.2m)*(4920)) ~ 76837.  However, when I query the contract I get the number, L = 434216495839084109286172. Can someone please elaborate how I need to transform that number to get the liquidity","",""
"399617942087532545","_connormartin","30/09/2021 8:14 pm","‚òï --- Uniswap Labs Developer Office Hours #4 ---‚òï 

Thursday (TODAY) at 1PM EST on Discord

Add it to your calendar to keep track of this and future events!

https://calendar.google.com/event?action=TEMPLATE&tmeid=bTl2aGVkbDFmZDRwY2JoOWxrdGdpanFjcWhfMjAyMTA5MzBUMTcwMDAwWiBjX2xhcmY5aGE5NnZoN3FmajA5b2prbmg3MHNjQGc&tmsrc=c_larf9ha96vh7qfj09ojknh70sc%40group.calendar.google.com&scp=ALL","",""
"773558050719531018","Hanna_mel#5113","30/09/2021 9:42 pm","up. I'm interested too.","",""
"617127949480493077","yj_alt","01/10/2021 6:18 am","For v3? Please read the uniswap v3 whitepaper.","",""
"617127949480493077","yj_alt","01/10/2021 6:19 am","‚òùÔ∏è","",""
"773558050719531018","Hanna_mel#5113","01/10/2021 2:31 pm","already did red it several times and even demonstrated the whole math of tt. There is no hint at all in the white paper about the unit of L (comming back to @Mikkel R 's question about this ""L = 434216495839084109286172. Can someone please elaborate how I need to transform that number to get the liquidity"")","",""
"617127949480493077","yj_alt","01/10/2021 3:23 pm","That number **is** the ""liquidity"" as defined in the whitepaper. Have you looked through @kfx 's technical note on v3 maths as well?","","ü¶Ñ (1)"
"617127949480493077","yj_alt","01/10/2021 3:23 pm","https://github.com/atiselsts/uniswap-v3-liquidity-math","",""
"617127949480493077","yj_alt","01/10/2021 3:25 pm","From the equations, I guess if you wanted to assign a ""units"" (like in physics) to L, it'll be something like `token/sqrt(price)` ?","",""
"773558050719531018","Hanna_mel#5113","01/10/2021 3:25 pm","oh very interesting one. I'll check this out thanks a lot !","","üëç (1)"
"773558050719531018","Hanna_mel#5113","01/10/2021 3:26 pm","good point. I'll test this today by requesting the contract and let you know üôÇ","","üëç (1)"
"773558050719531018","Hanna_mel#5113","04/10/2021 7:16 pm","Hi ! I've been through the three python code examples and there is one thing that I did not understood : In the example output of subgraph-liquidity-range-example.py, why you write ""potentially"" to express the liquidity available for token0 and token1 in a given tick range ? Isn't it exact numbers ? Or it is an estimation ?","",""
"773558050719531018","Hanna_mel#5113","04/10/2021 7:17 pm","Example : tick=195660 price=3184.336897 USDC for WETH 1193.68 WETH locked (POTENTIALLY worth 3789699.28 USDC)","",""
"773558050719531018","Hanna_mel#5113","04/10/2021 8:31 pm","and, is this ""tick"" the bottomTick of the smallest possible tick range based on the pool's tick spacing ?","",""
"617127949480493077","yj_alt","04/10/2021 8:41 pm","remember that in v3 anything ""out of range"" will be 100% in one token (of the pair) only.","",""
"617127949480493077","yj_alt","04/10/2021 8:42 pm","So he's just saying that for ticks that do not contain the current price tick, the liquidity is currently 100% in one token, at some price-ratio (that is currently not real)","",""
"617127949480493077","yj_alt","04/10/2021 8:43 pm","Hence X amount of token x locked, *potentially* worth Y amount of token y, if the price moves to that tick","",""
"617127949480493077","yj_alt","04/10/2021 8:43 pm","But the price might not/never move there (for example, think about near infinity price ratio), so it's just *potentially* worth that much, but not *really* worth that much right now..","",""
"617127949480493077","yj_alt","04/10/2021 8:45 pm","The ticks are just the bottom ticks which are valid given the tick interval for that fee tier.","",""
"617127949480493077","yj_alt","04/10/2021 8:45 pm","There have been some updates to the repo, explaining things a bit more clearly. I've also updated my Jupyter notebooks (showing output) to match.","",""
"617127949480493077","yj_alt","04/10/2021 8:46 pm","https://github.com/uniyj/uni-v3-peri/tree/main/atiselsts-uniswap-v3-liquidity-math","",""
"773558050719531018","Hanna_mel#5113","04/10/2021 8:49 pm","Thank you so much for the clarification ! Makes total sense. The python scripts and jupyter notebooks are amazing.","",""
"617127949480493077","yj_alt","04/10/2021 9:25 pm","No probs. You should thank @kfx üòÇ","",""
"685431154257821711","Hackzore Borris#3490","05/10/2021 8:23 pm","Hello! 

I might be posting this on the wrong channel but, 
Does anyone know any  `VRF ‚Äî Verifiable Random Function` oracle available on Polygon and Ethereum?
( Anything else **free to use or cheaper** than Chainlink )","",""
"183309006767521792","jorropo","05/10/2021 11:38 pm","Commit - Reveal - Hash does the same thing except it's free, decentralised, requires no third party service and is actually safer.","",""
"414462029173096450","dguido3xfund","15/10/2021 3:39 pm","Check out what XFUND has to offer with VOR","",""
"414462029173096450","dguido3xfund","15/10/2021 3:40 pm","Unification Fund that is","",""
"884662978950082560","sonal#7732","17/10/2021 10:27 pm","Hi everyone
We are opening a cryptocurrency exchange based out of India, we are already well established financial advisory firm but now looking for our way in the bitcoin world. We therefore are looking for technical people in the domain, who have technical experience in the field of cryptocurrency. Please help me with any and let me know if you are interested for the same.","",""
"215815959691264000","eselyx","21/10/2021 12:46 am","I want to build my own oracle and update every time after a swap. However in V3 there are no Swap events as V2 used to have. Why? What else am I supposed to use?","",""
"617127949480493077","yj_alt","21/10/2021 10:04 am","https://github.com/Uniswap/v3-core/search?q=event+Swap","",""
"471357824299958273","crypto_rachel","21/10/2021 10:10 am","for V3 you would want to use the data in the oracle observations","",""
"617127949480493077","yj_alt","21/10/2021 10:11 am","Yeah, best listen to Crypto_Rachel instead of my random github search üòÜ","",""
"471357824299958273","crypto_rachel","21/10/2021 10:12 am","üòä .","",""
"471357824299958273","crypto_rachel","21/10/2021 10:31 am","tbh I don't know a lot about it outside of the fact its basically a twap","",""
"215815959691264000","eselyx","21/10/2021 7:37 pm","Yes thanks! There actually are events, just not in the documentation","",""
"215815959691264000","eselyx","21/10/2021 7:38 pm","Yes but I'm using the events to re-run the fetch","",""
"399617942087532545","_connormartin","22/10/2021 9:06 pm","the v3 oracle updates itself with the first state changing call every block, so if your goal is to update the oracle every block - thats already done for you.","",""
"215815959691264000","eselyx","22/10/2021 9:07 pm","No my goal was to update the oracle after every swap. I'm using the Swap events to do that","",""
"215815959691264000","eselyx","22/10/2021 9:07 pm","But for some reason (while they do exist, yay!) they are not included in the V3 Documentation","",""
"215815959691264000","eselyx","22/10/2021 9:07 pm","So I had to search them on etherscan","",""
"399617942087532545","_connormartin","22/10/2021 9:08 pm","updating an oracle upon every swap inside of a block wouldn't make much sense afaik - why is an on-chain price feed of a pool on a per-swap basis useful to you?","",""
"399617942087532545","_connormartin","22/10/2021 9:09 pm","unless you're aggregating over them beyond the span of the current block, your price feed would be vulnerable to manipulation via intrablock flash loan types of transactions","",""
"215815959691264000","eselyx","22/10/2021 9:11 pm","Currently I'm simply grabbing the current price after every swap (since the price changes after each swap). Rn I'm working on the TWAPs so that I can compare current price with TWAPs and use the (for me) more favorable price in case there is an X+% difference","",""
"215815959691264000","eselyx","22/10/2021 9:11 pm","However I might end up just storing the current price myself to create my own TWAPs, not sure which option is more efficient","",""
"215815959691264000","eselyx","22/10/2021 9:12 pm","In case it's not clear, this is not on-chain, it's running on my javascript server connected to alchemy","",""
"399617942087532545","_connormartin","22/10/2021 9:12 pm","ah, yeah calling that an oracle is a bit of a misnomer","",""
"215815959691264000","eselyx","22/10/2021 9:12 pm","Well I want to build an oracle in the end but for my portfolio","",""
"215815959691264000","eselyx","22/10/2021 9:12 pm","so I will use that to calculate the portfolio price and then put that on-chain","",""
"399617942087532545","_connormartin","22/10/2021 9:13 pm","and your priority is data freshness rather than price manipulation resistance?","",""
"399617942087532545","_connormartin","22/10/2021 9:13 pm","there will be many ways that this may be vulnerable to manipualtion","",""
"399617942087532545","_connormartin","22/10/2021 9:14 pm","so please tread carefully","",""
"215815959691264000","eselyx","22/10/2021 9:14 pm","Both is important, I will end up calculating buy and sell price of the portfolio, so there will be a spread.","",""
"215815959691264000","eselyx","22/10/2021 9:14 pm","So I'm either using the current price or a TWAP depending on which one if more favorable to me","",""
"215815959691264000","eselyx","22/10/2021 9:15 pm","e.g current price of the asset is 500, TWAP is 700 

=> using 500 to calculate the sell price
=> using 700 to calculate the buy price","",""
"399617942087532545","_connormartin","22/10/2021 9:16 pm","for intrablock prices you can call the oracle and pass in a time that is less than 15 seconds ago, or a time of 0, and you will get the current price of the pool as if the block were mined at that moment","",""
"215815959691264000","eselyx","22/10/2021 9:17 pm","Yeah I just wanted to run the price-fetching once the application starts and then only when it updates","",""
"215815959691264000","eselyx","22/10/2021 9:17 pm","that's why I asked about the events","",""
"215815959691264000","eselyx","22/10/2021 9:17 pm","I'm listening to the event and on Swap event I run the price-fetch","",""
"399617942087532545","_connormartin","22/10/2021 9:17 pm","i would run it per block tbh","",""
"399617942087532545","_connormartin","22/10/2021 9:18 pm","you'll get inaccurate prices if you use mid block data","",""
"399617942087532545","_connormartin","22/10/2021 9:18 pm","but you do you","",""
"215815959691264000","eselyx","22/10/2021 9:18 pm","Didn't knew about that","",""
"215815959691264000","eselyx","22/10/2021 9:18 pm","Thanks for the tip!","",""
"215815959691264000","eselyx","22/10/2021 9:19 pm","I gtg now but I will ask again if I run into any issues. Thank you for the support!","",""
"215815959691264000","eselyx","25/10/2021 3:51 pm","I'm back from my short vacation (visited my grandma!). Could you explain this one a bit more please?","",""
"215815959691264000","eselyx","25/10/2021 3:51 pm","I'm not really sure what you mean by that. I'm not sure whether or not I am using mid block data","",""
"215815959691264000","eselyx","25/10/2021 3:51 pm","How would I even run it per block in web3?","",""
"399617942087532545","_connormartin","25/10/2021 6:26 pm","a spot price retrieved from the middle of a block can be grossly manipulated by a flash loan style transaction where a user withdraws millions of tokens and uses them to push the price, exploit the downstream effect, then push the price back to its original place without ever having the capital used for the attack at risk","",""
"399617942087532545","_connormartin","25/10/2021 6:26 pm","atomic flash style attacks are impossible to execute across blocks, because the attacker will have their inaccurate pools arbitraged and they'll lose their money.","",""
"399617942087532545","_connormartin","25/10/2021 6:27 pm","this kind of thing is covered in many articles on oracle attacks","",""
"399617942087532545","_connormartin","25/10/2021 6:27 pm","this is why people create twaps that average a price over the span of 2 or more blocks","",""
"215815959691264000","eselyx","26/10/2021 5:11 am","Alright, I understand! But... how would one even use per-block data? And can't I just create a TWAP over 2 blocks, as you mentioned, after every SWAP to solve this issue then?","",""
"215815959691264000","eselyx","26/10/2021 5:12 am","To be honest I'm not exactly sure how Alchemy works, but I was under the impression that the data used is always after a final block","",""
"215815959691264000","eselyx","26/10/2021 6:30 am","Is the ""OracleLibrary"" deployed? Where can I find the address?","",""
"399617942087532545","_connormartin","27/10/2021 3:13 am","yes essentially you'll need to create a 2 block twap to avoid many forms of intrablock price manipulation","",""
"215815959691264000","eselyx","27/10/2021 3:14 am","Thanks! Can I use the OracleLibrary, if yes, how?","",""
"215815959691264000","eselyx","27/10/2021 3:14 am","I've only found the Quoter contract","",""
"215815959691264000","eselyx","27/10/2021 3:15 am","The OracleLibrary seems to be the most convenient way but I was unable to find an address","",""
"399617942087532545","_connormartin","27/10/2021 3:15 am","its a library so it is not deployed with a contract address, you need to import the ABI into you contract, then deploy your own and inside of it will be the oracle library","",""
"399617942087532545","_connormartin","27/10/2021 3:16 am","its a little confusing - would spend a bit of time looking at contracts vs libraries","",""
"215815959691264000","eselyx","28/10/2021 6:40 am","""Anyone can pay the SSTOREs to increase the maximum length of the oracle array.""","",""
"215815959691264000","eselyx","28/10/2021 6:40 am","how do I do that?","",""
"471357824299958273","crypto_rachel","28/10/2021 6:46 am","you would call 
function increaseObservationCardinalityNext(uint16 observationCardinalityNext)","https://cdn.discordapp.com/attachments/737351374760837130/903089908690853948/OL33.png",""
"215815959691264000","eselyx","28/10/2021 6:47 am","How often would I have to call that?","",""
"215815959691264000","eselyx","28/10/2021 6:48 am","like, right now observe doesn't allow any times after the last swap","",""
"471357824299958273","crypto_rachel","28/10/2021 6:48 am","you call it once to increase the observation period","",""
"215815959691264000","eselyx","28/10/2021 6:48 am","if I call it once I assume it allows up to the second last swap?","",""
"215815959691264000","eselyx","28/10/2021 6:49 am","the period is measured in swaps, right?","",""
"471357824299958273","crypto_rachel","28/10/2021 6:51 am","this is for the twap pricing 
maybe this will help
https://docs.uniswap.org/protocol/concepts/V3-overview/oracle","",""
"215815959691264000","eselyx","28/10/2021 6:54 am","yes","",""
"215815959691264000","eselyx","28/10/2021 6:54 am","thanks","","üëç (3)"
"861361519366766613","awertz#6397","29/10/2021 4:14 am","Any studies on uniswap oracle pricing vs chainlink, say, for ETH/USD?","",""
"861361519366766613","awertz#6397","29/10/2021 4:15 am","We've been looking at switching to uniswap for a while, for obvious reasons, but have concerns around a delta between off-chain and on-chain prices (it's important to us)","",""
"861361519366766613","awertz#6397","29/10/2021 4:17 am","& also wondering who is tracking observation cardinality, ensuring oracle can remain robust","",""
"183309006767521792","jorropo","29/10/2021 4:42 am","Once you have grown the buffer, the swappers themself are forced to save the observation","",""
"183309006767521792","jorropo","29/10/2021 4:42 am","(you first need to grow the buffer to avoid heavy gas costs of initialising empty slots if no one use the oracle)","",""
"183309006767521792","jorropo","29/10/2021 4:44 am","The off-chain vs on-chain price depends a lot of the actual price of uniswap (whoa a surprise).
If you are doing it for USDC / ETH let's say, you are likely fine, it's one of the biggest pool it's very well arbitraged.","",""
"183309006767521792","jorropo","29/10/2021 4:44 am","But smaller pools depends.","",""
"215815959691264000","eselyx","29/10/2021 7:25 am","A question regarding TWAPs:","",""
"215815959691264000","eselyx","29/10/2021 7:25 am","The motivation for TWAPs appears to make the oracle resistant to e.g flash loan attacks","",""
"215815959691264000","eselyx","29/10/2021 7:26 am","But since it can only store a limited number of observations, can't you simply do multiple trades with a flash loan to fill all of the slots with your manipulated price?","",""
"215815959691264000","eselyx","29/10/2021 7:28 am","Of course this would be more expensive. However rather than filling up the observations with the newest price every time, wouldn't it make sense to e.g keep 1 slot that saves the highest price in the past e.g 5 minutes?","",""
"215815959691264000","eselyx","29/10/2021 7:28 am","this would only require 1 additional slot and turn flashloan attacks from ""more expensive"" to ""impossible""","",""
"399617942087532545","_connormartin","01/11/2021 1:23 am","@Eselyx a flash loan can only be executed within a single block. the goal with these is usually to swing the price within a single transaction, then swing it back to its normal rate. If you just push the price one way, you lose the money it took to push it there. There isnt a way to have multiple blocks record an inaccurate price without using real capital and incurring millions of $'s of losses.","",""
"215815959691264000","eselyx","01/11/2021 6:39 am","Yes I am aware","",""
"215815959691264000","eselyx","01/11/2021 6:40 am","But what if you do a big trade and then many small ones in the same transaction","",""
"215815959691264000","eselyx","01/11/2021 6:40 am","Wouldn‚Äòt it fill up the observation spaces?","",""
"399617942087532545","_connormartin","02/11/2021 5:42 am","not if they're in the same tx - the observations are populated once per block","",""
"215815959691264000","eselyx","04/11/2021 2:00 am","aah okay","",""
"215815959691264000","eselyx","04/11/2021 2:00 am","thats smart","",""
"265555004205563905","mtorgin","10/11/2021 10:03 pm","Hey, I recently wrote a paper on manipulating the Uniswap TWAP oracle. Probably interesting to read for whoever is involved with Oracle design at Uniswap Labs.","",""
"265555004205563905","mtorgin","10/11/2021 10:04 pm","Who's the best person to reach out to? 
Or just email security@uniswap.org?","",""
"183309006767521792","jorropo","10/11/2021 10:06 pm","If you are just gonna talk about empty / low liquidity like the VUSD attack, that already know since forever, the consumer of the oracle should ensure there lots of liquidity on the LQ space (such as by adding liquidity everywhere and locking it forever (sending it to `0xdEaD`)).
Else the email you have sounds good","","üëç (3)"
"399617942087532545","_connormartin","11/11/2021 11:37 pm","‚òï --- Uniswap Labs Developer Office Hours  --- ‚òï 

Thursday (TODAY) at 1PM EST on Discord (Now)
come hang","",""
"617127949480493077","yj_alt","13/11/2021 7:45 pm","Interesting thread: https://threadreaderapp.com/thread/1459314402059034634.html","",""
"687976490419355659","gerbilio#8895","14/11/2021 6:47 am","what's uniswap's page's time frame for TWAP when showing a pair's price?","",""
"465811261536600064","svcrypto","15/11/2021 2:29 pm","can someone assist uni v3 oracle library integration?
i'd like to calculate twap liquidity, but cannot understand what the harmonicMeanLiquidity is
https://github.com/Uniswap/v3-periphery/blob/main/contracts/libraries/OracleLibrary.sol#L19","",""
"399617942087532545","_connormartin","16/11/2021 12:28 am","https://en.wikipedia.org/wiki/Harmonic_mean","",""
"399617942087532545","_connormartin","16/11/2021 12:29 am","harmonic mean aggregates data across fee tiers, so that it can balance the liquidity value collected in all the different pools","",""
"465811261536600064","svcrypto","16/11/2021 5:23 am","i want to know how we can calculate twap liquidity from that vaule.","",""
"805547470728724540","domrom.eth","16/11/2021 10:57 am","How's this work in practice? The buffer is raised to 65535 every time a new pool is added? If it only raised like 100, and index wraps back to 50, and then is raised, can that cause problems? ü§î","",""
"183309006767521792","jorropo","16/11/2021 10:59 am","That a good point, I don't know how they handle it, I guess you can read the code.
My guess is that if you grow the buffer you first need it to wrap around once and reset before this takes effect.","",""
"399617942087532545","_connormartin","19/11/2021 1:20 am","the length (aka cardinality) of the oracle array can be grown by anyone who calls the function to grow it and pays the gas fees to initialize the storage slot. then the slots are filled, one per block, until the full length of the oracle array is populated, then it starts over from the beginning, etc","","peepoLove (3)"
"772166755082436688","daynabob#0436","30/11/2021 10:28 pm","hi, any good price oracles you can recommend?","",""
"772166755082436688","daynabob#0436","30/11/2021 10:28 pm","for uniswapv2","",""
"772166755082436688","daynabob#0436","02/12/2021 8:08 pm","is there any price oracle which has most of uniswap traded tokens? or at least the most popular ones?... chainlink and compound got only part...","",""
"772166755082436688","daynabob#0436","02/12/2021 9:13 pm","chainlink has only 260 feeds, but uniswap has thousands of tokens...","",""
"456226577798135808","Deleted User","02/12/2021 11:29 pm","Does anyone knowsl what's the best period in seconds for aritm. mean tick when using the Oracle Library for Univ3. 
Sometimes it throws me an error: OLD when using 60seconds period","",""
"576395143016349727","rahulthakkar#3693","06/12/2021 4:38 pm","What would be the best way to fetch a price that's latest as well as secure against flash loan attack?
Any suggestions?
@Connor Martin","",""
"713372881605885992","iamnotstatic","10/12/2021 5:05 am","Hi guys, Any idea how i can get liquidity pool token price in USD, just like what unicrypt is doing over here  ??","https://cdn.discordapp.com/attachments/737351374760837130/918647021664084029/Screenshot_2021-12-10_at_03.34.50.png",""
"456226577798135808","Deleted User","12/12/2021 8:57 pm","`
            (int24 timeWeightedAverageTick,) = OracleLibrary.consult(
                _poolAddress,
                _twapPeriod
            );
            quote = OracleLibrary.getQuoteAtTick(
                timeWeightedAverageTick, _toUint128(_weiAmount), WETH, USDT
            );
`","",""
"456226577798135808","Deleted User","12/12/2021 8:57 pm","I'm getting OLD error message when using the oracle library in this way; _twapPeriod is 20 seconds","",""
"456226577798135808","Deleted User","14/12/2021 5:29 am","Anyone ^^","",""
"399617942087532545","_connormartin","16/12/2021 9:43 pm","a TWAP that spans at least two blocks, you can use the oracle library to return a twap easily","",""
"223859314215878656","makemake","19/12/2021 1:28 am","whats the simplest way to implement a uniswap v2 price oracle? just get the current price of a token pair, nothing fancy","",""
"744096905256239204","dz6044","20/12/2021 6:30 pm","you said `one per block` but only when `tick` will change, right? observation will not be saved if we will not move away from current tick? Also can I ask what is recommended `cardinality` if we want to use TWAP price for last 30 min? the more the better? or maybe if would be `recommended = 30 min / blockTime` - that will probably give us most precise price in case all observations will be there? anything less than that (in case we will save observation on every block) will give us less precision and more interpolation?","",""
"885116192363266088","elatrezo#2396","20/12/2021 8:24 pm","Hi everyone","",""
"223859314215878656","makemake","20/12/2021 10:13 pm","if anyone is looking for an answer ive used https://github.com/Keydonix/uniswap-oracle/","",""
"885116192363266088","elatrezo#2396","20/12/2021 10:36 pm","https://rainbow.me/matthiasegli.eth?family=POAP&nft=0x22c1f6050e56d2876009903609a2cc3fef83b415_3532","",""
"885116192363266088","elatrezo#2396","21/12/2021 12:04 am","0x392805FD4a2044131178b2a88E149A837890a06f","",""
"843155325619535912","Etherscan Bot#5753","21/12/2021 12:04 am","<https://etherscan.io/address/0x392805FD4a2044131178b2a88E149A837890a06f>","",""
"399617942087532545","_connormartin","21/12/2021 12:24 am","the oracle array is updated on the first state changing call per block, if the tick doesnt change, the oracle array will store another instance of data showing the same active tick.","",""
"744096905256239204","dz6044","21/12/2021 3:21 pm","Hi, can I ask what is recommended cardinality if we want to use TWAP price for eg last 30 min? would it be `recommendedCardinality = 30 min / blockTime` - that will probably give us most precise price in a case, when all observations will be there on every block? anything less than might give us less precision and more interpolation?","",""
"460673282144993301","heeropunjabi#1456","29/12/2021 5:10 pm","Hi Team, what is the best way to get the spot price for each pair","",""
"460673282144993301","heeropunjabi#1456","29/12/2021 5:11 pm","shall we use this event from the contract","",""
"460673282144993301","heeropunjabi#1456","29/12/2021 5:11 pm","https://docs.uniswap.org/protocol/V2/reference/smart-contracts/pair#swap","",""
"460673282144993301","heeropunjabi#1456","29/12/2021 5:11 pm","or some better approach ?","",""
"354803876538613791","wunder#8262","30/12/2021 12:02 am","Is there an obvious solution to get percentage change in price given two ticks using integer math? Something like 2 ** ((tick1 - tick0) / log_1.0001(2)) except without losing precision. Or does each tick need to be converted to the ratio first?","",""
"140661848683970560","roxhat","30/12/2021 8:34 am","Did you ever fix this? My issue is that TWAP gives a number that is way too high when converted into a quote","",""
"140661848683970560","roxhat","30/12/2021 8:34 am","@Deleted User","",""
"140661848683970560","roxhat","30/12/2021 8:35 am","Did you ever get this working? Would appreciate your code lol","",""
"140661848683970560","roxhat","30/12/2021 8:35 am","@svcrypto","",""
"140661848683970560","roxhat","30/12/2021 8:15 pm","```
PriceInfo memory price;
price.uniswapPool = IUniswapV3Pool(poolAddr);
int24 meanTick = OracleLibrary.consult(poolAddr, 60);
price.meanTick = meanTick;
price.tokenAPrice = OracleLibrary.getQuoteAtTick(
    meanTick,     
    uint128(PRECISE_UNIT), 
    price.uniswapPool.token0(), 
    price.uniswapPool.token1()
); 
```","",""
"140661848683970560","roxhat","30/12/2021 8:16 pm","If anyone wants to help this is my code and
meanTick = 194120
tokenAPrice = 269217312530577085263882618338671145
and the pool is ETH/USDC 0x8ad599c3a0ff1de082011efddc58f1908eb6e6d8
PRECISE_UNIT = 1e27","",""
"140661848683970560","roxhat","30/12/2021 8:24 pm","I swapped token1 and token0 and now i get 3713357252522375798 which looks like the right number but needs to be divided by a factor of 10^15. Not sure why it's 10^15 specifically","",""
"140661848683970560","roxhat","30/12/2021 8:27 pm","Why is the documentation so bad","",""
"140661848683970560","roxhat","30/12/2021 10:18 pm","The solution was token0 and token1 were switched. That means that token1 = ETH and token0 = USDC so I want the first arg to be token1 (baseToken = ETH) and second arg to be token0 (quoteToken = USDC) since I want the price of ETH quoted in terms of USDC. Then this gives me an integer which I need to divide by 10**token0.decimals (the # of decimals in token0) since there are no floats in Solidity","",""
"901122132648542218","carmincol#5689","31/12/2021 12:02 am","Hello ! i'm encountering a question on send txn to uniswap v2 router2
The details can be seen here:
https://ethereum.stackexchange.com/questions/117648/why-the-transaction-reverted-when-i-try-to-sell-tokens-on-uniswap-v2-router2-bu","",""
"901122132648542218","carmincol#5689","31/12/2021 12:03 am","Just keep waiting until someone can help me out TAT","",""
"917486573870792714","perql#1157","03/01/2022 5:26 pm","what is a good granularity for a 1 hour dynamic oracle?","",""
"807974373394743316","helias69","11/01/2022 1:07 am","How can I interpret the tickCumulative from an oracle?

Is it an amount of token B that I need to buy a single token A?

I'm getting an observe from a pair, so can I understand that number by an analogy from a V2, where I can get momentum price by moving x or y across equality sign? Like x = k/y","",""
"204627801561628672","meriadoc1209","12/01/2022 6:21 am","To oversimplify, I believe the tickCumulative adds the currentTick to its cumulative total once/second (or simulates that anyways). So what you need is the diff between current tickCumulative and tickCumulative as of X seconds ago, divided by X, which will give you the time-weighted tick. Then you can convert that into the price of token1/token0 using log(time-weighted tick) / log(1.0001)","","ty (1)"
"399617942087532545","_connormartin","13/01/2022 1:10 am","this is correct","",""
"213772611920855041","aspenmayer","13/01/2022 7:05 am","I‚Äôm a complete noob so please don‚Äôt take this as correct, but iirc solidity uses wei internally, which would explain your numbers being off by some number of exponents","",""
"213772611920855041","aspenmayer","13/01/2022 7:05 am","https://docs.soliditylang.org/en/v0.8.10/units-and-global-variables.html","",""
"213772611920855041","aspenmayer","13/01/2022 7:09 am","I don‚Äôt know why it would be specifically 10^15, though. As I said, I‚Äôm new at this. If not applicable to your use case, I‚Äôm sure it‚Äôs my probably my lack of understanding","",""
"140661848683970560","roxhat","13/01/2022 7:52 am","The function I was using from the OracleLibrary returns the price of token0 in terms of token1 and that number must be an int (solidity only has ints) but that int actually represents a decimal number with a certain number of decimal points, which you can get by dividing that number by token1.decimals. I was doing something wrong previously (I confused token0 and token1, so it was actually giving me USDC price in terms of ETH) but once I got the inputs correct, dividing the thing by token1.decimals produced the correct number. 
`OracleLibrary.getQuoteAtTick(
    meanTick,     
    uint128(PRECISE_UNIT), 
    price.uniswapPool.token0(), 
    price.uniswapPool.token1()
); `","",""
"213772611920855041","aspenmayer","13/01/2022 10:14 am","Are you working from v3? Making sure I‚Äôm on the right page so I can learn from your learning https://github.com/Uniswap/v3-periphery/blob/main/contracts/libraries/OracleLibrary.sol","",""
"807974373394743316","helias69","13/01/2022 4:08 pm","king!
thx you so much","","‚ù§Ô∏è (2)"
"140661848683970560","roxhat","13/01/2022 7:37 pm","Yes","",""
"833806489802113056","hinkypunk | Thales#1707","17/01/2022 10:54 pm","Hello team, I am implementing TWAP using v3 pools and testing it on Optimism. I see that Uniswap v3 contracts are not verified there and I need to check return values from functions like `observe` and `slot1` to compare with my results, so I was wondering are you planning to verify them?","",""
"399617942087532545","_connormartin","18/01/2022 9:50 am","optimism block.timestamp gets significantly delayed, which will alter the price returned from a v3 oracle","",""
"399617942087532545","_connormartin","18/01/2022 9:52 am","so its not recommended to be used","",""
"833806489802113056","hinkypunk | Thales#1707","18/01/2022 4:58 pm","Optimism announced that a fix for delayed timestamp will be rolled out soon - first on Kovan than on mainnet, so in my opinion it would be useful to have them verified as it significantly reduces testing time.","",""
"589140723430064149","bradley4473","19/01/2022 10:25 pm","can the uniswap v3 oracles be used for a v2 token?","",""
"471357824299958273","crypto_rachel","20/01/2022 2:13 am","No you wouldn't want to Use a V3 price for V2, prices won't stay the same between the pools","",""
"399617942087532545","_connormartin","20/01/2022 4:55 am","can you link to where you saw this ?","",""
"471357824299958273","crypto_rachel","20/01/2022 5:01 am","perhaps this
https://github.com/ethereum-optimism/optimism/pull/1982","",""
"589140723430064149","bradley4473","20/01/2022 1:29 pm","thank you","",""
"833806489802113056","hinkypunk | Thales#1707","20/01/2022 5:30 pm","I guess it's still not official, but I saw this: https://twitter.com/kelvinfichter/status/1482509196314693640","",""
"756895297669431358","proximity.btc","23/01/2022 8:42 pm","Is there documentation that explains how to get Pricing and data from a polygon V3 Pair?","",""
"370646949692702732","someusername999#5885","24/01/2022 1:05 am","There are two main ways: 1. calls to univ3 factory contract and pool contract using the univ3sdk and ethersjs 2. using a subgraph like this one: https://api.thegraph.com/subgraphs/name/ianlapham/uniswap-v3-polygon","","üëç (1)"
"236315297005568021","jjranalli","05/02/2022 12:23 am","Hey everyone, I have an issue trying to get the price of a pair using TWAP, inside a contract.

Since `TickMath.sol` doesn't compile on `solc >0.8`, what is the suggested way to derive the price from a tick?","",""
"456226577798135808","Deleted User","13/02/2022 8:48 am","Hello did you get any help since?","",""
"725705883333689395","jcs8809","14/02/2022 10:46 am","Hello! How can i get prices from pools?","",""
"757849331910049832","herzaso#0944","14/02/2022 6:26 pm","What's the formula to calculate execution price?","",""
"548979707161346048","ursulaslover","24/02/2022 6:28 pm","hey is there a way to calculate a price quote using a read only smart contract method? i noticed there is a method called `getAmountOut()` but i dont quite understand the parameters
what are `reserveIn`/`reserveOut`?","",""
"548979707161346048","ursulaslover","24/02/2022 6:28 pm","there is also `getAmountsOut()` which seems to call the internal method `getReserves()` but what on earth is `address[] path`?","",""
"548979707161346048","ursulaslover","24/02/2022 6:29 pm","are those the addresses of the ERC20 tokens?","",""
"548979707161346048","ursulaslover","24/02/2022 6:30 pm","hm yea something like that seems to work...","",""
"548979707161346048","ursulaslover","24/02/2022 6:31 pm","","https://cdn.discordapp.com/attachments/737351374760837130/946391480937885766/unknown.png",""
"548979707161346048","ursulaslover","24/02/2022 6:32 pm","the amount out is not what i would expect however","",""
"548979707161346048","ursulaslover","24/02/2022 6:32 pm","this is DAI/CRV","",""
"548979707161346048","ursulaslover","24/02/2022 6:38 pm","ok i've figured it out","",""
"548979707161346048","ursulaslover","24/02/2022 6:38 pm","thank you ‚ù§Ô∏è","",""
"548979707161346048","ursulaslover","24/02/2022 6:38 pm","`path = [0xD533a949740bb3306d119CC777fa900bA034cd52, 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2, 0x6B175474E89094C44Da98b954EedeAC495271d0F]`","",""
"456226577798135808","Deleted User","14/03/2022 12:39 am","üëç","",""
"426984889271713794","skrillz___","14/03/2022 6:05 pm","How exacctly does uniswap use price oracles?","",""
"456226577798135808","Deleted User","14/03/2022 7:08 pm","A price oracle is any tool used to view price information about a given asset. When you look at stock prices on your phone, you are using your phone as a price oracle. Similarly, the app on your phone relies on devices to retrieve price information - likely several, which are aggregated and then displayed to you, the end-user.","",""
"426984889271713794","skrillz___","14/03/2022 7:40 pm","and where does this price oracle pick up its price from?","",""
"879269921882779648",".alexanderpersson","16/03/2022 12:34 am","So I've been investigation flashloan mitigations.
Will the getReserves() in uniswap v2 handle it? We have a ready solution using this so thats why we will probably use that. 

Looking at Uniswap whitepaper v2 it seems like they store the price for the last transaction In previous block or price before first transaction in current block. Doesn‚Äôt that mean that a flashloan that only work within one block shouldn‚Äôt be able to manipulate the price? 

The uniswap docs also seems to point into this direction and they write that the attacker needs to make a bad trade in the previous block. But that would be another issue I think and really not related to the flashloan. 

https://uniswap.org/whitepaper.pdf
https://docs.uniswap.org/protocol/V2/concepts/core-concepts/oracles
https://docs.uniswap.org/protocol/V2/reference/smart-contracts/pair#getreserves","",""
"363993257442803712","qosmiof20","16/03/2022 6:17 pm","Do you by any chance know how smart contracts handle swaps? I'm interested to learn but i'm just properly confused","",""
"363993257442803712","qosmiof20","16/03/2022 6:18 pm","Like how the swap function is called / executed","",""
"879269921882779648",".alexanderpersson","16/03/2022 6:22 pm","Nope haven't looked into that yet.","",""
"363993257442803712","qosmiof20","16/03/2022 6:23 pm","Ah okay thank you. I couldn't find anything that would clarify how the ""callbacks"" are supposed to work","",""
"441294258214010880","sudeepb02","18/03/2022 6:27 pm","Can we Uniswap V1 be used as an Oracle for fetching historical token prices on-chain? If yes, any links would be helpful as I cannot find any examples on the V1 docs site","",""
"349495483183529985","cryptverse","18/03/2022 6:43 pm","https://docs.uniswap.org/protocol/V1/guides/connect-to-uniswap#exchange-interface","",""
"349495483183529985","cryptverse","18/03/2022 6:44 pm","I couldn't find any either. So, you are going to have to build it yourself by calling the events from the contract interface I've sent above.","",""
"349495483183529985","cryptverse","18/03/2022 6:47 pm","This is the only way I could figure out how to do this. If anyone has any better solution that would be great. Otherwise, you have to reverse engineer the current V1 exchange state using these events:
```js
{
    name: ""TokenPurchase"",
    inputs: [
      { type: ""address"", name: ""buyer"", indexed: true },
      { type: ""uint256"", name: ""eth_sold"", indexed: true },
      { type: ""uint256"", name: ""tokens_bought"", indexed: true },
    ],
    anonymous: false,
    type: ""event"",
  },
  {
    name: ""EthPurchase"",
    inputs: [
      { type: ""address"", name: ""buyer"", indexed: true },
      { type: ""uint256"", name: ""tokens_sold"", indexed: true },
      { type: ""uint256"", name: ""eth_bought"", indexed: true },
    ],
    anonymous: false,
    type: ""event"",
  },
  {
    name: ""AddLiquidity"",
    inputs: [
      { type: ""address"", name: ""provider"", indexed: true },
      { type: ""uint256"", name: ""eth_amount"", indexed: true },
      { type: ""uint256"", name: ""token_amount"", indexed: true },
    ],
    anonymous: false,
    type: ""event"",
  },
  {
    name: ""RemoveLiquidity"",
    inputs: [
      { type: ""address"", name: ""provider"", indexed: true },
      { type: ""uint256"", name: ""eth_amount"", indexed: true },
      { type: ""uint256"", name: ""token_amount"", indexed: true },
    ],
    anonymous: false,
    type: ""event"",
  }
```","",""
"349495483183529985","cryptverse","18/03/2022 6:48 pm","You'd be able to calculate exchange state per historical block this way.","","ALPHAFUNDAVA (1)"
"126820406739861505","alphaKŒûY#5546","19/03/2022 12:08 am","quick question:

there is a Uniswap V3 on-chain quoter which was done for a hackathon project:
https://github.com/sandrones/V3-Quoter

are there any licensing problems for us using this on our own?

we're not clear because there is a Uniswap Labs license there currently

any plans on launching this internally within Uniswap Labs?

feel free to DM me if need be","","Uni (3),üíØ (2),ALPHAFUNDAVA (1)"
"150465716645003267","joseinterestprotocol.com","22/03/2022 5:44 pm","hello guys for uniswap v3, can I rely on OracleLibrary.consult as a reliable price agaisnt flash loans?","","ALPHAFUNDAVA (1)"
"931088005828079626","blockanalyzr#1886","28/03/2022 7:27 pm","Hello I have a question regarding uniswap v2 oracle, I was going though UniswapV2Pair.sol (https://github.com/Uniswap/v2-core/blob/master/contracts/UniswapV2Pair.sol)|
the cumulative price is refreshed using _update function call at the end of every mint,burn, swap function call. So if in a block if none of these transaction happen then _update will not be called right and cumulative price will not update ?  I want to undertstand how frequently onchain price is updated, for large pools should be every block, for for small pools where there are not many transaction then cumlative price varibles might not get updated every block ?","",""
"742340528661725236","halfbloodmafia","31/03/2022 8:25 pm","Started a thread.","",""
"477401107811926037","gge","01/04/2022 6:09 am","if the oracle cardinality is high enough, is it possible to get the price of a token in a pool at a specific timestamp (given that the timestamp is recent enough)?","",""
"707305496473763860","ajadavis","02/04/2022 8:30 pm","fyi pinned msg w/ broken link","",""
"690611964808003624","compounder112","05/04/2022 5:25 pm","Hello. Is there any guidance on Uniswap V3 twap?

I want to observe price of last hour. How many observations with observationCardinalityNext function I should set
Also:
Right now I don't have cardinality increased. If I try to pool.observe(secondsAgos) more than 0 secconds, I get   ""Error: missing revert data in call exception "". Can it be related?","",""
"893557371803148318","psychoduck2876","07/04/2022 7:04 pm","Hello everyone! Can I make an integration with uniswap that will allow me to upload my tokens to uniswap and fill them with liquidity?","",""
"719738689579778089","davethefren","13/04/2022 9:06 pm","Hi - I had a question regarding historical LP valuations that I was wondering if someone could help me with. Say I  added to the BTC/ETH pool on 3/31
is there a way for me to retroactively lookup what the pool composition was on that date to get the value of my LP?","",""
"704115041577992202","ethweitrader","14/04/2022 6:49 pm","Hi! Is there a list of projects that have integrated Uniswap V3 oracles somewhere?","",""
"963112424855191562","joshskywalker_","15/04/2022 8:36 pm","Yes, you can.

https://hackernoon.com/how-to-list-your-defi-token-on-uniswap-d4s3w7s","","ALPHAFUNDAVA (1)"
"963733752079589406","daila#3888","17/04/2022 1:27 am","Hi - I had a question regarding historical LP valuations that I was wondering if someone could help me with. Say I  added to the BTC/ETH pool on 3/31
is there a way for me to retroactively lookup what the pool composition was on that date to get the value of my LP?","",""
"725705883333689395","jcs8809","21/04/2022 5:00 pm","How often  oracle  update prices?","",""
"750089738978852894","0xdmtri","25/04/2022 12:26 am","Sers, whats the modern way of calculating amountInMaximum? Don't wanna use GraphQL but would rather call view from within the contract? Tx tx","",""
"893557371803148318","psychoduck2876","28/04/2022 10:45 pm","Hey! I'm trying to create a smart contract for a 1:1 USDT stablecoin and fill it with liquidity. But nothing works out for me, I'm bad at solidity. Help me please!","",""
"928344085809475657","0xsecuritymanager","13/05/2022 2:35 pm","Hi Everyone, I am looking for help. I am needing to get the equivalent value of token B compared to Token A. However, the issue comes if Token B does not have a pool with Token A. How do I find the quickest path from token B to A. Example. If I need to find the equivalent value of DAI to Ether (for argument's sake there is no DAI/ETH pool). How do I do this?","",""
"554387509736636427","utocif","16/05/2022 4:24 pm","i think I have the same issue :p","",""
"554387509736636427","utocif","16/05/2022 4:24 pm","I am trying to use the oracle library, but the get pool function needs three parameters : tokenAddress1, tokenAddress2, fees","",""
"554387509736636427","utocif","16/05/2022 4:25 pm","the problem is that I don't know the fees for each pools","",""
"554387509736636427","utocif","16/05/2022 4:25 pm","my intuition is that, for path also, the frontend is sowhow giving that information","",""
"554387509736636427","utocif","16/05/2022 4:26 pm","can anyone confirm if this is true? if yes, where to find that frontend part of code?","",""
"972031432232927249","bennybrina6#7664","17/05/2022 8:32 pm","hello, complete noob here. do oracles just give price history for other dapps to use ?","",""
"886998554890100786","SuperSizeMe#0887","18/05/2022 3:44 am","The Auto Router will help you: https://docs.uniswap.org/sdk/guides/auto-router","","üôå (1)"
"928344085809475657","0xsecuritymanager","19/05/2022 3:31 pm","Hi @SuperSizeMe do you have an example of this being implemented in a contract? For some reason I am getting serious bugts","",""
"928344085809475657","0xsecuritymanager","19/05/2022 3:44 pm","I would also like help in creating a pool on uniswapV3, can I do this on the app or does it have to be through code","",""
"886998554890100786","SuperSizeMe#0887","19/05/2022 4:43 pm","Can you show me some code of what you‚Äôre doing? How experienced with JavaScript are you?","",""
"886998554890100786","SuperSizeMe#0887","19/05/2022 4:43 pm","Afaik it needs to be done on code. There is a flag when you add liquidity with the  Sdk that can create a pool","",""
"928344085809475657","0xsecuritymanager","19/05/2022 4:44 pm","I was just hoping it could be done in solidity, but I can make a js script for it üëç","",""
"951617750852333568","POPTWOPLZ#9771","23/05/2022 2:29 am",":gm:","",""
"951617750852333568","POPTWOPLZ#9771","23/05/2022 2:29 am","GM","",""
"951617750852333568","POPTWOPLZ#9771","23/05/2022 2:30 am","Anyone in here an actual oracle","",""
"126820406739861505","alphaKŒûY#5546","23/05/2022 10:16 pm","Trying to understand how to calculate +/- 2% liquidity depth for Uniswap V2.

Shouldn't the reserves just have to change in one direction by 1%? Does this sound correct?","",""
"126820406739861505","alphaKŒûY#5546","23/05/2022 10:17 pm","","https://cdn.discordapp.com/attachments/737351374760837130/978338388367261716/Screenshot_from_2022-05-23_17-44-55.png",""
"126820406739861505","alphaKŒûY#5546","23/05/2022 10:17 pm","I think coingecko is incorrect unless I'm missing something.","",""
"126820406739861505","alphaKŒûY#5546","23/05/2022 10:18 pm","3.3mil USDC is almost 4% of the supply.

One swap that size should actually increase the price by 8%.","",""
"789660566842900480","Pinotio.com#5357","08/06/2022 1:05 am","Hi folks, I'm interested in oracle security. Could you kindly recommend some good blogs where I can better understand the costs to attack Uniswap v2 vs Uniswap v3 oracles (ideally, vs Chainlink as well)?","",""
"617127949480493077","yj_alt","16/06/2022 3:36 am","Blog post below has code that might be useful.

https://uniswap.org/blog/uniswap-v3-dominance","",""
"617127949480493077","yj_alt","16/06/2022 3:44 am","Links below might be useful.

https://twitter.com/euler_mab/status/1459314402059034634

https://twitter.com/MTorgin/status/1516715638701625344","","üôè (2)"
"804331560216166431","9682#5457","23/06/2022 9:43 pm","Does intra-block prices participate in the calculation of uniswap v2 twap?","",""
"123831412380925952","lebusdriver","29/06/2022 12:15 am","are there any good code examples of contracts that use oracles?","",""
"956470564783018004","HankCui#7101","16/07/2022 11:42 am","Why did I fork the main network(polygon) to test the pool of DAI-USDC-100, an error 'reverted with reason string 'OLD'' is reported when I use pool.observe(secondsAgo) after add liquidity. But no error when I use the pool of USDC-USDT-100.","",""
"582832492487376918","geraldhost#0182","17/07/2022 12:08 am","Is anybody using UniV3 pools as oracles on Optimism, in the docs it said don't do this but are there any setups that would work and whats the limits?","",""
"750749592303304725","srikaryaganti","25/07/2022 12:05 pm","The issue with using the pools as oracles is that if there are any large swaps or flashloan withdrawals, the price will go out of sync","",""
"582832492487376918","geraldhost#0182","26/07/2022 2:26 pm","I'm more specifically talking about the difference between the potential price manipulation on L1 compared to L2. Not just that price manipulation exists, this is a given.","",""
"750749592303304725","srikaryaganti","26/07/2022 4:37 pm","Not sure about that","",""
"731109082051772416","ankit.chiplunkar#8141","28/07/2022 8:26 pm","Hey trying to understand how is the TWAP price calculated using Uniswap v3 `Time Weighted`
According to the white paper the accumulator sums up the log of prices `log(P)` and does not weight it by time.

Geometric TWAP: https://en.wikipedia.org/wiki/Weighted_geometric_mean
Geometric TWAP proposed by Whitepaper (eqn: 5.5) https://uniswap.org/whitepaper-v3.pdf","",""
"210726257971691520","DavidH Ultra#7649","05/08/2022 9:56 pm","Small question: are Uniswap's oracles going to work on ETH POW after the fork?","",""
"754579337101181018","datarain","10/08/2022 8:13 pm","Does uniswap v3 oracle have method for `eth_call` to get my LP Tokens value info?","",""
"893401087657279488","IonAL#7114","23/08/2022 9:59 pm","Hi, I am looking at the USDC - WETH 0.05% and USD - WETH 0.30% liquidity pool.
I was trying to understand how the oracle is calculated. i.e I guess, what is the twap period used to calculate it?
I cna't see it available easily","",""
"1008740992859512932","Drink water#8276","25/08/2022 12:07 pm","Hi, guys","",""
"1008740992859512932","Drink water#8276","25/08/2022 12:08 pm","I asked question about oracle but nobody answers. How could this happen?","",""
"1008740992859512932","Drink water#8276","25/08/2022 12:08 pm","It makes me doubt if this channel is active.","",""
"893401087657279488","IonAL#7114","25/08/2022 12:20 pm","same here","",""
"893401087657279488","IonAL#7114","25/08/2022 12:21 pm","adn I was told this was the appropriate channel to ask the question rather than general","",""
"644991289850593320","steve0xp","25/08/2022 8:06 pm","when making a TWAP, what is the typical timespan one takes? And what other asserts is put in place to help fight against price manipulation (say you're building a contract that relies on TWAP - I would think that you would want to not allow new TWAP prices that fluctuate hugely due to some weird flash loan attack that happens at the pre-determined block update timestamp)","",""
"456226577798135808","Deleted User","26/08/2022 10:09 pm","Hi","",""
"893401087657279488","IonAL#7114","31/08/2022 5:18 pm","HI indeed. but here I am asking about existing pool like the large USDC WETH pools.
I was wodnering what the twap was for these pools","",""
"893401087657279488","IonAL#7114","31/08/2022 5:18 pm","these are exisitng one, so the rule has laready been set so to speak","",""
"810459362371567616","iposignal","31/08/2022 6:42 pm","same here","",""
"1008740992859512932","Drink water#8276","01/09/2022 12:20 pm","Hello","",""
"1008740992859512932","Drink water#8276","01/09/2022 12:21 pm","Anybody help. I asked question on stackoverflow, but no answer yet.https://ethereum.stackexchange.com/questions/134749/help-best-token-path-in-case-of-uniswap-v2","",""
"149735676278079488","austino256","01/09/2022 8:20 pm","Using the smart-order-router: https://github.com/Uniswap/smart-order-router

You can specify that you want only v2 used.","",""
"456226577798135808","Deleted User","05/09/2022 8:44 pm","üò´","","‚ùî (1)"
"386221938260967435","colberg","06/09/2022 8:23 pm","is there a new link for this info? https://docs.uniswap.org/v2/core-concepts/oracles/","",""
"471357824299958273","crypto_rachel","07/09/2022 12:52 am","https://docs.uniswap.org/protocol/V2/concepts/core-concepts/oracles
https://docs.uniswap.org/protocol/concepts/V3-overview/oracle

where did you find that link?","",""
"386221938260967435","colberg","07/09/2022 1:08 am","Curve discussion on oracles","",""
"386221938260967435","colberg","07/09/2022 1:08 am","In read the docs","",""
"471357824299958273","crypto_rachel","07/09/2022 1:12 am","ahh, yeah that's an old link if you wanted to point them to the new ones üòä  thanks","",""
"1011601756830056489","Abhijeet#7330","13/09/2022 4:43 pm","seems router.route() builds the transaction data for multicall already, you may need to decode it and append another transaction to the data array.

i am using  multicall contract with alpha router, i am using this script https://docs.uniswap.org/sdk/guides/auto-router#the-full-example","",""
"1011601756830056489","Abhijeet#7330","13/09/2022 5:08 pm","I have done this tx on uniswap app
https://dashboard.tenderly.co/tx/mainnet/0xd184bd2beaa9e206b655a52390641cc360426d8ad439236be3f8f60857a4486f/debugger?trace=0.1
and i gotI am getting balance in eth not in weth, as you can see in the above tx unwrapeth9 is being called. 
 I have ti tried to run the same tx on my dapp, in which i am using alphaRouter of uniswap, but after completion it is not
ETH, it is returning ETH, I am getting WETH in return, can you please check and let me know how can i do this 
 here is the tx on my Dapp, so that i can also unwarp the recived weth: https://dashboard.tenderly.co/appdev6768/project/simulator/61bb0764-3533-4834-9e7b-744d523ca3aa","","üáπüá∑ (1)"
"808440358845284422","david_23s5","13/09/2022 7:19 pm","Hi, we are trying to use several V3 pools as sources to determine the price of a token. 

We are familiar with V3's built-in moving average oracle. The problem we are facing rn is how to combine the MA prices from different pools.

We want to do a weighted average of the prices from these pools and use the pool's liquidity depth as the weight. But with V3's active liquidity design, we are a bit confused on how to determine the total (active) liquidity of a pool, or if there is any better parameter to represent a pool's depth","","üß† (2),üëç (2)"
"729567788561072190","thanksskeleton","17/09/2022 12:14 pm","hi - have a question related to oracles - my understanding is that uniswap pools provide price oracles for external use, but do not depend on any sort of external oracle themselves. Is this correct?","",""
"743089391764897792","medizos","17/09/2022 4:50 pm","To match that, uniswap made the metric named market depth","",""
"743089391764897792","medizos","17/09/2022 4:50 pm","market depth is the amount to change the current price +/-2%","",""
"743089391764897792","medizos","17/09/2022 4:51 pm","For the details, you can see this article
https://uniswap.org/blog/uniswap-v3-dominance","",""
"743089391764897792","medizos","17/09/2022 4:53 pm","As the price oracle of all protocols has no parameter about liquidity, it's vulnerable to be exploited","",""
"743089391764897792","medizos","17/09/2022 4:53 pm","Though uniV3 has liquidity oracle, it is just used for rewards & selections of pools when swap happens","",""
"743089391764897792","medizos","17/09/2022 4:55 pm","and you can check my materials 
https://discord.com/channels/597638925346930701/607978109089611786/1020182730362855504","",""
"843155325619535912","Etherscan Bot#5753","17/09/2022 4:55 pm","","",""
"743089391764897792","medizos","17/09/2022 4:56 pm","I will translate my lectures into English in October. I guess","",""
"239203098927693824","sandcreeper","18/09/2022 4:15 am","Does the Oracle built into uniswap v3 account for price impact. I don‚Äôt think it does but I wanted to ask. Should i instead use the quoter?","",""
"743089391764897792","medizos","18/09/2022 11:06 am","Oracle is independent of price impact(can be changed to input amount)

Yeah you should use quoter to adapt changing current price but, many projects like MakerDAO which provides collateralizing crypto assets use chainlink oracles.","",""
"239203098927693824","sandcreeper","19/09/2022 2:04 am","So I could use a chainlick Oracle or a quoter for the estimate,in order to factor in  price impact","",""
"239203098927693824","sandcreeper","19/09/2022 2:05 am","Is there a quoter for uni v2,?","",""
"239203098927693824","sandcreeper","19/09/2022 6:37 am","Are there any view functions that can estimate the swap while accounting for price impact or no?","",""
"808440358845284422","david_23s5","19/09/2022 8:21 pm","Taking a look! looks like this is market depth is exactly what i was looking for! Thanks","","üëçüèª (1)"
"975697283947565067","pp1234#2332","22/09/2022 11:21 am","hi there, is this issue mentioned in the documentation still up to date or has it been patched by OP? https://docs.uniswap.org/protocol/concepts/V3-overview/oracle#oracles-integrations-on-layer-2-rollups

Thank you! üôè","",""
"236315297005568021","jjranalli","03/10/2022 3:01 am","What is the suggested approach to programmatically pick the right V3 pool for a currency pair, from a smart contract?","",""
"513973089017790464","andersonchen","04/10/2022 1:54 pm","Does Uniswap team has plan to increase ObservationCardinality? I think for most pool on L2 the current value is not enough","",""
"471357824299958273","crypto_rachel","04/10/2022 7:44 pm","This would be totally on the people who want to increase that observation, uniswap is decentralized and the Labs team doesn't do that","","üëç (1)"
"236315297005568021","jjranalli","08/10/2022 4:32 am","Is it safe to consider the main pool for a currency pair the one with the highest harmonicMeanLiquidity?","",""
"471357824299958273","crypto_rachel","08/10/2022 6:41 am","To derive the harmonic mean liquidity over an interval, the caller needs to retrieve two observations, one after the other, take the delta of the two values, then divide the time elapsed by this value. Calculating TWAL is addressed in finer detail in the whitepaper.
https://docs.uniswap.org/protocol/concepts/V3-overview/oracle
https://uniswap.org/whitepaper-v3.pdf","",""
"236315297005568021","jjranalli","08/10/2022 7:12 am","Why not? Over sufficiently large intervals the pool with the highest harmonic mean liquidity should in most cases correspond with the most used one.

I'm looking for a way to programmatically determine which is the main / most traded pool for a currency pair, among the ones with various fees. Is there a better or more efficient way to do it?","",""
"471357824299958273","crypto_rachel","08/10/2022 7:23 am","Actually sorry I think I totally misread your question.
This is likely to be the main traded pair, as it would have the best LQ averaged","",""
"471357824299958273","crypto_rachel","08/10/2022 7:24 am","long day to much in my head üòÑ","",""
"236315297005568021","jjranalli","08/10/2022 7:25 am","No worries, I feel you :needahug:","","üòä (1),ü§ó (1)"
"236315297005568021","jjranalli","08/10/2022 7:27 am","And thanks for confirming this. Working on an oracle contract based on this idea. Would it be fine if I shared it here once it‚Äôs ready?","",""
"471357824299958273","crypto_rachel","08/10/2022 7:28 am","yes uniswap related stuff is always welcome","","üôè (1)"
"1029293243835363368","lemontree#2650","26/10/2022 8:07 pm","how to get  token out amount  with uniswap v3 pool ?","",""
"471357824299958273","crypto_rachel","26/10/2022 10:37 pm","If you are speaking of something like V2s `getAmountsOut` then you would need to use the uniswap Quoter
V3 quoter
https://discord.com/channels/597638925346930701/607978109089611786/948847107744333844","",""
"843155325619535912","Etherscan Bot#5753","26/10/2022 10:37 pm","","",""
"925672955671900161","Faizy#1534","29/10/2022 2:06 am","How to get price of a certain pair or token before swapping ???","",""
"925672955671900161","Faizy#1534","29/10/2022 2:07 am","Anyone can help unable to find it in docs","",""
"471357824299958273","crypto_rachel","29/10/2022 7:49 pm","V2 or V3
in V2 there is getAmountsOut
https://discord.com/channels/597638925346930701/607978109089611786/1004193571341078570

In V3 you would want to use the quoter
V3 quoter
https://discord.com/channels/597638925346930701/607978109089611786/948847107744333844","","üëçüèΩ (1)"
"925672955671900161","Faizy#1534","30/10/2022 8:35 pm","Trying to get call quote function but getting this error can anyone please hep me why it is coming...","https://cdn.discordapp.com/attachments/737351374760837130/1036294839836344450/Screenshot_426.png",""
"989275482488983663","AnthonyNicholas#4331","31/10/2022 4:49 am","What's the etherscan link?","",""
"471357824299958273","crypto_rachel","31/10/2022 11:21 am","You don't want to call that as a gas transaction, it can be called for free, It will always fail, as that contract is designed to work like a real swap, only it reverts and gives the expected output in the reason","",""
"925672955671900161","Faizy#1534","31/10/2022 5:21 pm","Got it thanks","","np (1)"
"471357824299958273","crypto_rachel","03/11/2022 2:02 am","https://uniswap.org/blog/uniswap-v3-oracles","",""
"471357824299958273","crypto_rachel","03/11/2022 2:02 am","Pinned a message.","",""
"384395749225398275",".takeabreath","11/11/2022 4:21 am","Hello everyone, I'm new here but I joined because I'm working on a few projects trying to utilise Uni's V3 oracle","",""
"384395749225398275",".takeabreath","11/11/2022 4:22 am","I just opened an issue intended as a question on the v3-periphery repo pertaining to `getChainedPrice` https://github.com/Uniswap/v3-periphery/issues/325","",""
"384395749225398275",".takeabreath","11/11/2022 4:23 am","I'd love it if anyone familiar with `getChainedPrice` could take a look üôÇ","",""
"638766945206009866","kwsantiago","12/11/2022 2:45 am","this query gives me the current data for liquidity distribution of a given V3 pool but I need to find the historical data for liquidity distribution of a given V3 pool, let's say what were the ticks at block X for pool Y. How can I find this data from a historical level?

```{
        ticks(first: 1000,
              where: {poolAddress: ""0x88e6a0c2ddd26feeb64f039a2c41296fcb3f5640""},
              orderBy: tickIdx) {
            tickIdx
            liquidityNet
            price0
            price1
        }
    }```","",""
"384395749225398275",".takeabreath","12/11/2022 3:55 am","I see that in that subgraph there is a `createdAtBlockNumber` property","",""
"384395749225398275",".takeabreath","12/11/2022 3:56 am","I'm on mobile right now so I might not be able to type out the query, but with that property it's a matter of modifying the `where` clause with `gte` and `lte` suffix for that `createdAtBlockNumber` property of `Tick`","",""
"384395749225398275",".takeabreath","12/11/2022 3:58 am","See here for more on filtering https://thegraph.com/docs/en/querying/graphql-api/#filtering","",""
"384395749225398275",".takeabreath","12/11/2022 4:01 am","Or I guess in your case it would be `eq`","",""
"471357824299958273","crypto_rachel","12/11/2022 9:12 am","You do not need to post in other rooms, Best to keep things in their category, this room is for oracles","",""
"471357824299958273","crypto_rachel","13/12/2022 1:44 am","that was not the official uniswap","",""
"436179570652086293","mikolajo#3966","15/12/2022 7:06 pm","üëã Hey everyone, are u aware if Twap available on Goerli and if it is working exactly as it is on mainnet ? üôè","",""
"471357824299958273","crypto_rachel","15/12/2022 11:30 pm","So they should work the same on testnet, just might not see as much since it's not on main net and not getting full trades. Check this out before you get to far
https://uniswap.org/blog/uniswap-v3-oracles","","üôè (1)"
"436179570652086293","mikolajo#3966","16/12/2022 3:22 am","Thank you very much ! I'll take a look at that üôè","","np (2)"
"853907798558244864","duddu9","22/12/2022 3:39 pm","Uniswap has any airdrop for use of uniswap???","",""
"527483061169029120","inahlikenoother#8934","22/12/2022 3:41 pm","There is no recent UNI airdrop. The airdrop announcement was for Genie historical users. Please check this, https://uniswap.org/blog/uniswap-nft-aggregator-announcement","",""
"1054632269685465178","rainbowbeast5","24/12/2022 4:52 am","https://learn.rainbow.me/get-started-with-rainbow","",""
"1003471507558781018","HHHHOOO#8789","30/12/2022 8:54 am","Hi, i'm a little confused about the function of price oracle and quoter, what's their difference and use cases?","",""
"471357824299958273","crypto_rachel","30/12/2022 10:13 am","The quoter will give you exact quote of output/input at that block called.
The price oracle is a bunch of time spaced prices of pool averaged for best price average","",""
"1003471507558781018","HHHHOOO#8789","30/12/2022 10:50 am","So if i want to trade token, i use quoter to get appropriate amount; if i want to know recent price of token, i query oracle to get it, right?","",""
"471357824299958273","crypto_rachel","30/12/2022 10:55 am","Yes and oracle allows you to buy at an averaged price when possible","","üëç (1)"
"430424551588102176","oriok","12/01/2023 11:37 pm","Can I find shitcoins listed in other Dexes using the uniswap oracle? Where can I find an oracle that provides this all recent shitcoin listings?","",""
"558886216255406080","Mikeg#1126","17/01/2023 7:13 pm","Reposting this from #üíª‚îÇdev-chat: 
Hi devs, I'm working on using the UniswapV3 oracle and get a revert: `reverted with reason string 'OLD'`. I traced it back to here (I think): https://github.com/Uniswap/v3-core/blob/05c10bf6d547d6121622ac51c457f93775e1df09/contracts/libraries/Oracle.sol#L226

Could someone help me understand what the cause of this reversion is? I'm having an issue understanding why this would revert. It was working all day for me testing against a target pool using mainnet forking on Polygon. It seems to be intermittent too because it started and then stopped working for a second time today.

Here's my getTWAP() function on my contract:
```
    function getTwap() public view returns (uint _price) {
        uint32 _twapDuration = 30; // TODO: Parameterize this
        uint32[] memory secondsAgo = new uint32[](2);
        secondsAgo[0] = _twapDuration;
        secondsAgo[1] = 0;

        (int56[] memory tickCumulatives, ) = uniswapPool.observe(secondsAgo);
        uint sqrtRatioX96 = TickMath.getSqrtRatioAtTick(int24((tickCumulatives[1] - tickCumulatives[0]) / int(uint(_twapDuration))));
        _price = FullMath.mulDiv(sqrtRatioX96, sqrtRatioX96, FixedPoint96.Q96);

        // TODO: This section needs some work, I can't explain this math well enough
        // If the tickCumulatives are negative use alternative calculation:
        if(tickCumulatives[0] < 0 ) {
            _price = ((sqrtRatioX96 * 1e18 / (2 ** 96)) ** 2) / 1e18;
        } else {
            _price = 1e18 / (((sqrtRatioX96 * 1e18 / (2 ** 96)) ** 2) / 1e18);
        }
    }
```","",""
"558886216255406080","Mikeg#1126","17/01/2023 7:14 pm","@Crypto_Rachel thanks again for directing me to this channel for my question","","YW (1)"
"558886216255406080","Mikeg#1126","18/01/2023 3:04 am","I tried to change around the values of `_twapDuration` but had no luck getting past the error. I read a little more about it here: https://docs.uniswap.org/concepts/protocol/oracle#observations, Im still unsure what the adjustment to how I use the `observe` method is, from what I read I thought maybe increasing `_twapDuration` could fix this but it doesn't seem to.","",""
"471357824299958273","crypto_rachel","18/01/2023 12:08 pm","So I haven't worked with twaps, but I do know the duration is pool specific, don't remember how long the initial observation is, but many have been extended by calling `observationCardinalityNext` try a very short duration to see if error still there","",""
"558886216255406080","Mikeg#1126","18/01/2023 7:41 pm","@Crypto_Rachel That might just be the tip I needed, before crashing last night I found out it was my second swap that fails, my first thought was, maybe there's a method I need to call if a swap occured, I saw that method in the docs but couldn't understand what the documentation was saying, but I was thinking maybe I need to call that, Thanks for getting back to me, I'll try working with this today","","üëç (1)"
"558886216255406080","Mikeg#1126","18/01/2023 8:50 pm","I also was researching other implementations of V3 Oracle and I found a very good reference in MakerDAO's Kiln contracts here: https://github.com/makerdao/dss-kiln/blob/master/src/uniV3/TwapProduct.sol","","üôè (1)"
"558886216255406080","Mikeg#1126","18/01/2023 8:50 pm","If others stumble on this they might find this a good resource","",""
"558886216255406080","Mikeg#1126","18/01/2023 10:09 pm","Unfortunately no permutation of values or placement of this function call helped, Im moving to use dss-kiln's implementation which I know works","",""
"558886216255406080","Mikeg#1126","18/01/2023 10:13 pm","Can anyone help me understand what would cause this `OLD` revert?  I have been grinding my teeth on this for several nights now. I have read and reread the docs and code and can see what it's doing though I can't understand why. I need help understanding what state changes would lead to this revert. One swap works, second swap doesn't","",""
"396272247678959618","tschoerv","01/02/2023 4:44 am","I want to use TWAPs as my on chain price oracle for simple swaps and I'm wondering what a good time duration is? Is it pool specific? Can anyone pls help out?","",""
"795363135476465674","DeFiGuy#0575","14/02/2023 4:48 pm","Hi, am exploring Uniswap oracles
is it possible to get the price of token-pairs similar to other oracles?","",""
"795363135476465674","DeFiGuy#0575","14/02/2023 4:49 pm","or should i compute using the cumulativePrice0, cumulativePrice1 from 
and where can i get the contract addresses on various chains?\","",""
"471357824299958273","crypto_rachel","15/02/2023 8:41 am","yes this is possible, however most pools don't have a long history for price, this has to be increased by users desiring longer. So normal pools won't have the best oracle prices, but yes you can get the cumulative prices
oracle info
https://docs.uniswap.org/concepts/protocol/oracle
Contract Addresses    - https://discord.com/channels/597638925346930701/1062975671128838204/1063280124109275237
Get Pool Addresses     - https://discord.com/channels/597638925346930701/1062975671128838204/1062977307947581520
lots of stuff in #üí°‚îÇdeveloper-resources-and-info","",""
"420590394640826369","bizzyvinci","20/02/2023 1:57 am","what are sample projects that use uniswap oracles?","","ü§∑‚Äç‚ôÄÔ∏è (3)"
"893613795111485511","0xCourtney#0236","04/03/2023 1:42 am","Mean Finance, and soon Premia Finance","",""
"971059845400789012","ibsaaqa11","04/03/2023 2:07 am","","https://cdn.discordapp.com/attachments/737351374760837130/1081314327417602109/Screenshot_20230303-224529_Bee_Wallet.jpg,https://cdn.discordapp.com/attachments/737351374760837130/1081314327732166696/Screenshot_20230303-223522_Bee_Wallet.jpg",""
"967846095210291331","tiaroslav07#8968","04/03/2023 2:47 am","Hello all","",""
"325619061751021569","ateistka","04/03/2023 4:58 am","hello","",""
"673864249315033109","riza_fauzi12","04/03/2023 12:18 pm","","https://cdn.discordapp.com/attachments/737351374760837130/1081468123682713750/IMG_7556.png",""
"906452697421590568","effort0562","05/03/2023 11:00 am","hello","",""
"764377309238657024","tienmanh1992","17/03/2023 2:14 pm","Hello","",""
"1074671005215232071","root.eth#2150","18/03/2023 1:34 pm","Hi","",""
"1074671005215232071","root.eth#2150","18/03/2023 1:34 pm","Does everyine have the read wallet in dev?","",""
"1074671005215232071","root.eth#2150","18/03/2023 1:35 pm","Started a thread.","",""
"834260903414857739","presidenthodl","20/03/2023 7:22 pm","CoinMarketCap is telling me that our token - which has been up ok CoinMarketCap for@over 2 years is no longer receiving data from the uniswap api
How can I debug and correct this?","",""
"471357824299958273","crypto_rachel","20/03/2023 10:57 pm","What token/pool, uniswap hasn't changed ü§∑‚Äç‚ôÄÔ∏è","",""
"834260903414857739","presidenthodl","21/03/2023 6:58 pm","BSL","",""
"834260903414857739","presidenthodl","21/03/2023 6:58 pm","BankSocial","",""
"834260903414857739","presidenthodl","21/03/2023 6:58 pm","yea I figured","",""
"834260903414857739","presidenthodl","22/03/2023 1:51 am","Any ideas?","",""
"834260903414857739","presidenthodl","22/03/2023 1:52 am","I would like to be able to send them a link to the oracle or API endpiint","",""
"471357824299958273","crypto_rachel","22/03/2023 1:53 am","there is no public API, what do they ask for when getting token listed, probably the pool page from info.uniswap.org","",""
"1075801657620828282","ËÄ≥‰∏úÊòé‰∏ú#8623","25/03/2023 4:56 pm","","https://cdn.discordapp.com/attachments/737351374760837130/1089148197039001743/image.png",""
"1075801657620828282","ËÄ≥‰∏úÊòé‰∏ú#8623","25/03/2023 4:56 pm","What's the next step after the interaction?","",""
"471357824299958273","crypto_rachel","25/03/2023 11:30 pm","what / where  is this? From what I read you would connect your wallet to the Goerli network and then open the Uniswap site https://app.uniswap.org/
and the select ETH in top token box, and select WETH in the bottom box. Choose an amount of ETH to wrap and click the wrap button","",""
"561101253825003543",".riverotter","21/04/2023 1:05 pm","Hi, reposting this after my question got lost in #üí¨‚îÇgeneral think it is also probably more relevant here. I've been trying to get my head around oracles. Read all the docs several times. I understand the TWAP calculation. Done a little calculation to work out accumulator based on ETH-USDC pool in v2. However, I'm just slightly confused about usage of price oracles in v2 and v3. Do the online interfaces use them? Are the smart contracts, router etc, using them? I'm just looking for bit of extra context about how they fit into the whole system.","",""
"858482285849477130","bruhed_","21/04/2023 9:06 pm","Suppose you‚Äôre a lending and borrowing protocol. You need an exact price of $SOCKS, in order to facilitate lending and borrowing, and liquidations. The TWAP price is important because otherwise, you may overestimate or underestimate the price of $SOCKS as collateral/ as a borrowed asset. With all this in mind, you choose to use uniswap‚Äôs TWAP oracle, to stay secure against price manipulation attacks and since uniswap is a very liquid market for $SOCKS and will probably have the right market price for it.","","üëç (1)"
"858482285849477130","bruhed_","21/04/2023 9:06 pm","You can take a look at euler- I know they use some uniswap oracles","",""
"471357824299958273","crypto_rachel","21/04/2023 10:32 pm","no the UI nor the router contracts use a TWAP. They are usually used for specific situations like üëÜ","","üëç (1)"
"561101253825003543",".riverotter","22/04/2023 1:34 pm","Thanks @bruhed | compounder.fi @Crypto_Rachel üëç","","YW (2)"
"286256738112634881","phil6379","26/04/2023 6:32 pm","hello is anyone able to do uniswap v3 math? I did it and tried to input a specific amount of tokens to a pool, but the output amount is wrong by 0.0065%. I know this is not much, but still there must be an error in my calculation. I would really appreciate, if someone could help me with that","",""
"858482285849477130","bruhed_","26/04/2023 7:49 pm","Wrong compared to what?","",""
"286256738112634881","phil6379","26/04/2023 7:50 pm","compared to uniswap v3 app and uniswap v3 quoter contract (they both show the same value)","",""
"858482285849477130","bruhed_","26/04/2023 10:06 pm","Could be routing it through a different pool than you are","",""
"149735676278079488","austino256","27/04/2023 12:51 am","the uniswap interface uses a router to find the best possible route that may be different than the route that you are using","",""
"286256738112634881","phil6379","27/04/2023 12:53 am","no I know what pool is used on uniswap interface, it is for sure 100% the same pool I use for my calculation
I also did my calculations with a shitcoin/USDT pool to make sure there is no other pool that can be used","",""
"471357824299958273","crypto_rachel","27/04/2023 12:54 am","what math are you doing exactly (feel free to share code), and are you sure the calls are happening at the same block, UI has a small delay","",""
"286256738112634881","phil6379","27/04/2023 12:55 am","I use equations from here:
https://atiselsts.github.io/pdfs/uniswap-v3-liquidity-math.pdf
also I used a pool with no swaps for the past 2 days, to make sure there is no difference because of swaps in the meantime","",""
"471357824299958273","crypto_rachel","27/04/2023 12:56 am","yeah that's a long article, specifically which functions/math are you using","",""
"286256738112634881","phil6379","27/04/2023 12:57 am","","https://cdn.discordapp.com/attachments/737351374760837130/1100865667881766943/image.png",""
"286256738112634881","phil6379","27/04/2023 12:58 am","modified with input and output, like this:","",""
"286256738112634881","phil6379","27/04/2023 12:58 am","","https://cdn.discordapp.com/attachments/737351374760837130/1100865960405114901/image.png",""
"286256738112634881","phil6379","27/04/2023 12:58 am","(the pool fee is 0.3%)","",""
"149735676278079488","austino256","27/04/2023 1:01 am","are you crossing ticks","","üëÜ (1)"
"286256738112634881","phil6379","27/04/2023 1:02 am","nope, for now I try that within the current tick range","",""
"471357824299958273","crypto_rachel","27/04/2023 1:02 am","@Phil
So not sure how you're doing this, what code / scripting are you using? Getting decimal precision from the big numbers gets fun.","",""
"286256738112634881","phil6379","27/04/2023 1:03 am","right, I wonder if that is the reason for the 0.0065% error","",""
"471357824299958273","crypto_rachel","27/04/2023 1:05 am","I've seen slight variances with different types of bignumber. the precision handled can sometimes be changed. At that minimal of percentage, not sure I'd worry. But I've had to deal with it getting exact numbers when doing LQ and fee scripts here.","",""
"471357824299958273","crypto_rachel","27/04/2023 1:06 am","yes","",""
"471357824299958273","crypto_rachel","27/04/2023 1:06 am","sorry due to scammers we blocked that bad word DM üòÑ","",""
"286256738112634881","phil6379","27/04/2023 1:06 am","oh ok","","üòä (1)"
"858482285849477130","bruhed_","27/04/2023 2:56 am","did you account for pool fees @Phil ?","",""
"858482285849477130","bruhed_","27/04/2023 2:59 am","I relied on sqrtPriceX96 as the source of price information in my code too and I found that you have to adjust for pool fees to get a fully accurate price https://github.com/compounderfi/compounderfi-v2-core/blob/836cb0b4850c059f65732591444890aca83c3a7c/src/Compounder.sol#L275","",""
"286256738112634881","phil6379","27/04/2023 3:07 am","yes I consider pool fees, as you can see in the equation I showed","",""
"471357824299958273","crypto_rachel","27/04/2023 3:08 am","check his script still, it contains the delta stuff","",""
"858482285849477130","bruhed_","27/04/2023 3:25 am","No swap pools may indicate low liquidity = higher price impact","",""
"286256738112634881","phil6379","27/04/2023 3:36 am","it is all fine, my math is still off by 0.0065%, which might be caused by precision errors","",""
"858482285849477130","bruhed_","27/04/2023 3:44 am","try increasing the swap amount and if that increases how much you're off by, then you know there might be a problem","",""
"1097252580943470735","hashazizh","04/05/2023 12:29 am","What is this","",""
"471357824299958273","crypto_rachel","04/05/2023 12:34 am","https://discord.com/channels/597638925346930701/1090083334908026961","","üòÇ (1)"
"998858394297442309","0xandreistefan","14/06/2023 5:49 pm","Hi! At Solid World, we have recently deployed a pool on the Polygon mainnet with the contract address `0xc6832Ef0af793336aa44a936E54b992BfF47e7Cd`. Our users utilize the Gamma protocol to deploy liquidity to this pool, and benefit from tokenized LP positions.

I am reaching out to seek your assistance in understanding error code ""OLD we have encountered. After debugging, we have determined that the issue arises when the Gamma protocol performs certain checks, and calls `pool.observe(secondsAgos)`. The current value of secondsAgos is set as [120, 0]. Strangely, this function sometimes reverts with the ""OLD"" error, while at other times it executes successfully. Furthermore, we have noticed that if users retry the same operations after a few minutes, the ""OLD"" error no longer occurs.

Based on our analysis of the code, it seems that observations are added during swaps and liquidity deposits on the pool. However, it appears that the pool's number of observations is insufficient, leading to the occurrence of the ""OLD"" error. We have also reached out to the Gamma protocol team, and according to their experience, this error happens randomly for certain pools, irrespective of transaction volume.

In an attempt to reproduce the issue, I conducted a simulation by calling the problematic function (which, in turn, calls `pool.observe(secondsAgos)`) within a Polygon mainnet fork using Anvil. Interestingly, during my simulation, the ""OLD"" error did not occur on the first attempt. However, when I repeated the simulation after approximately 19 blocks, the error manifested.

Understanding the root cause of this issue has proven to be challenging due to its unpredictable nature. Therefore, we kindly request your assistance in comprehending the source cause of this error and guiding us in the right direction for its resolution.

We look forward to hearing from you soon. Thank you!","",""
"907055885816307713","kitty_km","15/06/2023 9:06 am","Hi guys have a question for the UniswapV3 oracle. I have already checked the doc and found that team do not suggested using Uniswap as oracle in Optimism. But how about Arbitrum, is it still not suggested? https://docs.uniswap.org/concepts/protocol/oracle#oracles-integrations-on-layer-2-rollups","",""
"149735676278079488","austino256","15/06/2023 9:23 am","The issue with optimism is their timestamps used to be incorrect. I don‚Äôt believe Arbitrum has that problem but DYOR","","RockStar (1)"
"907055885816307713","kitty_km","15/06/2023 9:45 am","I see Thanks alot","",""
"471357824299958273","crypto_rachel","15/06/2023 10:35 am",":TLDR:  üòä  so you need to extend the observation time (from what I know)
check these out as I have never done this
https://docs.uniswap.org/concepts/protocol/oracle
https://uniswapv3book.com/docs/milestone_5/price-oracle/","",""
"998858394297442309","0xandreistefan","15/06/2023 11:41 am","Ok, so in our case, the secondsAgos (120s) is older than the oldest stored observation in the oracle, and we get OLD error. 

And observations are created when swaps take place. But how can there be no observations older than 120s? For sure swaps have taken place e.g. 5hrs, 1 day, 1 week, 3 weeks ago...","",""
"471357824299958273","crypto_rachel","15/06/2023 11:52 am","the observation protocol only can track so much due to space, you can increase the time, this can be costly based on how long you need it to store, also iirc swaps pay for the writing, so more cardinality then more cost for swap","",""
"998858394297442309","0xandreistefan","15/06/2023 12:12 pm","hmm ok, that makes sense, and I see there's this `increaseObservationCardinalityNext` function that can be called to extend the number of observations. 

Thank you for the support, we'll try that, hopefully it will solve our issue :)","","YW (1),üíö (1)"
"856676601331580938","jpick713","26/06/2023 4:46 am","So I have an issue with my hardhat forking that is a little confusing for me

I am trying to get a TWAP price feed in the test I am running. One part of the includes calling observe where one of the values passed in is 0 (so current block)...when I pass in anywhere from 0-40 seconds, it seems to work fine...when I pass in 50 seconds I noticed a huge price change...so I looked at what was being passed back from slot0 index and tick‚Ä¶
both values were same (as should be expected) for both tests‚Ä¶
hence same observation array member and same tick should be used to create current accumulator, and since blocknumber are also the same, this should result in the same value for the accumulator at time 0 seconds ago‚Ä¶ but they differ!
What am I missing here?

```
60 second interval, values when t=0 passed
tick:  202040
lastIndex:  206
tickCumulative: 11215147971019

40 second interval, values when t=0 passed
tick:  202040
lastIndex:  206
tickCumulative: 11215148173059
```

why are the tick cumulative values from observeSingle when secondsAgo =0 different when block timestamps, tick value and last index are the same?

Thanks!","",""
"149735676278079488","austino256","26/06/2023 5:49 am","v3 oracle linearly interpolates if it does not find the exact time that you are asking for, so you could have it falling back on that","","RockStar (1)"
"856676601331580938","jpick713","26/06/2023 5:55 am","@Austin ü¶Ñ 
Thank you Austin for response!
But why would the value at 0 seconds ago change? In observeSingle function that is a special case and just linearly scales tick*timeElapsed + mostRecentTickCumulative‚Ä¶
It should never interpolate, right? (The other time value, yeah I agree that can vary and also with interpolation could have different observation values from the Observations array, but the ones at time = 0 seconds ago with same index, same tick and same blockNumber should always give same value across all the tests, right?)","",""
"856676601331580938","jpick713","26/06/2023 6:11 am","https://github.com/Uniswap/v3-core/blob/main/contracts/libraries/Oracle.sol#L254
this is the line I was thinking about, secondsAgo at 0 enters here and just does a transform, no interpolation...unless I am looking at it wrong of course üòÖ
Edit: @Austin ü¶Ñ forgot to add you to response here üòÄ","",""
"856676601331580938","jpick713","27/06/2023 6:13 pm","@spencer and @Austin ü¶Ñ 
Just curious if you had time to look at the above snippet and see what was going on. Thanks in advance!","",""
"471357824299958273","crypto_rachel","27/06/2023 10:19 pm","Please have patience and Don't ping multiple Devs","","üëç (1)"
"149735676278079488","austino256","28/06/2023 2:07 am","sorry i dont have any ideas atm","","üëç (1)"
"856676601331580938","jpick713","28/06/2023 3:47 am","Thanks and no worries!
I think since it differs by one tick maybe hardhat is stepping forward on time step or something weird‚Ä¶ I‚Äôll investigate more and thanks for checking","",""
"352206943689113611","ibuidl","30/06/2023 11:21 pm","Hello!! Where can I see a detailed documentation on how the liquidity oracle works? What is saved from the pool in the liquidity oracle? How others use this oracle to distribute rewards..","",""
"471357824299958273","crypto_rachel","01/07/2023 3:11 am","Don't have a lot for oracle info, but check here https://discord.com/channels/597638925346930701/1090083334908026961","",""
"352206943689113611","ibuidl","01/07/2023 2:41 pm","I've already checked those but not much about liquidity oracle..
I want to know why we are saving 1/L, is L the active liquidity, and how would you send rewards using this formula: ùëÖ¬∑L¬∑(ùë†ùëùùëô (ùë°1) ‚àí ùë†ùëùùëô (ùë°0)) .
and when do we save the spl?","",""
"471357824299958273","crypto_rachel","02/07/2023 3:54 am","Not sure what you are speaking of, never heard of Liquidity oracles. Oracles are for price","",""
"352206943689113611","ibuidl","02/07/2023 6:43 am","5.3 Liquidity Oracle (from the v3 Whitepaper)","",""
"471357824299958273","crypto_rachel","02/07/2023 7:25 am","so yeah obv. I have never worked with that... That formula looks generic for the whole pools LQ that is in range. Haven't seen anyone using it personally.  Getting the positional data would likely take a lot more math

since i've not done, this is just a guess on the whole pool math, nothing to verify with afaik

R == rate of tokens per second
L == in range LQ
ùë†ùëùùëô  = secondsPerLiquidityCumulative
t0 & t1   are likely the time period range of secondsPerLiquidityCumulative


for the positions you would likely need this from snapshot cumulative
`tickCumulativeInside int56, secondsPerLiquidityInsideX128 uint160, secondsInside uint32`

and this from the ticks
`liquidityNet int128, tickCumulativeOutside int56, secondsPerLiquidityOutsideX128 uint160, secondsOutside uint32`
I assume the math would be similar to the fee math.

But yeah sorry I don't know, or know of any examples","","üëçüèª (1)"
"352206943689113611","ibuidl","02/07/2023 8:37 pm","@Austin ü¶Ñ no detailed docs of how liquidity oracle and the distribution of rewards work?","",""
"149735676278079488","austino256","02/07/2023 8:41 pm","are you talking about the rewards distributor? that contract is un-audited and not reccomended for use.","",""
"352206943689113611","ibuidl","02/07/2023 8:51 pm","the one from v3! (5.3 from the Whitepaper) how is spl calculated, why 1/L ..","",""
"149735676278079488","austino256","02/07/2023 8:55 pm","oh that was just an example of how the liquidity oracle could be used. there are many possible implimentations and the specifics of the individual ideas of out of the scope of the whitepaper","",""
"803711168291405857","ken_souq","31/07/2023 5:14 am","Hi. Where can I find a list of v3 pools on arbitrum for which a TWAP oracle is available?","",""
"471357824299958273","crypto_rachel","01/08/2023 12:07 am","I have never seen a list for this","",""
"327286014815109141","liljrizzle","08/08/2023 3:27 am","hello surs","",""
"327286014815109141","liljrizzle","08/08/2023 3:28 am","i've always got my quotes and slippage from checking asset ratio in v2 pools","",""
"327286014815109141","liljrizzle","08/08/2023 3:29 am","is the correct way to get slippage now to use checkOracleSlippage ?","",""
"471357824299958273","crypto_rachel","08/08/2023 7:29 am","oracles are more needed for on-chain in contract price quotes. In v3 they built a quoter address for getting pool quotes, I have info and examples here https://discord.com/channels/597638925346930701/1090100195255140452","","‚ù§Ô∏è (1)"
"327286014815109141","liljrizzle","08/08/2023 7:30 am","THX","","YW (1)"
"619615586279882813","aurelou","18/08/2023 12:25 am","I found this snippet online in order to get price from Uniswap TWAP, I wanted to know if this the right way or if there is a recommended way to get price from Uniswap:

```ocaml
import ""@uniswap/v3-core/contracts/interfaces/IUniswapV3Pool.sol"";
import ""@uniswap/v3-core/contracts/libraries/TickMath.sol"";
import ""@uniswap/v3-core/contracts/libraries/FixedPoint96.sol"";
import ""@uniswap/v3-core/contracts/libraries/FullMath.sol"";

contract TwapGetter {
    function getSqrtTwapX96(address uniswapV3Pool, uint32 twapInterval) public view returns (uint160 sqrtPriceX96) {
        if (twapInterval == 0) {
            // return the current price if twapInterval == 0
            (sqrtPriceX96, , , , , , ) = IUniswapV3Pool(uniswapV3Pool).slot0();
        } else {
            uint32[] memory secondsAgos = new uint32[](2);
            secondsAgos[0] = twapInterval; // from (before)
            secondsAgos[1] = 0; // to (now)

            (int56[] memory tickCumulatives, ) = IUniswapV3Pool(uniswapV3Pool).observe(secondsAgos);

            // tick(imprecise as it's an integer) to price
            sqrtPriceX96 = TickMath.getSqrtRatioAtTick(
                int24((tickCumulatives[1] - tickCumulatives[0]) / twapInterval)
            );
        }
    }

    function getPriceX96FromSqrtPriceX96(uint160 sqrtPriceX96) public pure returns(uint256 priceX96) {
        return FullMath.mulDiv(sqrtPriceX96, sqrtPriceX96, FixedPoint96.Q96);
    }
}
```","",""
